[
    {
        "chunk_id": "chunk_0",
        "chunk_content": "a 5GS can support indirect network sharing between a hosting operator and participating operators as specified in 3GPP TS 23.501 [8] the AMF may support indirect network sharing NOTE 1 in this version of the specification the support of indirect network sharing has no UE impact NOTE 2 in case of indirect network sharing the AMF of hosting operator acts towards to the UE as the AMF of the selected PLMN or the RPLMN NOTE 3 in order to support indirect network sharing deployment when a UE of participating operator registers in the HPLMN the HPLMN can include a PLMN ID representing the participating operator in the list of equivalent PLMNs NOTE 4 in case of indirect network sharing if the UE is not allowed to access the selected PLMN which represents the participating operator the AMF of hosting operator can reject the registration request using an existing cause value in case of indirect network sharing during the generic UE configuration update procedure (see subclause 5.4.4) the"
    },
    {
        "chunk_id": "chunk_1",
        "chunk_content": "hosting operator can reject the registration request using an existing cause value in case of indirect network sharing during the generic UE configuration update procedure (see subclause 5.4.4) the registration procedure for initial registration (see subclause 5.5.1.2) or the registration procedure for mobility and periodic registration update (see subclause 5.5.1.3) if the selected PLMN ID is the PLMN ID of the HPLMN or an EHPLMN of the UE the AMF of hosting operator shall determine the available S-NSSAI(s) of hosting operator corresponding to the S-NSSAI(s) of participating operator provided by the UE and shall only use the corresponding S-NSSAI(s) of participating operator towards the UE NOTE 5 in this case the AMF of hosting operator uses the determined S-NSSAI(s) of hosting operator and the corresponding S-NSSAI(s) of participating operator towards other network functions (e.g SMF) NOTE 6 if the selected PLMN ID is different from the PLMN ID of the HPLMN or an EHPLMN of the UE"
    },
    {
        "chunk_id": "chunk_2",
        "chunk_content": "and the corresponding S-NSSAI(s) of participating operator towards other network functions (e.g SMF) NOTE 6 if the selected PLMN ID is different from the PLMN ID of the HPLMN or an EHPLMN of the UE the AMF of hosting operator can use S-NSSAI(s) of hosting operator as S-NSSAI(s) of serving PLMN and corresponding mapped HPLMN S-NSSAI(s)"
    },
    {
        "chunk_id": "chunk_3",
        "chunk_content": "the non-access stratum (NAS) described in the present document forms the highest stratum of the control plane between the UE and the AMF (reference point \"N1\" see 3GPP TS 23.501 [8]) for both 3GPP and non-3GPP access main functions of the protocols that are part of the NAS are a) support of mobility of the user equipment (UE) including also common procedures such as authentication identification generic UE configuration update and security mode control procedures; b) support of session management procedures to establish and maintain data connectivity between the UE and the data network; and c) NAS transport procedure to provide a transport of SMS LPP SLPP LCS UPP-CMI container UE policy container SOR transparent container and UE parameters update information payload principles for the handing of 5GS security contexts and for the activation of ciphering and integrity protection when a NAS signalling connection is established are provided in subclause 4.4 for the support of the above"
    },
    {
        "chunk_id": "chunk_4",
        "chunk_content": "of 5GS security contexts and for the activation of ciphering and integrity protection when a NAS signalling connection is established are provided in subclause 4.4 for the support of the above functions the following procedures are supplied within this specification a) elementary procedures for 5GS mobility management in clause 5; and b) elementary procedures for 5GS session management in clause 6 signalling procedures for the control of NAS security are described as part of the 5GMM common procedures in subclause 5.4 complete NAS transactions consist of specific sequences of elementary procedures examples of such specific sequences can be found in 3GPP TS 23.502 [9] the NAS for 5GS follows the protocol architecture model for layer 3 as described in 3GPP TS 24.007 [11]"
    },
    {
        "chunk_id": "chunk_5",
        "chunk_content": "a 5GS session management (5GSM) message is piggybacked in specific 5GS mobility management (5GMM) transport messages to this purpose the 5GSM messages can be transmitted in an information element in the 5GMM transport messages in this case the UE the AMF and the SMF execute the 5GMM procedure and the 5GSM procedure in parallel the success of the 5GMM procedure is not dependent on the success of the piggybacked 5GSM procedure the UE can only initiate the 5GSM procedure when there is a 5GMM context established at the UE during 5GMM procedures the UE and the AMF shall suspend the transmission of 5GSM messages except when a) the 5GMM procedure is piggybacking 5GSM messages; or b) the UE is in 5GMM-CONNECTED mode and a service request procedure for re-establishing user-plane resources of PDU session(s) is initiated without including PDU session status IE or allowed PDU session status IE in this case the UE and the AMF need not suspend the transmission of 5GSM messages related to other PDU"
    },
    {
        "chunk_id": "chunk_6",
        "chunk_content": "is initiated without including PDU session status IE or allowed PDU session status IE in this case the UE and the AMF need not suspend the transmission of 5GSM messages related to other PDU session(s) than the one(s) for which the user- plane resources re-establishment is requested if the UE determines to locally release the N1 NAS signalling connection upon receiving an SOR transparent container during a registration procedure as specified in 3GPP TS 23.122 [5] subclause C.2 the UE shall suspend the transmission of 5GSM messages after sending the REGISTRATION COMPLETE message and until the N1 NAS signalling connection is released to obtain service on a higher priority PLMN with the exception of the case when the UE has an emergency PDU session a 5GMM message piggybacking a 5GSM message for a PDU session shall be delivered via the access associated with the PDU session if any with the following exceptions a) the AMF shall send via 3GPP access a DL NAS TRANSPORT message piggybacking a"
    },
    {
        "chunk_id": "chunk_7",
        "chunk_content": "a PDU session shall be delivered via the access associated with the PDU session if any with the following exceptions a) the AMF shall send via 3GPP access a DL NAS TRANSPORT message piggybacking a downlink 5GSM message of a network-requested 5GSM procedure for a PDU session associated with non-3GPP access if the conditions specified in subclause 5.5.1.3.4 or subclause 5.6.1.4 are met; b) the UE shall send an UL NAS TRANSPORT message piggybacking a response message to the 5GSM message described in a) via either 1) 3GPP access; or 2) non-3GPP access if the UE is in 5GMM-CONNECTED mode over non-3GPP access; and NOTE the interaction between the 5GMM sublayer and the 5GSM sublayer to enable the UE to send the UL NAS TRANSPORT message containing the response message via 3GPP access is required this is achieved via UE implementation c) the UE shall send via the target access an UL NAS TRANSPORT message piggybacking a 5GSM message associated with a request type set to \"existing PDU session\""
    },
    {
        "chunk_id": "chunk_8",
        "chunk_content": "this is achieved via UE implementation c) the UE shall send via the target access an UL NAS TRANSPORT message piggybacking a 5GSM message associated with a request type set to \"existing PDU session\" or \"existing emergency PDU session\" for handover of an existing PDU session between 3GPP access and non-3GPP access a 5GMM message piggybacking a 5GSM message as a response message to a request message associated with an MA PDU session shall be delivered via the same access that the initial message was received"
    },
    {
        "chunk_id": "chunk_9",
        "chunk_content": "the network operator may restrict subscriber's access to certain access technologies for this purpose the network may send the RAT utilization control information to the UE to provide RAT utilization control information for the current PLMN or for the current PLMN and its equivalent PLMN(s) via the REGISTRATION ACCEPT message (see subclause 5.5.1.2 and clause 5.5.1.3) the CONFIGURATION UPDATE COMMAND message (see subclause 5.4.4.2) the REGISTRATION REJECT message (see subclause 5.5.1.2.5 and subclause 5.5.1.3.5) and the DEREGISTRATION REQUEST message (see subclause 5.5.2.3.1) the RAT utilization control information is applied in PLMN selection procedures as specified in 3GPP TS 23.122 [5] Editor's note how does the UE handle the received information of restricted RAT indicated in the RAT utilization control IE is FFS the UE shall store the received RAT utilization control information together with the PLMN identity of the current PLMN in the list of \"PLMNs with associated RAT"
    },
    {
        "chunk_id": "chunk_10",
        "chunk_content": "the RAT utilization control IE is FFS the UE shall store the received RAT utilization control information together with the PLMN identity of the current PLMN in the list of \"PLMNs with associated RAT restrictions\" (see 3GPP TS 23.122 [6]) the same list is used by 5GMM EMM GMM and MM when the UE is switched off it shall keep the stored list so that it can be used after switch on the UE shall delete the stored list if the USIM is removed the number of entries that the ME can store in the list of \"PLMNs with associated RAT restrictions\" is implementation specific but it shall be at least one"
    },
    {
        "chunk_id": "chunk_11",
        "chunk_content": "if the UE operates in single-registration mode whenever the IMS voice availability is determined or changes the UE shall execute procedures according to table 4.3.4.1 table 4.3.4.1 change of IMS voice availability for a UE in single-registration mode"
    },
    {
        "chunk_id": "chunk_12",
        "chunk_content": "the network can provide the SOR transparent container IE during the registration procedure to the UE in the REGISTRATION ACCEPT message the SOR transparent container IE is integrity protected by the HPLMN or subscribed SNPN as specified in 3GPP TS 33.501 [24] the UE can provide the SOR transparent container IE during the registration procedure to the network in the REGISTRATION COMPLETE message the SoR-MAC-IUE in the SOR transparent container IE is generated by the UE as specified in 3GPP TS 33.501 [24] the network can provide the payload container IE during the Network-initiated NAS transport procedure to the UE in DL NAS TRANSPORT message if the payload container type IE is set to \"SOR transparent container\" or \"UE parameters update transparent container\" the payload container IE is integrity protected by the HPLMN or subscribed SNPN as specified in 3GPP TS 33.501 [24] if the payload container type IE is set to \"Multiple payloads\" and the payload container type field of the payload"
    },
    {
        "chunk_id": "chunk_13",
        "chunk_content": "protected by the HPLMN or subscribed SNPN as specified in 3GPP TS 33.501 [24] if the payload container type IE is set to \"Multiple payloads\" and the payload container type field of the payload container entry is set to \"SOR transparent container\" or \"UE parameters update transparent container\" the payload container entry contents field of the payload container entry is integrity protected correspondingly the UE can provide the payload container IE during the UE-initiated NAS transport procedure to the network in UL NAS TRANSPORT message if the payload container type IE is set to \"SOR transparent container\" or \"UE parameters update transparent container\" the SoR-MAC-IUE or UPU-MAC-IUE in the payload container IE is generated by the UE as specified in 3GPP TS 33.501 [24] if the payload container type IE is set to \"Multiple payloads\" and the payload container type field of the payload container entry is set to \"SOR transparent container\" or \"UE parameters update transparent container\""
    },
    {
        "chunk_id": "chunk_14",
        "chunk_content": "type IE is set to \"Multiple payloads\" and the payload container type field of the payload container entry is set to \"SOR transparent container\" or \"UE parameters update transparent container\" the SoR-MAC-IUE or UPU-MAC-IUE in the payload container entry contents field of the payload container entry is generated by the UE correspondingly"
    },
    {
        "chunk_id": "chunk_15",
        "chunk_content": "when 5GMM requests the establishment of a NAS-signalling connection the RRC establishment cause used by the UE shall be selected according to one or more access identities (see subclauses 4.5.2 and 4.5.2A) and the determined access category by checking the rules specified in table 4.5.6.1 and table 4.5.6.2 if the access attempt matches more than one rule the RRC establishment cause of the lowest rule number shall be used if the determined access category is an operator-defined access category then the RRC establishment cause used by the UE shall be selected according to table 4.5.6.1 and table 4.5.6.2 based on one or more access identities (see subclauses 4.5.2 and 4.5.2A) and the standardized access category determined for the operator-defined access category as described in subclause 4.5.3 NOTE 1 following an RRC release with redirection the lower layers can set the RRC establishment cause or the resume cause to \"mps-PriorityAccess\" in the case of redirection to an NR cell connected"
    },
    {
        "chunk_id": "chunk_16",
        "chunk_content": "NOTE 1 following an RRC release with redirection the lower layers can set the RRC establishment cause or the resume cause to \"mps-PriorityAccess\" in the case of redirection to an NR cell connected to 5GCN (see 3GPP TS 38.331 [30]) or to \"highPriorityAccess\" in the case of redirection to an E-UTRA cell connected to 5GCN (see 3GPP TS 36.331 [25A]) if the network indicates to the UE during RRC connection release with redirection that the UE has an active MPS session NOTE 2 when the UE is acting as a 5G ProSe layer-2 UE-to-network relay UE it is possible for the lower layer to decide an applicable RRC establishment cause according to the request from the 5G ProSe layer-2 remote UE or according to the indication from upper layers including the case when the request from the 5G ProSe layer-2 remote UE is for emergency services as specified in 3GPP TS 38.331 [30] table 4.5.6.1 mapping table for access identities/access categories and RRC establishment cause when establishing N1 NAS"
    },
    {
        "chunk_id": "chunk_17",
        "chunk_content": "remote UE is for emergency services as specified in 3GPP TS 38.331 [30] table 4.5.6.1 mapping table for access identities/access categories and RRC establishment cause when establishing N1 NAS signalling connection via NR connected to 5GCN table 4.5.6.2 mapping table for access identities/access categories and RRC establishment cause when establishing N1 NAS signalling connection via E-UTRA connected to 5GCN"
    },
    {
        "chunk_id": "chunk_18",
        "chunk_content": "if a UE is outside the NS-AoS of an S-NSSAI for which a PDU session is established (see subclause 4.6.2.10) the UE shall not a) attempt to request the establishment of user plane resources of any PDU session associated with this S-NSSAI; and b) initiate the UE-initiated NAS transport procedure to send CIoT user data to the SMF (see subclause 5.4.5.2.1 case h) nor the service request procedure to send CIoT user data to the SMF (see subclause 5.6.1.1 case d) for the established PDU session if a UE is outside the NS-AoS of an S-NSSAI for which a PDU session is established (see subclause 4.6.2.10) the SMF shall not a) attempt to establish user plane resources of any PDU session associated with this S-NSSAI; and b) initiate the network-initiated NAS transport procedure to send CIoT user data to the UE (see subclause 5.4.5.3.1 case l) if a UE is outside the NS-AoS of an S-NSSAI for which a PDU session is established (see subclause 4.6.2.10) the UE shall not initiate for this PDU session any"
    },
    {
        "chunk_id": "chunk_19",
        "chunk_content": "the UE (see subclause 5.4.5.3.1 case l) if a UE is outside the NS-AoS of an S-NSSAI for which a PDU session is established (see subclause 4.6.2.10) the UE shall not initiate for this PDU session any UE-requested 5GSM procedure except a) the UE-requested PDU session release procedure; or b) the UE-requested PDU session modification procedure to set the 3GPP PS data off status to \"deactivated\" as specified in 3GPP TS 24.008 [13] NOTE a PDU session associated with an S-NSSAI is not released solely because a UE is outside the NS-AoS of the S-NSSAI if a UE is outside the NS-AoS of an S-NSSAI (see subclause 4.6.2.10) the UE shall not initiate the UE-requested PDU session establishment procedure for this S-NSSAI if the SMF cannot determine that the UE is located inside the NS-AoS of the S-NSSAI of an existing PDU session established for this S-NSSAI the SMF may according to operator's policy a) attempt to establish the user plane resources for this PDU session; or b) initiate the"
    },
    {
        "chunk_id": "chunk_20",
        "chunk_content": "S-NSSAI of an existing PDU session established for this S-NSSAI the SMF may according to operator's policy a) attempt to establish the user plane resources for this PDU session; or b) initiate the network-initiated NAS transport procedure to send CIoT user data to the UE for this PDU session (see subclause 5.4.5.3.1 case l)"
    },
    {
        "chunk_id": "chunk_21",
        "chunk_content": "a trusted WLAN interworking function (TWIF) provides functionalities for a non-5G capable over WLAN (N5CW) device to access 5GCN including a) NAS signalling over N1 NAS signalling connection with AMF; and b) PDU session establishment modification and release on behalf of the N5CW device over N2 connection with the AMF the TWIF registers on behalf of the N5CW device to an AMF according to subclause 5.5.1 by populating the parameters for the registration by using implementation specific default values which are the same for N5CW devices the TWIF may request to establish a PDU session as specified in subclause 6.4.1.2 on behalf of the N5CW device upon receipt of an IP configuration request from the N5CW device by populating either all the required parameters or part of the required parameters for the PDU session establishment by using implementation specific default values from the TWIF's configuration only one PDU session is supported when N5CW device accessing 5GCN via the TWIF NOTE 1"
    },
    {
        "chunk_id": "chunk_22",
        "chunk_content": "for the PDU session establishment by using implementation specific default values from the TWIF's configuration only one PDU session is supported when N5CW device accessing 5GCN via the TWIF NOTE 1 if part of the required parameters for the PDU session establishment is provided by the TWIF the remaining of the required parameters are determined by the AMF or the SMF based on the N5CW device's subscription information upon loss of the IP address of the N5CW device the TWIF acting on behalf of the N5CW device shall initiate the UE-requested PDU session release procedure as defined in subclause 6.4.3 NOTE 2 the established PDU session on behalf of the N5CW device can be modified by the TWIF or the network"
    },
    {
        "chunk_id": "chunk_23",
        "chunk_content": "the network that supports CIoT optimizations can redirect a UE between EPC and 5GCN as specified in subclause 5.31.3 of 3GPP TS 23.501 [8] the network can take into account the UE's N1 mode capability or S1 mode capability the CIoT network behaviour supported and preferred by the UE or the CIoT network behaviour supported by the network to determine the redirection NOTE it is assumed that the network would avoid redirecting the UE back and forth between EPC and 5GCN the network redirects the UE to EPC by rejecting the registration request or service request with the 5GMM cause #31 \"Redirection to EPC required\" as specified in subclause 5.5.1.2.5 5.5.1.3.5 and 5.6.1.5 upon receipt of reject message the UE disables the N1 mode capability for 3GPP access as specified in subclause 4.9.2 and enables the E-UTRA capability if it was disabled in order to move to EPC when there is no ongoing registration procedure or service request procedure for a UE in 5GMM-CONNECTED mode if the AMF"
    },
    {
        "chunk_id": "chunk_24",
        "chunk_content": "and enables the E-UTRA capability if it was disabled in order to move to EPC when there is no ongoing registration procedure or service request procedure for a UE in 5GMM-CONNECTED mode if the AMF determines to redirect the UE to EPC the AMF shall initiate the generic UE configuration update procedure to indicate registration requested and release of the N1 NAS signalling connection not requested as described in subclause 5.4.4 the network then redirects the UE to EPC by rejecting the registration request as specified in subclause 5.5.1.3.5 the network that supports CIoT optimizations can also redirect a UE from EPC to 5GCN as specified in subclause 5.3.19.2 of 3GPP TS 24.301 [15]"
    },
    {
        "chunk_id": "chunk_25",
        "chunk_content": "disable of the satellite NG-RAN capability shall only be performed when the UE is in 5GMM-IDLE mode when disabling the satellite NG-RAN capability the UE a) may disable the NR NTN access capability (see 3GPP TS 38.304 [28] and 3GPP TS 38.306 [28A]); b) shall memorize the identity of the PLMN where the satellite NG-RAN capability was disabled; and c) shall use that stored information in subsequent PLMN selections as specified in 3GPP TS 23.122 [6] NOTE as an implementation option the UE can disable satellite NG-RAN capability by disabling N1 mode capability for satellite NG-RAN access as an implementation option the UE may start a timer for enabling satellite NG-RAN capability and on expiry of this timer UE shall remove the PLMN from the memorized identity of the PLMNs where the satellite NG-RAN capability was disabled if the disabling of satellite NG-RAN capability was due to IMS voice is not available and the UE's usage setting is \"voice centric\" the UE shall re-enable the satellite"
    },
    {
        "chunk_id": "chunk_26",
        "chunk_content": "NG-RAN capability was disabled if the disabling of satellite NG-RAN capability was due to IMS voice is not available and the UE's usage setting is \"voice centric\" the UE shall re-enable the satellite NG-RAN capability when the UE's usage setting is changed from \"voice centric\" to \"data centric\" as specified in subclauses 4.3.3"
    },
    {
        "chunk_id": "chunk_27",
        "chunk_content": "in order to interwork with ePDG connected to EPC the UE shall operate as specified in either subclause 4.8.2.3 or subclause 4.8.3 which subclause the UE follows is chosen by the UE irrespective of the interworking without N26 interface indicator the UE shall not attempt to transfer PDU sessions with PDU session type \"Ethernet\" or \"Unstructured\" to an ePDG connected to EPC NOTE 1 PDU sessions with PDU session type \"Ethernet\" or \"Unstructured\" cannot be transferred to an ePDG connected to EPC because PDN connections with PDN type \"non-IP\" or PDN type \"Ethernet\" are not supported over ePDG connected to EPC the UE shall not attempt to transfer PDU sessions with the selected SSC mode set to \"SSC mode 2\" or \"SSC mode 3\" to an ePDG connected to EPC"
    },
    {
        "chunk_id": "chunk_28",
        "chunk_content": "the 5GS in a PLMN supports updating UE parameters via NAS signalling the feature enables the HPLMN to securely and dynamically re-configure the UE configuration parameters stored on the USIM and the ME - in this release of the specification updates of the following USIM configuration parameters are supported - routing indicator - in this release of specification updates of the following ME configuration parameters are supported - default configured NSSAI - disaster roaming information the 5GS in an SNPN supports updating UE parameters via NAS signalling the feature enables the SNPN to securely and dynamically re-configure the UE configuration parameter stored on the USIM if the UE used the USIM for registration to the SNPN - in this release of the specification updates of the following USIM configuration parameters are supported - routing indicator - in this release of specification updates of the following ME configuration parameters are supported - routing indicator - default"
    },
    {
        "chunk_id": "chunk_29",
        "chunk_content": "USIM configuration parameters are supported - routing indicator - in this release of specification updates of the following ME configuration parameters are supported - routing indicator - default configured NSSAI the update of UE configuration parameters is initiated by the network using the network-initiated downlink NAS transport procedure as described in subclause 5.4.5.3 the ME acknowledgement of successful reception of the updated UE configuration parameter information is sent back to the network using the UE-initiated uplink NAS transport procedure as described in subclause 5.4.5.2"
    },
    {
        "chunk_id": "chunk_30",
        "chunk_content": "the ATSSS feature is an optional feature that may be supported by the UE and the 5GCN the ATSSS feature enables a multi-access PDU connectivity service which can exchange PDUs between the UE and a data network by simultaneously using one 3GPP access network and one non-3GPP access network the multi-access PDU connectivity service is realized by establishing a multi-access PDU session i.e a PDU session that can have user-plane resources on two access networks NOTE 1 MA PDU session is not applicable for CIoT 5GS optimization in this release of specification the UE can request an MA PDU session when the UE is registered via both 3GPP and non-3GPP accesses or when the UE is registered via one access only the MA PDU session management is performed based on the PDU session management procedures the detailed description of the procedures for ATSSS between the UE and the network across one 3GPP access network and one non-3GPP access network are specified in 3GPP TS 24.193 [13B] NOTE 2 in this"
    },
    {
        "chunk_id": "chunk_31",
        "chunk_content": "the detailed description of the procedures for ATSSS between the UE and the network across one 3GPP access network and one non-3GPP access network are specified in 3GPP TS 24.193 [13B] NOTE 2 in this version of the specification PDU set handling is not supported in an MA PDU session"
    },
    {
        "chunk_id": "chunk_32",
        "chunk_content": "a 5G-RG a W-AGF acting on behalf of an FN-RG or a W-AGF acting on behalf of an N5GC device can use wireline access network to access the 5GCN by using NAS signalling procedures as described in 3GPP TS 23.501 [8] 3GPP TS 23.502 [9] and 3GPP TS 23.316 [6D] wireline access is a type of non-3GPP access a 5G-RG simultaneously connected to the same 5GCN of a PLMN over a 3GPP access and a wireline access is connected to a single AMF 5G-RG maintains the N1 NAS signalling connection with the AMF over the wireline access network after all the PDU sessions for the 5G-RG over that access have been released or handed over to 3GPP access the 5G-RG connected to 5GCN via NG-RAN is specified in 3GPP TS 23.316 [6D] when accessing the 5GCN over 3GPP access in addition to requirements specified for the 5G-RG in the present document the 5G-RG shall also perform requirements (e.g 5GMM 5GSM related requirements) specified in the present document for a UE accessing 5GCN over 3GPP access when accessing the"
    },
    {
        "chunk_id": "chunk_33",
        "chunk_content": "in the present document the 5G-RG shall also perform requirements (e.g 5GMM 5GSM related requirements) specified in the present document for a UE accessing 5GCN over 3GPP access when accessing the 5GCN over wireline access in addition to requirements specified for the 5G-RG in the present document the 5G-RG shall also perform requirements (e.g 5GMM 5GSM related requirements) specified in the present document for a UE accessing 5GCN over non-3GPP access if a requirement specified for the 5G-RG in the present document contradicts a requirement specified for the UE in the present document the 5G-RG shall perform the requirement specified in the present document for the 5G-RG for the scenario of FN-RG which does not support N1 mode the W-AGF acting on behalf of the FN-RG exchanges NAS signalling messages with an AMF for the scenario of N5GC device which does not support N1 mode the W-AGF acting on behalf of the N5GC device exchanges NAS signalling messages with an AMF for the scenario of"
    },
    {
        "chunk_id": "chunk_34",
        "chunk_content": "messages with an AMF for the scenario of N5GC device which does not support N1 mode the W-AGF acting on behalf of the N5GC device exchanges NAS signalling messages with an AMF for the scenario of AUN3 device which does not support N1 mode the 5G-RG acting on behalf of the AUN3 device exchanges NAS signalling messages with an AMF if the 5G-RG is not registered and connected to the 5GCN over wireline access the 5G-RG acting on behalf of an AUN3 device shall not initiate the initial registration procedure on behalf of the AUN3 device NOTE 1 the 5G-RG acting on behalf of an AUN3 device maintains a 5GMM context for each AUN3 device behind it the AMF maintains a 5GMM context for each AUN3 device the AMF is not aware of any association between the 5GMM context of the 5G-RG and the 5GMM context of the AUN3 device when the 5G-RG acting on behalf of an AUN3 device initiates the initial registration procedure on behalf of the AUN3 device the 5G-RG shall not include the requested NSSAI in the"
    },
    {
        "chunk_id": "chunk_35",
        "chunk_content": "of the AUN3 device when the 5G-RG acting on behalf of an AUN3 device initiates the initial registration procedure on behalf of the AUN3 device the 5G-RG shall not include the requested NSSAI in the REGISTRATION REQUEST message for the scenario of NAUN3 device which does not support N1 mode the 5G-RG acting on behalf of a connectivity group consisting of one or more NAUN3 devices exchanges NAS signalling messages with an AMF NOTE 2 it is also possible for 5G-RG that is connected to 5GCN via NG-RAN to act on behalf of a connectivity group consisting of one or more NAUN3 devices as specified in 3GPP TS 23.316 [6D] in addition to requirements specified for the W-AGF acting on behalf of the FN-RG (or on behalf of the N5GC device) in the present document the W-AGF acting on behalf of the FN-RG (or on behalf of the N5GC device) shall also perform requirements specified in the present document for a UE accessing 5GCN over non-3GPP access if a requirement specified for the W-AGF acting on"
    },
    {
        "chunk_id": "chunk_36",
        "chunk_content": "(or on behalf of the N5GC device) shall also perform requirements specified in the present document for a UE accessing 5GCN over non-3GPP access if a requirement specified for the W-AGF acting on behalf of the FN-RG (or on behalf of the N5GC device) in the present document contradicts a requirement specified for the UE in the present document the W-AGF acting on behalf of the FN-RG (or on behalf of the N5GC device) shall perform requirement specified in the present document for the W-AGF acting on behalf of the FN-RG (or on behalf of the N5GC device) the PDU session authentication and authorization procedure is not supported in a PDU session established by the W-AGF acting on behalf of the FN-RG or on behalf of the N5GC device the W-AGF acting on behalf of the N5GC device requests the establishment of a PDU session on behalf of the N5GC device upon registration only one PDU session per N5GC device is supported the 5G-RG acting on behalf of an AUN3 device requests the establishment of"
    },
    {
        "chunk_id": "chunk_37",
        "chunk_content": "of a PDU session on behalf of the N5GC device upon registration only one PDU session per N5GC device is supported the 5G-RG acting on behalf of an AUN3 device requests the establishment of a PDU session on behalf of the AUN3 device upon registration only one PDU session per AUN3 is supported the 5G-RG acting on behalf of a connectivity group consisting of one or more NAUN3 devices requests the establishment of a PDU session on behalf of the connectivity group only one PDU session per the connectivity group is supported where all the NAUN3 devices in the connectivity group share the same PDU session a 5G-RG or an FN-RG provide a non-3GPP access network to UEs a UE connected to a non-3GPP access network provided by the 5G-RG or the FN-RG can access to the 5GCN via the N3IWF or via the TNGF as described in 3GPP TS 23.316 [6D] the 5G-RG or the W-AGF acting on behalf of the FN-RG shall indicate \"ANDSP not supported by the UE\" in the UE policy classmark IE during the UE-initiated UE state"
    },
    {
        "chunk_id": "chunk_38",
        "chunk_content": "as described in 3GPP TS 23.316 [6D] the 5G-RG or the W-AGF acting on behalf of the FN-RG shall indicate \"ANDSP not supported by the UE\" in the UE policy classmark IE during the UE-initiated UE state indication procedure as specified in subclause D.2.2 the 5G-RG or the W-AGF acting on behalf of the FN-RG shall indicate \"Reporting URSP rule enforcement not supported by the UE\" in the UE policy classmark IE during the UE-initiated UE state indication procedure as specified in subclause D.2.2 the Non-3GPP QoS assistance information (N3QAI) is introduced to enable a 5G-RG to perform the QoS differentiation for the UE behind the 5G-RG the AUN3 device behind the 5G-RG or the NAUN3 device behind the 5G-RG the network may provide the N3QAI associated with the QoS flow during the PDU session establishment procedure as defined in subclause 6.4.1 or during the PDU session modification procedure as defined in subclause 6.4.2 NOTE 3 how the 5G-RG applies N3QAI is outside the scope of the present"
    },
    {
        "chunk_id": "chunk_39",
        "chunk_content": "procedure as defined in subclause 6.4.1 or during the PDU session modification procedure as defined in subclause 6.4.2 NOTE 3 how the 5G-RG applies N3QAI is outside the scope of the present document if the AMF receives an indication from the W-AGF that there is no 5G-RG connected to the same wireline for an AUN3 device as specified in 3GPP TS 23.316 [6D] the AMF shall locally de-register the AUN3 device"
    },
    {
        "chunk_id": "chunk_40",
        "chunk_content": "a PNI-NPN is made available by means of e.g dedicated DNNs or by one or more S-NSSAIs allocated for it a CAG can be optionally used in order to prevent UEs not allowed to access a PNI-NPN from accessing the PNI-NPN the key enablers for the CAG in the NAS layer are as follows a) CAG selection (see 3GPP TS 23.122 [5]); and b) provisioning of a \"CAG information list\" as specified in 3GPP TS 23.122 [5] from network to UE via the generic UE configuration update procedure the registration procedure the service request procedure and the network-initiated de-registration procedure the \"CAG information list\" provisioned by the network if available is stored in the non-volatile memory in the ME as specified in annex c the \"CAG information list\" stored in the ME is kept when the UE enters 5GMM-DEREGISTERED state annex c specifies condition under which the \"CAG information list\" stored in the ME is deleted additionally when a USIM is inserted if - no \"CAG information list\" is stored in the"
    },
    {
        "chunk_id": "chunk_41",
        "chunk_content": "state annex c specifies condition under which the \"CAG information list\" stored in the ME is deleted additionally when a USIM is inserted if - no \"CAG information list\" is stored in the non-volatile memory of the ME; or - the SUPI from the USIM does not match the SUPI stored together with the \"CAG information list\" in the non-volatile memory of the ME; and the UE has a \"CAG information list\" stored in the USIM (see 3GPP TS 31.102 [22]) the UE shall store the \"CAG information list\" from the USIM into the ME as specified in annex c the \"Allowed CAG list\" included in the entry for the HPLMN or EHPLMN in \"CAG information list\" stored in the USIM can contain a range of CAG-IDs the UE supporting CAG may perform the initial registration for emergency services via a non-CAG cell in a PLMN for which the UE has an \"indication that the UE is only allowed to access 5GS via CAG cells\" or via a CAG cell for which none of CAG-ID(s) is authorized based on the \"Allowed CAG list\" (see 3GPP TS 23.122"
    },
    {
        "chunk_id": "chunk_42",
        "chunk_content": "the UE has an \"indication that the UE is only allowed to access 5GS via CAG cells\" or via a CAG cell for which none of CAG-ID(s) is authorized based on the \"Allowed CAG list\" (see 3GPP TS 23.122 [5]) for the selected PLMN if a UE supporting CAG having an emergency PDU session is camping on a) a CAG cell and none of the CAG-ID(s) of the CAG cell is authorized based on the \"Allowed CAG list\" for the current PLMN in the UE's subscription; or b) a non-CAG cell in a PLMN for which the UE's subscription contains an \"indication that the UE is only allowed to access 5GS via CAG cells\"; the AMF shall behave as specified in subclause 5.4.4.2 5.5.1.3.4 or 5.6.1.4.1 NOTE the emergency services in a PLMN for which the UE's subscription contains an \"indication that the UE is only allowed to access 5GS via CAG cells\" can be subject to local regulation if a UE supporting enhanced CAG information is in a CAG cell with a CAG-ID which a) was authorized based on the \"Allowed CAG list\" associated with the"
    },
    {
        "chunk_id": "chunk_43",
        "chunk_content": "CAG cells\" can be subject to local regulation if a UE supporting enhanced CAG information is in a CAG cell with a CAG-ID which a) was authorized based on the \"Allowed CAG list\" associated with the current PLMN in the \"CAG information list\" stored in the ME; and b) becomes not authorized based on the \"Allowed CAG list\" (e.g. time validity information no longer matches UE's current time); and none of the CAG-ID(s) supported by the current CAG cell is currently authorized based on the \"Allowed CAG list\" of the entry for the current PLMN in the stored \"CAG information list\" and a) the entry for the current PLMN in the \"CAG information list\" does not include an \"indication that the UE is only allowed to access 5GS via CAG cells\" then the UE shall abort ongoing UE initialted 5GMM procedures if any locally release the NAS signalling connection if any enter the state 5GMM-REGISTERED.LIMITED-SERVICE and shall search for a suitable cell according to 3GPP TS 38.304 [28] or 3GPP TS 36.304 [25C]"
    },
    {
        "chunk_id": "chunk_44",
        "chunk_content": "any locally release the NAS signalling connection if any enter the state 5GMM-REGISTERED.LIMITED-SERVICE and shall search for a suitable cell according to 3GPP TS 38.304 [28] or 3GPP TS 36.304 [25C] with the stored \"CAG information list\"; or b) the entry for the current PLMN in the stored \"CAG information list\" includes an \"indication that the UE is only allowed to access 5GS via CAG cells\" and 1) one or more CAG-ID(s) are authorized based on the \"Allowed CAG list\" of the entry for the current PLMN in the stored \"CAG information list\" the UE shall abort ongoing UE initialted 5GMM procedures if any locally release the NAS signalling connection if any enter the state 5GMM-REGISTERED.LIMITED-SERVICE and shall search for a suitable cell according to 3GPP TS 38.304 [28] or 3GPP TS 36.304 [25C] with the stored \"CAG information list\"; or 2) no CAG-ID is authorized based on the \"Allowed CAG list\" of the entry for the current PLMN in the stored \"CAG information list\" and i) the UE does not"
    },
    {
        "chunk_id": "chunk_45",
        "chunk_content": "with the stored \"CAG information list\"; or 2) no CAG-ID is authorized based on the \"Allowed CAG list\" of the entry for the current PLMN in the stored \"CAG information list\" and i) the UE does not have an emergency PDU session then the UE shall abort ongoing UE initialted 5GMM procedures if any locally release the NAS signalling connection if any enter the state 5GMM-REGISTERED.PLMN-SEARCH and shall apply the PLMN selection process defined in 3GPP TS 23.122 [5] with the stored \"CAG information list\"; or ii) the UE has an emergency PDU session then the UE shall perform a local release of all PDU sessions associated with 3GPP access except for the emergency PDU session and enter the state 5GMM-REGISTERED.LIMITED-SERVICE"
    },
    {
        "chunk_id": "chunk_46",
        "chunk_content": "a 5G system (5GS) can act as a user plane node of an external network (e.g IEEE TSN bridge) or a 5GS can be independently used to enable TSC for these purposes information available at a UE is provided to the network and port management information containers are exchanged between a DS-TT and a TSN AF or a TSCTSF (see 3GPP TS 24.539 [19BA]) during a UE-requested PDU session establishment procedure if the UE supports transfer of port management information containers then the UE indicates that transfer of port management information container is supported and the UE provides a DS-TT ethernet port MAC address (if the PDU session type is Ethernet) port management information container and a UE-DS-TT residence time (if available) to the network (see subclause 6.4.1.2) once the UE has successfully established a PDU session and the UE has indicated that transfer of port management information container is supported during the UE-requested PDU session establishment procedure (see subclause"
    },
    {
        "chunk_id": "chunk_47",
        "chunk_content": "established a PDU session and the UE has indicated that transfer of port management information container is supported during the UE-requested PDU session establishment procedure (see subclause 6.4.1.2) then port management information containers are exchanged via a UE-requested PDU session modification procedure and a network-requested PDU session modification procedure (see subclauses 6.3.2 and 6.4.2) the UE receiving a port management information container from the network shall forward the port management information container to the DS-TT the SMF receiving a port management information container from the UE shall operate as described in 3GPP TS 23.502 [9]"
    },
    {
        "chunk_id": "chunk_48",
        "chunk_content": "UE radio capability signalling optimisation (RACS) is a feature that is optional at both the UE and the network and which aims to optimise the transmission of UE radio capability over the radio interface (see 3GPP TS 23.501 [8]) RACS works by assigning an identifier to represent a set of UE radio capabilities this identifier is called the UE radio capability ID a UE radio capability ID can be either manufacturer-assigned or network-assigned the UE radio capability ID is an alternative to the signalling of the radio capabilities container over the radio interface in this release of the specification RACS is applicable to neither NB-N1 mode nor non-3GPP access if the UE supports RACS a) the UE shall indicate support for RACS by setting the RACS bit to \"RACS supported\" in the 5GMM capability IE of the REGISTRATION REQUEST message; b) if the UE performs a registration procedure for initial registration and the UE has an applicable UE radio capability ID for the current UE radio"
    },
    {
        "chunk_id": "chunk_49",
        "chunk_content": "capability IE of the REGISTRATION REQUEST message; b) if the UE performs a registration procedure for initial registration and the UE has an applicable UE radio capability ID for the current UE radio configuration in the selected network the UE shall include the UE radio capability ID in the UE radio capability ID IE as a non-cleartext IE in the REGISTRATION REQUEST message if both a network-assigned UE radio capability ID and a manufacturer-assigned UE radio capability ID are applicable the UE shall include the network-assigned UE radio capability ID in the REGISTRATION REQUEST message; c) if the radio configuration at the UE changes (for instance because the UE has disabled a specific radio capability) then 1) if the UE has an applicable UE radio capability ID for the new UE radio configuration the UE shall initiate a registration procedure for mobility and periodic registration update the UE shall include the applicable UE radio capability ID in the UE radio capability ID IE of the"
    },
    {
        "chunk_id": "chunk_50",
        "chunk_content": "the UE shall initiate a registration procedure for mobility and periodic registration update the UE shall include the applicable UE radio capability ID in the UE radio capability ID IE of the REGISTRATION REQUEST message and shall include the 5GS update type IE in the REGISTRATION REQUEST message with the NG-RAN-RCU bit set to \"UE radio capability update needed\" if both a network-assigned UE radio capability ID and a manufacturer-assigned UE radio capability ID are applicable the UE shall include the network-assigned UE radio capability ID in the REGISTRATION REQUEST message; and 2) if the UE does not have an applicable UE radio capability ID for the new UE radio configuration the UE shall initiate a registration procedure for mobility and periodic registration update and include the 5GS update type IE in the REGISTRATION REQUEST message with the NG-RAN-RCU bit set to \"UE radio capability update needed\"; NOTE performing the registration procedure for mobility and periodic registration"
    },
    {
        "chunk_id": "chunk_51",
        "chunk_content": "type IE in the REGISTRATION REQUEST message with the NG-RAN-RCU bit set to \"UE radio capability update needed\"; NOTE performing the registration procedure for mobility and periodic registration update and including the 5GS update type IE in the REGISTRATION REQUEST message with the NG-RAN-RCU bit set to \"UE radio capability update needed\" without a UE radio capability ID included in the REGISTRATION REQUEST message can trigger the network to assign a new UE radio capability ID to the UE d) upon receiving a network-assigned UE radio capability ID in the REGISTRATION ACCEPT message or the CONFIGURATION UPDATE COMMAND message the UE shall store the network-assigned UE radio capability ID and the PLMN ID or SNPN identity of the serving network and if the UE supports access to an SNPN using credentials from a credentials holder equivalent SNPNs or both the selected entry of the \"list of subscriber data\" or the selected PLMN subscription along with a mapping to the current UE radio"
    },
    {
        "chunk_id": "chunk_52",
        "chunk_content": "using credentials from a credentials holder equivalent SNPNs or both the selected entry of the \"list of subscriber data\" or the selected PLMN subscription along with a mapping to the current UE radio configuration in its non-volatile memory as specified in annex c the UE shall be able to store at least the last 16 received network-assigned UE radio capability IDs with the associated PLMN ID or SNPN identity and if the UE supports access to an SNPN using credentials from a credentials holder equivalent SNPNs or both the selected entry of the \"list of subscriber data\" or the selected PLMN subscription and the mapping to the corresponding UE radio configuration; e) the UE shall not use a network-assigned UE radio capability ID assigned by a PLMN in PLMNs equivalent to the PLMN which assigned it or by an SNPN in SNPNs equivalent to the SNPN which assigned it; f) upon receiving a UE radio capability ID deletion indication IE set to \"Network-assigned UE radio capability IDs deletion"
    },
    {
        "chunk_id": "chunk_53",
        "chunk_content": "it or by an SNPN in SNPNs equivalent to the SNPN which assigned it; f) upon receiving a UE radio capability ID deletion indication IE set to \"Network-assigned UE radio capability IDs deletion requested\" in the REGISTRATION ACCEPT message or the CONFIGURATION UPDATE COMMAND message the UE shall delete all network-assigned UE radio capability IDs stored at the UE for the serving network initiate a registration procedure for mobility and periodic registration update and include an applicable manufacturer-assigned UE radio capability ID for the current UE radio configuration if available at the UE in the UE radio capability ID IE of the REGISTRATION REQUEST message; and g) if the UE performs a registration procedure for mobility and periodic registration update due to entering a tracking area that is not in the list of tracking areas that the UE previously registered in the AMF and the UE has an applicable UE radio capability ID for the current UE radio configuration in the selected"
    },
    {
        "chunk_id": "chunk_54",
        "chunk_content": "area that is not in the list of tracking areas that the UE previously registered in the AMF and the UE has an applicable UE radio capability ID for the current UE radio configuration in the selected network the UE shall include the UE radio capability ID in the UE radio capability ID IE as a non-cleartext IE in the REGISTRATION REQUEST message if both a network-assigned UE radio capability ID and a manufacturer-assigned UE radio capability ID are applicable the UE shall include the network-assigned UE radio capability ID in the REGISTRATION REQUEST message if the network supports RACS a) the network may assign a network-assigned UE radio capability ID to a UE which supports RACS by including a UE radio capability ID IE in the REGISTRATION ACCEPT message or in the CONFIGURATION UPDATE COMMAND message; b) the network may trigger the UE to delete all network-assigned UE radio capability IDs stored at the UE for the serving network by including a UE radio capability ID deletion indication"
    },
    {
        "chunk_id": "chunk_55",
        "chunk_content": "message; b) the network may trigger the UE to delete all network-assigned UE radio capability IDs stored at the UE for the serving network by including a UE radio capability ID deletion indication IE set to \"Network-assigned UE radio capability IDs deletion requested\" in the REGISTRATION ACCEPT message or in the CONFIGURATION UPDATE COMMAND message; and c) the network may send an IDENTITY REQUEST message to the UE that supports RACS to retrieve the PEI if not available in the network"
    },
    {
        "chunk_id": "chunk_56",
        "chunk_content": "a UE in NB-N1 mode (see 3GPP TS 36.331 [25A]) shall calculate the value of the applicable NAS timer indicated in table 10.2.1 plus 240s the timer value obtained is used as described in the appropriate procedure subclause of this specification the NAS timer value shall be calculated at start of a NAS procedure and shall not re-calculate the use of the NAS timer value until the NAS procedure is completed restarted or aborted when an AMF that supports NB-N1 mode performs NAS signalling with a UE which is using NB-N1 mode the AMF shall calculate the value of the applicable NAS timer indicated in table 10.2.2 plus 240s the timer value obtained is used as described in the appropriate procedure subclause of this specification the NAS timer value shall be calculated at start of a NAS procedure and shall not re-calculate the use of the NAS timer value until the NAS procedure is completed restarted or aborted"
    },
    {
        "chunk_id": "chunk_57",
        "chunk_content": "a UE in NB-N1 mode (see 3GPP TS 36.331 [25A]) shall calculate the value of the applicable NAS timer indicated in table 10.3.1 plus 180s the timer value obtained is used as described in the appropriate procedure subclause of this specification the NAS timer value shall be calculated at start of a NAS procedure and shall not re-calculate the use of the NAS timer value until the NAS procedure is completed restarted or aborted when an SMF that supports NB-N1 mode performs NAS signalling with a UE which is using NB-N1 mode the SMF shall calculate the value of the applicable NAS timer indicated in table 10.3.2 plus 180s the timer value obtained is used as described in the appropriate procedure subclause of this specification the NAS timer value shall be calculated at start of a NAS procedure and shall not re-calculate the use of the NAS timer value until the NAS procedure is completed restarted or aborted"
    },
    {
        "chunk_id": "chunk_58",
        "chunk_content": "in WB-N1 mode a UE operating in category CE can operate in either CE mode a or CE mode b (see 3GPP TS 36.306 [25D]) if a UE that supports CE mode b and operates in WB-N1 mode the UE's usage setting is not set to \"voice centric\" (see 3GPP TS 23.501 [8]) and a) the use of enhanced coverage is not restricted by the network; or b) CE mode b is not restricted by the network (see 3GPP TS 23.501 [8]); the UE shall apply the value of the applicable NAS timer indicated in table 10.2.1 for WB-N1/CE mode a UE that supports CE mode b and operates in WB-N1 mode shall not apply the value of the applicable NAS timer indicated in table 10.2.1 for WB-N1/CE mode before receiving an indication from the network that the use of enhanced coverage is not restricted or CE mode b is not restricted as described in this subclause the NAS timer value obtained is used as described in the appropriate procedure subclause of this specification the NAS timer value shall be calculated at start of a NAS procedure and"
    },
    {
        "chunk_id": "chunk_59",
        "chunk_content": "this subclause the NAS timer value obtained is used as described in the appropriate procedure subclause of this specification the NAS timer value shall be calculated at start of a NAS procedure and shall not be re-calculated until the NAS procedure is completed restarted or aborted the support of CE mode b by a UE is indicated to the AMF by lower layers and shall be stored by the AMF when an AMF that supports WB-N1 mode performs NAS signalling with a UE which supports CE mode b and operates in WB-N1 mode the UE's usage setting is not set to \"voice centric\" (see 3GPP TS 23.501 [8]) and the AMF determines that a) the use of enhanced coverage is not restricted for the UE; or b) CE mode b is not restricted for the UE (see 3GPP TS 23.501 [8]); the AMF shall calculate the value of the applicable NAS timer indicated in table 10.2.2 for WB-N1/CE mode the NAS timer value obtained is used as described in the appropriate procedure subclause of this specification the NAS timer value shall be"
    },
    {
        "chunk_id": "chunk_60",
        "chunk_content": "NAS timer indicated in table 10.2.2 for WB-N1/CE mode the NAS timer value obtained is used as described in the appropriate procedure subclause of this specification the NAS timer value shall be calculated at start of a NAS procedure and shall not be re-calculated until the NAS procedure is completed restarted or aborted"
    },
    {
        "chunk_id": "chunk_61",
        "chunk_content": "the UE supporting UAS services can have no-transmit zone assistance information the no-transmit zone assistance information is a list of entries where each entry indicates one or more restricted frequency bands of a no-transmit zone a geographic area where the no-transmit zone is valid and zero or more time periods indicating when the no-transmit zone is valid if no time period is included in an entry the no-transmit zone is valid regardless of the time each geographic area is indicated by a 4-point polygon as specified in 3GPP TS 23.032 [4B] and minimum and maximum values of altitude each point of polygon is indicated by longitude and latitude each time period is indicated by minimum and maximum values of date and time in UTC NOTE 1 enforcement of a no-transmit zone based on the no-transmit zone assistance information depends on local regulation and is UE implementation specific NOTE 2 subject to local regulation the UE is not expected to transmit signalling or data when in a"
    },
    {
        "chunk_id": "chunk_62",
        "chunk_content": "zone assistance information depends on local regulation and is UE implementation specific NOTE 2 subject to local regulation the UE is not expected to transmit signalling or data when in a no-transmit zone"
    },
    {
        "chunk_id": "chunk_63",
        "chunk_content": "when a UE camps on a satellite NG-RAN cell the UE may receive multiple TACs from the lower layers the UE shall construct TAIs from the multiple TACs (i.e concatenate the identity of the current PLMN and each of the TACs) and select a TAI as follows a) if at least one TAI belongs to the current registration area of the UE the UE shall select a TAI which belongs to the current registration area of the UE according to the followings if there are multiple TAIs which belong to the current registration area of the UE the UE shall select a TAI as follows 1) if there is a TAI which belongs to the list of \"allowed tracking area\" (if any) and does not belong to the list of \"non-allowed tracking areas\" (if any) the UE shall select a TAI which belongs to the list of \"allowed tracking area\" (if any) and does not belong to the list of \"non-allowed tracking areas\" (if any) in this case if there are multiple TAIs which belong to the list of \"allowed tracking area\" (if any) and does not belong to the"
    },
    {
        "chunk_id": "chunk_64",
        "chunk_content": "does not belong to the list of \"non-allowed tracking areas\" (if any) in this case if there are multiple TAIs which belong to the list of \"allowed tracking area\" (if any) and does not belong to the list of \"non-allowed tracking areas\" (if any) then the UE shall consider each of these TAIs equal and select a TAI in an implementation-specific way (e.g taking into account LADN service area information) if these multiple TAIs contain the previous current TAI the current TAI can be left unchanged 2) if there is no TAI which belongs to the list of \"allowed tracking area\" (if any) and does not belong to the list of \"non-allowed tracking areas\" (if any) or neither the list of \"allowed tracking area\" nor the list of \"non-allowed tracking areas\" is available then the UE shall consider each of these TAIs equal and select a TAI in an implementation-specific way (e.g taking into account LADN service area information) if these multiple TAIs contain the previous current TAI the current TAI can be"
    },
    {
        "chunk_id": "chunk_65",
        "chunk_content": "TAIs equal and select a TAI in an implementation-specific way (e.g taking into account LADN service area information) if these multiple TAIs contain the previous current TAI the current TAI can be left unchanged b) if the current registration area is not available in the UE or no TAI belongs to the current registration area of the UE and 1) there is a TAI which belongs to neither the list of \"5GS forbidden tracking areas for roaming\" nor the list of \"5GS forbidden tracking areas for regional provision of service\" the UE shall select a TAI which belongs to neither the list of \"5GS forbidden tracking areas for roaming\" nor the list of \"5GS forbidden tracking areas for regional provision of service\" in this case if there are multiple TAIs which belong to neither the list of \"5GS forbidden tracking areas for roaming\" nor the list of \"5GS forbidden tracking areas for regional provision of service\" then the UE shall consider each of these TAIs equal and select a TAI in an"
    },
    {
        "chunk_id": "chunk_66",
        "chunk_content": "\"5GS forbidden tracking areas for roaming\" nor the list of \"5GS forbidden tracking areas for regional provision of service\" then the UE shall consider each of these TAIs equal and select a TAI in an implementation-specific way 2) all TAIs belong to the list of \"5GS forbidden tracking areas for roaming\" or the list of \"5GS forbidden tracking areas for regional provision of service\" then the UE shall consider each of these TAIs equal and select a TAI in an implementation-specific way the UE shall consider the selected TAI as the current TAI the UE shall select a TAI when a) the UE receives multiple TACs from the lower layers; or b) the UE has received multiple TACs from the lower layers upon starting to camping on the current cell and the registration area the list of \"allowed tracking areas\" the list of \"non-allowed tracking areas\" the list of \"5GS forbidden tracking areas for roaming\" or the list of \"5GS forbidden tracking areas for regional provision of service\" is updated handling"
    },
    {
        "chunk_id": "chunk_67",
        "chunk_content": "the list of \"non-allowed tracking areas\" the list of \"5GS forbidden tracking areas for roaming\" or the list of \"5GS forbidden tracking areas for regional provision of service\" is updated handling of the list of \"5GS forbidden tracking areas for roaming\" and the list of \"5GS forbidden tracking areas for regional provision of service\" is specified in subclause 5.3.13"
    },
    {
        "chunk_id": "chunk_68",
        "chunk_content": "the UE and the network may support minimization of service interruption (MINT) MINT aims to enable a UE to obtain service from a PLMN offering disaster roaming services when a disaster condition applies to the UE determined PLMN with disaster condition if the UE supports MINT the indication of whether disaster roaming is enabled in the UE the indication of 'applicability of \"lists of PLMN(s) to be used in disaster condition\" provided by a VPLMN' the one or more \"list of PLMN(s) to be used in disaster condition\" disaster roaming wait range and disaster return wait range provisioned by the network if available are stored in the non-volatile memory in the ME as specified in annex c and are kept when the UE enters 5GMM-DEREGISTERED state annex c specifies condition under which the indication of whether disaster roaming is enabled in the UE the indication of 'applicability of \"lists of PLMN(s) to be used in disaster condition\" provided by a VPLMN' the one or more \"lists of PLMN(s) to be"
    },
    {
        "chunk_id": "chunk_69",
        "chunk_content": "of whether disaster roaming is enabled in the UE the indication of 'applicability of \"lists of PLMN(s) to be used in disaster condition\" provided by a VPLMN' the one or more \"lists of PLMN(s) to be used in disaster condition\" disaster roaming wait range and disaster return wait range stored in the ME are deleted upon selecting a PLMN for disaster roaming as specified in 3GPP TS 23.122 [5] a) if the UE does not have a stored disaster roaming wait range the UE shall perform a registration procedure for disaster roaming services on the selected PLMN as described in subclause 5.5.1; and b) if the UE has a stored disaster roaming wait range the UE shall generate a random number within the disaster roaming wait range and start a timer with the generated random number while the timer is running the UE shall not initiate registration on the selected PLMN except if the UE needs to request an emergency PDU session in which case the UE shall initiate the registration procedure set the 5GS"
    },
    {
        "chunk_id": "chunk_70",
        "chunk_content": "the UE shall not initiate registration on the selected PLMN except if the UE needs to request an emergency PDU session in which case the UE shall initiate the registration procedure set the 5GS registration type IE to \"emergency registration\" in the REGISTRATION REQUEST message and keep the timer running upon expiration of the timer if the UE does not have an emergency PDU session the UE shall perform a registration procedure for disaster roaming services as described in subclause 5.5.1 if still camped on the selected PLMN if the UE has an emergency PDU session when the timer expires the registration procedure for disaster roaming services as described in subclause 5.5.1 shall be performed after the release of the emergency PDU session if the UE is still camped on the selected PLMN if the UE is switched off when the timer for disaster roaming wait range is running the UE shall behave as follows when the UE is switched on the USIM in the UE remains the same and the UE selects the PLMN"
    },
    {
        "chunk_id": "chunk_71",
        "chunk_content": "UE is switched off when the timer for disaster roaming wait range is running the UE shall behave as follows when the UE is switched on the USIM in the UE remains the same and the UE selects the PLMN for disaster roaming - let t1 be the time remaining for the timer for disaster roaming wait range timeout at switch off and let t be the time elapsed between switch off and switch on if t1 is greater than t then the timer shall be restarted with the value t1 \u2013 t if t1 is equal to or less than t then the timer need not be restarted if the UE is not capable of determining t then the UE shall restart the timer with the value t1 upon determining that a disaster condition has ended as specified in 3GPP TS 23.122 [6] a) the UE shall stop the timer started with a generated random number within the disaster roaming wait range if running; b) the UE shall perform PLMN selection as specified in 3GPP TS 23.122 [5] except if the UE already selected an allowable PLMN as specified in 3GPP TS 23.122 [6];"
    },
    {
        "chunk_id": "chunk_72",
        "chunk_content": "roaming wait range if running; b) the UE shall perform PLMN selection as specified in 3GPP TS 23.122 [5] except if the UE already selected an allowable PLMN as specified in 3GPP TS 23.122 [6]; and c) if the UE selects the UE determined PLMN with disaster condition and has a stored disaster return wait range which is 1) provided by the PLMN providing disaster roaming services; or 2) provided by the selected PLMN the UE shall generate a random number within the disaster return wait range start a timer with the generated random number value and enter 5GMM-DEREGISTERED.ATTEMPTING-REGISTRATION state or 5GMM-REGISTERED.ATTEMPTING-REGISTRATION-UPDATE state if registered while the timer is running the UE shall not initiate registration on the selected PLMN except if the UE needs to request an emergency PDU session in which case the UE shall initiate the registration procedure set the 5GS registration type IE to \"emergency registration\" in the REGISTRATION REQUEST message and keep the timer"
    },
    {
        "chunk_id": "chunk_73",
        "chunk_content": "PDU session in which case the UE shall initiate the registration procedure set the 5GS registration type IE to \"emergency registration\" in the REGISTRATION REQUEST message and keep the timer running upon expiration of the timer if the UE does not have an emergency PDU session the UE shall perform a registration procedure if still camped on the selected PLMN if the UE has an emergency PDU session when the timer expires the registration procedure as described in subclause 5.5.1 shall be performed after the release of the emergency PDU session if the UE is still camped on the selected PLMN otherwise the UE shall perform registration procedure in the selected PLMN if the UE is switched off when the timer for disaster return wait range is running the UE shall behave as follows when the UE is switched on the USIM in the UE remains the same and the UE selects the UE determined PLMN with disaster condition - let t1 be the time remaining for the timer for disaster return wait range timeout at"
    },
    {
        "chunk_id": "chunk_74",
        "chunk_content": "on the USIM in the UE remains the same and the UE selects the UE determined PLMN with disaster condition - let t1 be the time remaining for the timer for disaster return wait range timeout at switch off and let t be the time elapsed between switch off and switch on if t1 is greater than t then the timer shall be restarted with the value t1 \u2013 t if t1 is equal to or less than t then the timer need not be restarted if the UE is not capable of determining t then the UE shall restart the timer with the value t1 when the AMF assigns a registration area to the UE registered for disaster roaming services the AMF shall only include TAIs covering the area with the disaster condition when the AMF determines that the disaster condition has ended and the UE which is registered for disaster roaming services has an emergency PDU session the AMF shall initiate the generic UE configuration update procedure to indicate that the UE is registered for emergency services as described in subclause 5.4.4.2"
    },
    {
        "chunk_id": "chunk_75",
        "chunk_content": "has an emergency PDU session the AMF shall initiate the generic UE configuration update procedure to indicate that the UE is registered for emergency services as described in subclause 5.4.4.2 interworking with EPS is not supported for UEs that are registered for disaster roaming services when registering for disaster roaming services the UE indicates to the network that S1 mode is not supported as described in subclause 5.5.1.2.2 while registered for disaster roaming services and upon a need to establish an emergency PDU session or perform emergency services fallback the UE initiates the registration procedure for mobility and periodic registration update and indicates that S1 mode is supported as described in subclause 5.5.1.3.2 if the UE is registered for disaster roaming services and the registered PLMN is removed from forbidden PLMN lists due to reasons specified in subclause 4.4.6 or annex c in 3GPP TS 23.122 [5] then UE shall initiate the de-registration procedure and perform"
    },
    {
        "chunk_id": "chunk_76",
        "chunk_content": "the registered PLMN is removed from forbidden PLMN lists due to reasons specified in subclause 4.4.6 or annex c in 3GPP TS 23.122 [5] then UE shall initiate the de-registration procedure and perform PLMN selection as specified in 3GPP TS 23.122 [5]"
    },
    {
        "chunk_id": "chunk_77",
        "chunk_content": "a network and a MUSIM UE may support one or more of the MUSIM features (i.e the N1 NAS signalling connection release the paging indication for voice services the reject paging request the paging restriction and the paging timing collision control) if MUSIM UE supports one or more MUSIM features the UE indicates support of one or more MUSIM features (except for the paging timing collision control) during the registration procedure if the UE has indicated support of the N1 NAS signalling connection release or the reject paging request or both and the UE supports the paging restriction the UE indicates support of the paging restriction if the UE indicates support of one or more MUSIM features and the network decides to accept one or more MUSIM features the network indicates the support of one or more MUSIM features during the registration procedure the network only indicates the support of the paging restriction together with the support of either N1 NAS signalling connection release or"
    },
    {
        "chunk_id": "chunk_78",
        "chunk_content": "or more MUSIM features during the registration procedure the network only indicates the support of the paging restriction together with the support of either N1 NAS signalling connection release or the reject paging request the network does not indicate support for any MUSIM feature to the UE during the registration for emergency services if the UE is not currently registered for emergency service and the UE receives the CONFIGURATION UPDATE COMMAND message with the 5GS registration result IE value set to \"Registered for emergency services\" then UE shall behave as if the network did not indicate support for any MUSIM feature in the last registration procedure if the network has sent CONFIGURATION UPDATE COMMAND message with the 5GS registration result IE value set to \"Registered for emergency services\" then network shall behave as if it did not indicate support for any MUSIM feature in the last registration procedure if a UE stops fulfilling the condition to be considered a MUSIM UE"
    },
    {
        "chunk_id": "chunk_79",
        "chunk_content": "services\" then network shall behave as if it did not indicate support for any MUSIM feature in the last registration procedure if a UE stops fulfilling the condition to be considered a MUSIM UE as defined in subclause 3.1 and the UE has negotiated support of one or more MUSIM features then the UE shall initiate a registration procedure for mobility and periodic registration update to indicate that all the MUSIM features are not supported (except for the paging timing collision control) as specified in subclause 5.5.1.3 a MUSIM UE operating in NB-N1 mode or in WB-N1 mode CE mode b does not indicate the support for paging indication for voice services during the registration procedure towards the network"
    },
    {
        "chunk_id": "chunk_80",
        "chunk_content": "the 5GS can support the personal IoT network (PIN) service (see 3GPP TS 23.501 [8]) the PIN enables the personal IoT network elements (PINEs) to communicate with each other via PIN direct communication PIN indirect communication or PIN-DN communication for the PIN indirect communication and PIN-DN communication a UE acting as a PIN element with gateway capability (PEGC) enables the PINEs behind the PEGC to connect to the network and to communicate with other PINEs within the PIN or with the DN via the PDU session established for PIN a PEGC may serve one or more PINs the PEGC establishes only one PDU session for each PIN the PEGC establishes different PDU sessions for different PINs based on different DNNs and S-NSSAIs the PEGC may establish only one PDU session for multiple PINs if traffic differentiation for multiple PINs is not required in 5GS NOTE 1 the PIN direct communication is out of the scope of 3GPP the PIN PEGC and PINEs are managed by PIN element with management capability"
    },
    {
        "chunk_id": "chunk_81",
        "chunk_content": "differentiation for multiple PINs is not required in 5GS NOTE 1 the PIN direct communication is out of the scope of 3GPP the PIN PEGC and PINEs are managed by PIN element with management capability (PEMC) and optionally the corresponding application function each PIN contains at least one PEGC and at least one PEMC the PIN architecture is captured in 3GPP TS 23.501 [8] the 5GS supports the delivery of URSP rules which include the PIN ID to a PEGC registered to 5GS (see 3GPP TS 23.501 [8] and 3GPP TS 23.503 [10]) the 5GS is enhanced to support the PDU session management for PIN to ensure the end-to-end QoS requirement the end-to-end QoS requirement for each PINE over PIN indirect communication and over PIN-DN communication includes a) the QoS requirement in the 3GPP access network; and b) the QoS requirement in the non-3GPP access network the N3QAI is introduced to enable a PEGC to perform the QoS differentiation for the PINEs in the non-3GPP access network if the UE supports receiving"
    },
    {
        "chunk_id": "chunk_82",
        "chunk_content": "QoS requirement in the non-3GPP access network the N3QAI is introduced to enable a PEGC to perform the QoS differentiation for the PINEs in the non-3GPP access network if the UE supports receiving the N3QAI the network may provide the N3QAI associated with the QoS flow during the PDU session establishment procedure as defined in subclause 6.4.1 or during the PDU session modification procedure as defined in subclause 6.4.2 NOTE 2 how the PEGC applies N3QAI is outside the scope of the present document the non-3GPP delay budget refers to the delay budget between the PEGC and the PINE in the non-3GPP access network if the UE supports providing the non-3GPP delay budget the UE may provide the network with the non-3GPP delay budget for the one or more QoS flows associated with the PDU sessions for a PIN during the PDU session modification procedure as defined in subclause 6.4.2 the network takes into account the received non-3GPP delay budget to ensure the end-to-end QoS requirement of a"
    },
    {
        "chunk_id": "chunk_83",
        "chunk_content": "for a PIN during the PDU session modification procedure as defined in subclause 6.4.2 the network takes into account the received non-3GPP delay budget to ensure the end-to-end QoS requirement of a PINE NOTE 3 the support of a 5G-RG or a FN-RG acting as a PEGC is not specified in this release of specification NOTE 4 the support of redundant PDU sessions does not apply for PIN"
    },
    {
        "chunk_id": "chunk_84",
        "chunk_content": "a 5GS can support a MBSR-UE and a UE accessing to MBSR (see subclause 5.35A of 3GPP TS 23.501 [8]) this subclause describes NAS-specific aspects of the 5GS features to support the authorization of the MBSR-UE and the control of the UE access via MBSR the AMF authorizes the UE's request to act as a MBSR based on the subscription information the AMF can indicate to the MBSR-UE that it is allowed or not allowed to operate as MBSR during registration procedure as specified in subclause 5.5.1.2 enhanced CAG information can be used for the control of UE's access via MBSR CAG identifier is used to control the access of UE via MBSR the 5GCN supports the UE access control based on the PLMND ID and CAG identifier broadcast by the MBSR and the CAG-ID authorized based on \"Allowed CAG list\" in the PLMN's entry of \"CAG information list\" stored in the UE time validity information can be provided to the UE together with the CAG identifier for accessing to MBSR in order to control that UE not"
    },
    {
        "chunk_id": "chunk_85",
        "chunk_content": "the PLMN's entry of \"CAG information list\" stored in the UE time validity information can be provided to the UE together with the CAG identifier for accessing to MBSR in order to control that UE not accessing the MBSR cell outside of the time validity information for the UE not supporting CAG functionality the 5GCN can control the access of the UE with managing the forbidden tracking area"
    },
    {
        "chunk_id": "chunk_86",
        "chunk_content": "Editor's note (WI:VMR_Ph2 CR:6452) further details on control of the UE access via MWAB is FFS"
    },
    {
        "chunk_id": "chunk_87",
        "chunk_content": "the following abnormal cases can be identified a) NOTIFICATION message received via non-3GPP access with access type indicating 3GPP access when UE-initiated 5GMM specific procedure or service request procedure over 3GPP access is ongoing the UE shall proceed with 5GMM specific procedure or service request procedure if for registration procedure and service requestprocedure lower layers indicate that the access attempt is barred then the UE shall handle the pending NOTIFICATION message as specified in subclause 5.6.3.2 otherwise the UE shall ignore the NOTIFICATION message once lower layers confirms the establishment of the signalling connection x) NOTIFICATION message received via non-3GPP access with access type indicating 3GPP access when the unavailability period is activated in the UE or the UE is about to activate unavailability period the UE shall respond with NOTIFICATION RESPONSE message over non-3GPP access indicating inability of the UE to initiate a service request"
    },
    {
        "chunk_id": "chunk_88",
        "chunk_content": "the UE or the UE is about to activate unavailability period the UE shall respond with NOTIFICATION RESPONSE message over non-3GPP access indicating inability of the UE to initiate a service request procedure or a registration procedure over 3GPP access"
    },
    {
        "chunk_id": "chunk_89",
        "chunk_content": "coordination between 5GMM and GMM states is not required regardless whether the UE is operating in single-registration mode or dual-registration mode a) if the UE considers the SIM/USIM invalid for any of 3GPP access in N1 mode S1 mode A/Gb mode or iu mode then it considers the SIM/USIM invalid for all of them; and b) if the UE considers the USIM invalid for 5GS services for any of 3GPP access in N1 mode S1 mode A/Gb mode or iu mode then it considers the USIM invalid for 5GS services for all of them"
    },
    {
        "chunk_id": "chunk_90",
        "chunk_content": "5.2.3.2.1 NORMAL-SERVICE the UE a) shall initiate the mobility or the registration procedure for periodic registration update (according to conditions given in subclause 5.5.1.3.2) except that the registration procedure for periodic registration update shall not be initiated over non-3GPP access; b) shall initiate the service request procedure (according to conditions given in subclause 5.6.1); c) shall respond to paging; NOTE 1 paging is not supported over non-3GPP access NOTE 2 as an implementation option the MUSIM UE is allowed to not respond to paging based on the information available in the paging message e.g voice service indication d) if configured for ecall only mode as specified in 3GPP TS 31.102 [22] shall perform the ecall inactivity procedure at expiry of timer T3444 or timer T3445 (see subclause 5.5.3); e) shall initiate a registration procedure for mobility and periodic registration update on the expiry of timer T3511; and f) if acting as a 5G ProSe UE-to-network relay"
    },
    {
        "chunk_id": "chunk_91",
        "chunk_content": "T3445 (see subclause 5.5.3); e) shall initiate a registration procedure for mobility and periodic registration update on the expiry of timer T3511; and f) if acting as a 5G ProSe UE-to-network relay UE as specified in 3GPP 24.554 [19E] shall initiate the authentication and key agreement procedure (according to the conditions given in subclause 5.5.4) 5.2.3.2.2 NON-ALLOWED-SERVICE the UE shall behave as specified in subclause 5.3.5 the UE in 5GMM-REGISTERED.NON-ALLOWED-SERVICE substate if configured for ecall only mode as specified in 3GPP TS 31.102 [22] shall perform the ecall inactivity procedure at expiry of timer T3444 or timer T3445 (see subclause 5.5.3) 5.2.3.2.3 ATTEMPTING-REGISTRATION-UPDATE the UE in 3GPP access a) shall not send any user data; b) shall initiate a registration procedure for mobility and periodic registration update on the expiry of timers T3502 T3511 T3346 or discontinuous coverage maximum time offset timer; c) shall initiate a registration procedure for"
    },
    {
        "chunk_id": "chunk_92",
        "chunk_content": "procedure for mobility and periodic registration update on the expiry of timers T3502 T3511 T3346 or discontinuous coverage maximum time offset timer; c) shall initiate a registration procedure for mobility and periodic registration update when entering a new PLMN or SNPN if timer T3346 is running and the new PLMN or SNPN is not equivalent to the PLMN or SNPN where the UE started timer T3346 the PLMN identity of the new cell is not in the forbidden PLMN lists and the current TAI is not in one of the lists of 5GS forbidden tracking areas; d) shall initiate a registration procedure for mobility and periodic registration update when the current TAI has changed if timer T3346 is not running and 1) the PLMN identity of the new cell is not in one of the forbidden PLMN lists; 2) the SNPN is not an SNPN selected for localized services in SNPN (see 3GPP TS 23.122 [5]) the UE is not registered for onboarding services in SNPN and the SNPN identity of the new cell is in neither the \"permanently"
    },
    {
        "chunk_id": "chunk_93",
        "chunk_content": "an SNPN selected for localized services in SNPN (see 3GPP TS 23.122 [5]) the UE is not registered for onboarding services in SNPN and the SNPN identity of the new cell is in neither the \"permanently forbidden SNPNs\" list nor the \"temporarily forbidden SNPNs\" list which are if the UE supports access to an SNPN using credentials from a credentials holder equivalent SNPNs or both associated with the selected entry of the \"list of subscriber data\" or the selected PLMN subscription; 3) the SNPN is an SNPN selected for localized services in SNPN (see 3GPP TS 23.122 [5]) and the SNPN identity of the new cell is in neither the \"permanently forbidden SNPNs for access for localized services in SNPN\" list nor the \"temporarily forbidden SNPNs for access for localized services in SNPN\" list associated with the selected entry of the \"list of subscriber data\" or the selected PLMN subscription; or 4) the UE is registered for onboarding services in SNPN and the SNPN identity of the cell is in neither"
    },
    {
        "chunk_id": "chunk_94",
        "chunk_content": "with the selected entry of the \"list of subscriber data\" or the selected PLMN subscription; or 4) the UE is registered for onboarding services in SNPN and the SNPN identity of the cell is in neither the \"permanently forbidden SNPNs for onboarding services in SNPN\" list nor the \"temporarily forbidden SNPNs for onboarding services in SNPN\" list; and the current TAI is not in one of the lists of 5GS forbidden tracking areas; e) may initiate a registration procedure for mobility and periodic registration update upon request of the upper layers to establish an emergency PDU session or perform emergency service fallback; e1) may initiate a registration procedure for mobility and periodic registration update upon request of the upper layers to establish a PDU session even if timer T3502 T3346 or T3447 is running if the UE is a UE configured for high priority access in the selected PLMN; e2) may initiate a registration procedure for mobility and periodic registration update upon request of"
    },
    {
        "chunk_id": "chunk_95",
        "chunk_content": "or T3447 is running if the UE is a UE configured for high priority access in the selected PLMN; e2) may initiate a registration procedure for mobility and periodic registration update upon request of the upper layers to establish a PDU session even if timer T3502 T3346 is running if the UE is a UE configured for high priority access in selected SNPN; f) may perform de-registration locally and initiate a registration procedure for initial registration for emergency services even if timer T3346 is running; g) shall initiate registration procedure for mobility and periodic registration update upon reception of paging or upon reception of NOTIFICATION message with access type indicating 3GPP access; NOTE as an implementation option the MUSIM UE is allowed to not respond to paging based on the information available in the paging message e.g voice service indication h) may initiate a registration procedure for mobility and periodic registration update upon request for an MMTEL voice call"
    },
    {
        "chunk_id": "chunk_96",
        "chunk_content": "information available in the paging message e.g voice service indication h) may initiate a registration procedure for mobility and periodic registration update upon request for an MMTEL voice call MMTEL video call or an MO IMS registration related signalling from the upper layers and none of the following conditions is met 1) timer T3346 is running; 2) the UE has stored a list of \"non-allowed tracking areas\" and the current TAI is in the list of \"non-allowed tracking areas\"; or 3) the UE has stored a list of \"allowed tracking areas\" the UE is camped on a cell which is in the registration area and the current TAI is not in the list of \"allowed tracking areas\"; i) shall initiate a registration procedure for mobility and periodic registration update if the 5GS update status is set to 5U2 NOT UPDATED and timers T3511 T3502 and T3346 are not running; j) if configured for ecall only mode as specified in 3GPP TS 31.102 [22] shall perform the ecall inactivity procedure at expiry of timer"
    },
    {
        "chunk_id": "chunk_97",
        "chunk_content": "NOT UPDATED and timers T3511 T3502 and T3346 are not running; j) if configured for ecall only mode as specified in 3GPP TS 31.102 [22] shall perform the ecall inactivity procedure at expiry of timer T3444 or timer T3445 (see subclause 5.5.3); k) may initiate a registration procedure for mobility and periodic registration update for UE in NB-N1 mode upon receiving a request from upper layers to transmit user data related to an exceptional event and the UE is allowed to use exception data reporting (see the ExceptionDataReportingAllowed leaf of the NAS configuration MO in 3GPP TS 24.368 [17]) or the USIM file EFNASCONFIG in 3GPP TS 31.102 [22]) if timer T3346 is not already running for \"MO exception data\" and even if timer T3502 or timer T3511 is running; l) may initiate the signalling for the de-registration procedure with De-registration type IE indicating \"normal de-registration\" only if the current TAI is part of the TAI list; m) shall initiate a registration procedure for mobility"
    },
    {
        "chunk_id": "chunk_98",
        "chunk_content": "the de-registration procedure with De-registration type IE indicating \"normal de-registration\" only if the current TAI is part of the TAI list; m) shall initiate a registration procedure for mobility and periodic registration update if the UE supports the reconnection to the network due to RAN timing synchronization status change and receives an indication of a change in the RAN timing synchronization status even if timer T3502 is running n) may initiate the signalling for the de-registration procedure with de-registration type \"switch off\" the UE in non-3GPP access a) shall not send any user data; b) shall initiate the registration procedure for mobility and periodic registration update on the expiry of timers T3502 T3511 or T3346; c) may initiate a registration procedure for mobility registration update upon request of the upper layers to establish an emergency PDU session; c1) may initiate a registration procedure for mobility and periodic registration update upon request of the"
    },
    {
        "chunk_id": "chunk_99",
        "chunk_content": "registration update upon request of the upper layers to establish an emergency PDU session; c1) may initiate a registration procedure for mobility and periodic registration update upon request of the upper layers to establish a PDU session if the UE is a UE configured for high priority access in selected PLMN even if timer T3346 or T3502 is running; d) may perform de-registration locally and initiate a registration procedure for initial registration for emergency services even if timer T3346 is running; e) may initiate a registration procedure for mobility and periodic registration update upon request for an MMTEL voice call MMTEL video call or an MO IMS registration related signalling from the upper layers if timer T3346 is not running; f) shall initiate a registration procedure for mobility and periodic registration update if the 5GS update status is set to 5U2 NOT UPDATED and timers T3511 T3502 and T3346 are not running; and g) shall not initiate the signalling for the"
    },
    {
        "chunk_id": "chunk_100",
        "chunk_content": "for mobility and periodic registration update if the 5GS update status is set to 5U2 NOT UPDATED and timers T3511 T3502 and T3346 are not running; and g) shall not initiate the signalling for the de-registration procedure unless timer T3346 is running 5.2.3.2.4 LIMITED-SERVICE the UE a) shall perform cell selection/reselection; b) may perform de-registration locally and initiate an initial registration for emergency services; and c) if configured for ecall only mode as specified in 3GPP TS 31.102 [22] shall perform the ecall inactivity procedure at expiry of timer T3444 or timer T3445 (see subclause 5.5.3) 5.2.3.2.5 PLMN-SEARCH the UE shall perform PLMN selection or SNPN selection if a new PLMN is selected the UE shall reset the registration attempt counter and initiate a registration procedure for mobility and periodic registration update (see subclause 5.5.1.3) if a new SNPN is selected the UE shall reset the registration attempt counter and initiate a mobility registration update"
    },
    {
        "chunk_id": "chunk_101",
        "chunk_content": "for mobility and periodic registration update (see subclause 5.5.1.3) if a new SNPN is selected the UE shall reset the registration attempt counter and initiate a mobility registration update if the UE supports access to an SNPN using credentials from a credentials holder or when the SNPNs are equivalent SNPNs or both (see subclause 4.14.2) and the last registered SNPN and the newly selected SNPN are both identified by globally-unique SNPN identities otherwise the UE may perform de-registration locally and shall initiate a registration procedure for initial registration (see subclause 5.5.1.2.2).If the selected cell in the new PLMN is known not to be able to provide normal service the UE may perform de-registration locally and initiate an initial registration for emergency services 5.2.3.2.6 NO-CELL-AVAILABLE the UE shall perform cell selection and choose an appropriate substate when a cell is found 5.2.3.2.7 UPDATE-NEEDED the UE a) shall not send any user data; b) shall not send"
    },
    {
        "chunk_id": "chunk_102",
        "chunk_content": "NO-CELL-AVAILABLE the UE shall perform cell selection and choose an appropriate substate when a cell is found 5.2.3.2.7 UPDATE-NEEDED the UE a) shall not send any user data; b) shall not send signalling information unless it is a service request as a response to paging or to initiate signalling for emergency services or emergency services fallback; c) shall perform cell selection/reselection; d) shall enter the appropriate new substate as soon as the lower layers indicate that the barring is alleviated for the access category with which the access attempt for the registration procedure for mobility and periodic registration update was associated and if still needed start the registration procedure for mobility and periodic registration update or the signalling for the de-registration procedure (see subclauses 5.5.1.3.7 item l and 5.5.2.2.6 item b); and e) if configured for ecall only mode as specified in 3GPP TS 31.102 [22] shall perform the ecall inactivity procedure at expiry of"
    },
    {
        "chunk_id": "chunk_103",
        "chunk_content": "(see subclauses 5.5.1.3.7 item l and 5.5.2.2.6 item b); and e) if configured for ecall only mode as specified in 3GPP TS 31.102 [22] shall perform the ecall inactivity procedure at expiry of timer T3444 or T3445 (see subclause 5.5.3)"
    },
    {
        "chunk_id": "chunk_104",
        "chunk_content": "if the UE and network support unavailability period and an event is triggered in the UE making the UE unavailable for a certain period of time and the unavailability is not due to discontinuous coverage the UE may store its 5GMM and 5GSM context in USIM or non-volatile memory in the ME to be able to reuse it after the unavailability period NOTE 1 how and where the UE stores its contexts depends upon the UE implementation the UE can store some or all of its contexts in the ME or USIM using existing ME or USIM functionality to activate the unavailability period either the UE provides unavailability information including a type of unavailability an unavailability period duration if known and the start of the unavailability period if known during the registration procedure or the UE provides unavailability information including the type of unavailability and the unavailability period duration if known during the de-registration procedure (see 3GPP TS 23.501 [8] and 3GPP TS 23.502 [9]) the"
    },
    {
        "chunk_id": "chunk_105",
        "chunk_content": "information including the type of unavailability and the unavailability period duration if known during the de-registration procedure (see 3GPP TS 23.501 [8] and 3GPP TS 23.502 [9]) the support for the unavailability period is negotiated in the registration procedure if the UE is registered to a PLMN via a satellite NG-RAN cell the AMF may for discontinuous coverage provide the unavailability period duration of the UE the start of the unavailability period or both to the UE during the registration procedure the AMF may consider the unavailability period duration provided by the UE if available and determine the unavailability period duration of the UE as described in subclause 5.5.1.2.4 and 5.5.1.3.4 the AMF may also consider the start of the unavailability period provided by the UE if available and determine the start of the unavailability period of the UE as described in subclause 5.5.1.3.4 if the UE provided unavailability information in the last registration procedure for mobility"
    },
    {
        "chunk_id": "chunk_106",
        "chunk_content": "and determine the start of the unavailability period of the UE as described in subclause 5.5.1.3.4 if the UE provided unavailability information in the last registration procedure for mobility registration or the de-registration procedure the AMF considers the UE unreachable until the UE registers for a normal service if the UE did not include a start of the unavailability period the AMF shall consider the start of the unavailability period to be the time at which AMF received the REGISTRATION REQUEST message or the DEREGISTRATION REQUEST message from the UE during the registration procedure the AMF may determine the values of the negotiated extended DRX parameters the timer T3324 and the periodic registration update timer (T3512) to be provided to the UE based on the discontinuous coverage maximum time offset the unavailability period duration and the start of the unavailability period based on their availability the AMF should set the value of the mobile reachable timer and implicit"
    },
    {
        "chunk_id": "chunk_107",
        "chunk_content": "maximum time offset the unavailability period duration and the start of the unavailability period based on their availability the AMF should set the value of the mobile reachable timer and implicit de-registration timer based on the unavailability period duration and the start of the unavailability period the AMF releases the N1 signalling connection after the completion of the registration procedure in which the UE provided unavailability information without providing the start of the unavailability period NOTE 2 if the UE supports MUSIM and the UE is registered with the support of unavailability period then the UE can indicate a different unavailability periods to each registered network NOTE 3 the AMF sets the value of the mobile reachable timer longer than the unavailability period duration if for discontinuous coverage the UE has stored a discontinuous coverage maximum time offset as described in subclause 5.4.4.3 5.5.1.2.4 and 5.5.1.3.4 the UE shall set the discontinuous"
    },
    {
        "chunk_id": "chunk_108",
        "chunk_content": "duration if for discontinuous coverage the UE has stored a discontinuous coverage maximum time offset as described in subclause 5.4.4.3 5.5.1.2.4 and 5.5.1.3.4 the UE shall set the discontinuous coverage maximum time offset value to a random value up to the stored discontinuous coverage maximum time offset for this PLMN and satellite NG-RAN RAT type determine a time point equal to the time when the UE is about to lose satellite coverage minus the discontinuous coverage maximum time offset value and send the REGISTRATION REQUEST message for mobility and periodic registration update to the AMF indicating out of satellite coverage at the determined time point if for discontinuous coverage the UE has stored a discontinuous coverage maximum time offset as described in subclause 5.4.4.3 5.5.1.2.4 and 5.5.1.3.4 upon returning in satellite coverage of a TA in the current registration area after being out of satellite coverage due to discontinuous coverage the UE starts the discontinuous"
    },
    {
        "chunk_id": "chunk_109",
        "chunk_content": "and 5.5.1.3.4 upon returning in satellite coverage of a TA in the current registration area after being out of satellite coverage due to discontinuous coverage the UE starts the discontinuous coverage maximum time offset timer to a random value up to the stored discontinuous coverage maximum time offset value if available for this PLMN and NR satellite access and starts the discontinuous coverage maximum time offset timer the UE shall enter 5GMM-REGISTERED.ATTEMPTING-REGISTRATION-UPDATE state and shall not initiate any NAS signalling on that NR satellite access and PLMN while the discontinuous coverage maximum time offset timer is running the UE shall stop the discontinuous coverage maximum time offset timer and initiate NAS signalling if the UE a) receives paging message receives a NOTIFICATION message over non-3GPP access as described in case b) subclause 5.6.3.1; b) has pending emergency services; c) is establishing an emergency PDU session; d) is performing emergency services"
    },
    {
        "chunk_id": "chunk_110",
        "chunk_content": "message over non-3GPP access as described in case b) subclause 5.6.3.1; b) has pending emergency services; c) is establishing an emergency PDU session; d) is performing emergency services fallback procedure; e) enters a TAI outside the registration area; f) is a MUSIM UE and needs to request a new 5G-GUTI assignment as specified in subclause 5.5.1.3.2; g) is allowed to use exception data reporting (see the ExceptionDataReportingAllowed leaf of the NAS configuration MO in 3GPP TS 24.368 [17] or the USIM file EFNASCONFIG in 3GPP TS 31.102 [22]) and the UE has to transmit user data related to an exceptional event; or h) is a UE configured for high priority access in selected PLMN at expiry of the discontinuous coverage maximum time offset timer if the EUPR bit of the unavailability configuration IE in the last REGISTRATION ACCEPT message was set to \"UE needs to report end of unavailability period\" the UE shall perform a registration procedure for mobility registration update if the AMF"
    },
    {
        "chunk_id": "chunk_111",
        "chunk_content": "IE in the last REGISTRATION ACCEPT message was set to \"UE needs to report end of unavailability period\" the UE shall perform a registration procedure for mobility registration update if the AMF sets the EUPR bit value in the unavailability configuration IE to \"UE does not need to report end of unavailability period\" then upon returning to a TA in the current registration area the UE shall choose an appropriate substate of 5GMM-REGISTERED and the UE is not required to trigger the registration procedure for mobility registration update when the unavailability period duration has ended if the AMF does not provide the unavailability configuration IE or the AMF sets the EUPR bit value in the unavailability configuration IE to \"UE needs to report end of unavailability period\" when the unavailability period duration has ended and the UE returns in satellite coverage of a TA in the current registration area after being out of satellite coverage due to discontinuous coverage the UE shall"
    },
    {
        "chunk_id": "chunk_112",
        "chunk_content": "period duration has ended and the UE returns in satellite coverage of a TA in the current registration area after being out of satellite coverage due to discontinuous coverage the UE shall trigger registration procedure for mobility registration update and the discontinuous coverage maximum time offset timer has expired if any when the unavailability period is activated all NAS timers are stopped and associated procedures aborted except for timers T3512 T3324 T3346 T3444 T3445 T3447 T3448 T3396 T3526 T3584 T3585 T3587 any back-off timers T3245 T3247 the timer t controlling the periodic search for HPLMN or EHPLMN or higher prioritized PLMNs the timer TSENSE controlling the periodic search for PLMNs satisfying the operator controlled signal level threshold the timer TF the timer TG the timer TS (see 3GPP TS 23.122 [5]) the timer TNSU and the timer instance associated with the entry in the list of \"PLMNs not allowed to operate at the present UE location\" slice deregistration inactivity"
    },
    {
        "chunk_id": "chunk_113",
        "chunk_content": "TS (see 3GPP TS 23.122 [5]) the timer TNSU and the timer instance associated with the entry in the list of \"PLMNs not allowed to operate at the present UE location\" slice deregistration inactivity timer when the UE activates the unavailability period using registration procedure the UE shall reset the registration attempt counter and service request attempt counter when the UE activates the unavailability period using registration procedure without providing the start of the unavailability period then after successful completion of the procedure the UE shall enter the state 5GMM-REGISTERED.NO-CELL-AVAILABLE and may deactivate AS layer otherwise if the UE provided the start of unavailability period in the registration procedure the UE shall enter the state 5GMM-REGISTERED.NO-CELL-AVAILABLE and may deactivate AS layer only after the UE activates the unavailability period when the UE activates the unavailability period using the de-registration procedure then after successful completion"
    },
    {
        "chunk_id": "chunk_114",
        "chunk_content": "and may deactivate AS layer only after the UE activates the unavailability period when the UE activates the unavailability period using the de-registration procedure then after successful completion of the procedure the UE shall enter the state 5GMM-DEREGISTERED.NO-CELL-AVAILABLE and deactivate the AS layer when the UE comes out of the unavailability period the UE shall activate the AS layer if deactivated and perform registration procedure as described in subclause 5.5.1.2.2 and 5.5.1.3.2"
    },
    {
        "chunk_id": "chunk_115",
        "chunk_content": "5.4.7.3.1 network slice-specific EAP result message transport procedure initiation in order to initiate the network slice-specific EAP result message transport procedure the AMF shall create a NETWORK SLICE-SPECIFIC AUTHENTICATION RESULT message the AMF shall set the EAP message IE of the NETWORK SLICE-SPECIFIC AUTHENTICATION RESULT message to the EAP-success or EAP-failure message provided by the AAA-S via the NSSAAF the AMF shall set the S-NSSAI IE of the NETWORK SLICE-SPECIFIC AUTHENTICATION RESULT message to the HPLMN S-NSSAI or the SNPN S-NSSAI to which the EAP-success or EAP-failure message is related the AMF shall send the NETWORK SLICE-SPECIFIC AUTHENTICATION RESULT message the AMF shall retain the authentication result for the UE and the HPLMN S-NSSAI or the SNPN S-NSSAI while the UE is registered to the PLMN (see subclause 5.15.10 in 3GPP TS 23.501 [8]) upon receipt of a NETWORK SLICE-SPECIFIC AUTHENTICATION RESULT message the UE shall pass a) the EAP-success or EAP-failure"
    },
    {
        "chunk_id": "chunk_116",
        "chunk_content": "UE is registered to the PLMN (see subclause 5.15.10 in 3GPP TS 23.501 [8]) upon receipt of a NETWORK SLICE-SPECIFIC AUTHENTICATION RESULT message the UE shall pass a) the EAP-success or EAP-failure message received in the EAP message IE; and b) the HPLMN S-NSSAI or the SNPN S-NSSAI in the S-NSSAI IE; to the upper layers apart from this action the network slice-specific authentication and authorization procedure is transparent to the 5GMM layer of the UE"
    },
    {
        "chunk_id": "chunk_117",
        "chunk_content": "the following abnormal cases on the network side can be identified a) lower layer failure before the RELAY KEY AUTHENTICATION RESPONSE message is received the network shall abort the authentication and key agreement procedure for 5G ProSe UE-to-network relay or 5G ProSe UE-to-UE relay b) collision between the authentication and key agreement procedure for 5G ProSe UE-to-network relay or 5G ProSe UE-to-UE relay and de-registration procedure the network shall abort the authentication and key agreement procedure for 5G ProSe UE-to-network relay or 5G ProSe UE-to-UE relay and proceed with the UE-initiated de-registration procedure c) collision between the authentication and key agreement procedure for 5G ProSe UE-to-network relay or 5G ProSe UE-to-UE relay and other 5GMM procedures other than in item b the network shall progress both procedures"
    },
    {
        "chunk_id": "chunk_118",
        "chunk_content": "the following abnormal cases have been identified a) collision of network-requested PDU session release procedure and remote UE report procedure if the SMF receives a REMOTE UE REPORT message during a network-requested PDU session release procedure and the PDU session indicated in the PDU SESSION RELEASE COMMAND message is the PDU session ID that is in the REMOTE UE REPORT message the SMF shall abort the remote UE report procedure and proceed with the network-requested PDU session release procedure b) PDU session inactive for the received PDU session identity if the PDU session ID in the REMOTE UE REPORT message belongs to any PDU session in state PDU SESSION INACTIVE in the SMF the SMF shall send the 5GSM STATUS message to the UE with the 5GSM cause #43 \"Invalid PDU session identity\""
    },
    {
        "chunk_id": "chunk_119",
        "chunk_content": "when the UE establishes a new PDN connection via an ePDG connected to EPC to enable the transfer of the PDN connection to N1 mode in case of inter-system change the UE allocates a PDU session identity and indicates its value in the PDU session ID field in the N1_MODE_CAPABILITY notify payload of the IKE_AUTH request message (see 3GPP TS 24.302 [16]) the network provides the UE with an S-NSSAI in the N1_MODE_INFORMATION notify payload of the IKE_AUTH response message (see 3GPP TS 24.302 [16]) upon inter-system change to N1 mode for PDN connection(s) established via an ePDG connected to EPC if present the UE may a) keep some or all of these PDN connections still via ePDG connected to EPC if supported; b) release some or all of these PDN connections explicitly by initiating the UE initiated tunnel disconnection procedure(s) as specified in 3GPP TS 24.302 [16]; or c) attempt to transfer some or all of these PDN connections to N1 mode using the parameters of the PDN connection for which"
    },
    {
        "chunk_id": "chunk_120",
        "chunk_content": "tunnel disconnection procedure(s) as specified in 3GPP TS 24.302 [16]; or c) attempt to transfer some or all of these PDN connections to N1 mode using the parameters of the PDN connection for which the UE has allocated a PDU session identity by initiating the PDU session establishment procedure(s) with the PDU SESSION ESTABLISHMENT REQUEST message created in that case for each and every PDN connection to be transferred 1) if the PDN connection is for emergency bearer services the request type shall be set to \"existing emergency PDU session\" otherwise the request type shall be set to \"existing PDU session\"; 2) if the previously allocated home address information for a PDN connection consists of an IPv4 address only for an ePDG connected to EPC according to 3GPP TS 24.302 [16] the PDU session type shall be set to \"IPv4\"; 3) if the previously allocated home address information for a PDN connection consists of an IPv6 prefix only for an ePDG connected to EPC according to 3GPP TS 24.302"
    },
    {
        "chunk_id": "chunk_121",
        "chunk_content": "type shall be set to \"IPv4\"; 3) if the previously allocated home address information for a PDN connection consists of an IPv6 prefix only for an ePDG connected to EPC according to 3GPP TS 24.302 [16] the PDU session type shall be set to \"IPv6\"; 4) if the previously allocated home address information for a PDN connection consists of both an IPv4 address and an IPv6 prefix for an ePDG connected to EPC according to 3GPP TS 24.302 [16] the PDU session type shall be set to \"IPv4v6\"; 5) the APN of the PDN connection shall be mapped to the DNN of the PDU session; 6) the PDU session ID shall be set to the PDU session identity in the N1_MODE_CAPABILITY notify payload of the IKE_AUTH request message establishing IPsec tunnel of the PDN connection; 7) if the PDN connection is not for emergency bearer services the S-NSSAI of the PDU session shall be set to the S-NSSAI associated with the PDN connection as specified in 3GPP TS 24.302 [16] the UE shall not request to perform handover of an existing"
    },
    {
        "chunk_id": "chunk_122",
        "chunk_content": "services the S-NSSAI of the PDU session shall be set to the S-NSSAI associated with the PDN connection as specified in 3GPP TS 24.302 [16] the UE shall not request to perform handover of an existing PDN connection to N1 mode if the associated S-NSSAI is not included in the allowed NSSAI for 3GPP access; and 8) the SSC mode IE shall be set to \"SSC mode 1\" if an existing PDU session is transferred from 3GPP access to an ePDG connected to EPC connection and that existing PDU session is associated with one or more MBS sessions the UE shall locally leave the associated multicast MBS sessions and the SMF shall consider the UE as removed from the associated multicast MBS sessions upon inter-system change to N1 mode for the PDN connection(s) via an ePDG connected to EPC transferred to the 5GS if the UE supports reporting of URSP rule enforcement and is indicated to send URSP rule enforcement report to the network based on the matching URSP rule newly enforced while the PDN connection is via"
    },
    {
        "chunk_id": "chunk_123",
        "chunk_content": "the UE supports reporting of URSP rule enforcement and is indicated to send URSP rule enforcement report to the network based on the matching URSP rule newly enforced while the PDN connection is via an ePDG connected to EPC which contains the URSP rule enforcement report indication set to \"URSP rule enforcement report is required\" the UE shall include the URSP rule enforcement reports IE in the PDU SESSION ESTABLISHMENT REQUEST message"
    },
    {
        "chunk_id": "chunk_124",
        "chunk_content": "if the network supports PDU set handling (see subclause 5.37.5 of 3GPP TS 23.501 [8]) based on operator policy the SMF may provide the protocol description for UL PDU set handling in the PDU SESSION ESTABLISHMENT ACCEPT message or the PDU SESSION MODIFICATION COMMAND message to the UE the UE can store the protocol description and may use it to identify PDUs belong to PDU sets for the uplink direction NOTE 1 whether and how to use the protocol description to identify PDUs belonging to a PDU set in the uplink direction is up to UE implementation the use of protocol description does not impact UL user data packet matching in the UE NOTE 2 whether and how to process PDUs belonging to a PDU set in the uplink direction is up to UE implementation NOTE 3 in this release of the specification UL PDU set handling is supported for non-3GPP access"
    },
    {
        "chunk_id": "chunk_125",
        "chunk_content": "the following abnormal cases can be identified a) PDU session inactive for the received PDU session ID if the PDU session ID in the PDU SESSION RELEASE COMMAND message belongs to any PDU session in state PDU SESSION INACTIVE in the UE the UE shall include the 5GSM cause #43 \"Invalid PDU session identity\" in the 5GSM STATUS message and set the PDU session ID to the received PDU session ID in the UL NAS TRANSPORT message as specified in subclause 5.4.5 b) User-plane resources of the MA PDU session on the access indicated in the access type IE not established if the PDU session is an MA PDU session and has user-plane resources established on a single access different from the access indicated in the access type IE the UE shall not diagnose an error further process the release command and consider the user-plane resources of the MA PDU session on the access indicated in the access type IE as successfully released"
    },
    {
        "chunk_id": "chunk_126",
        "chunk_content": "the following abnormal cases can be identified a) PDU session inactive for the received PDU session identity if the PDU session ID in the PDU SESSION RELEASE REQUEST message belongs to any PDU session in state PDU SESSION INACTIVE in the SMF the SMF shall send the PDU SESSION RELEASE REJECT message to the UE with the 5GSM cause #43 \"Invalid PDU session identity\""
    },
    {
        "chunk_id": "chunk_127",
        "chunk_content": "if the SMF receives a 5GSM STATUS message the SMF shall take different actions depending on the received 5GSM cause value #43 invalid PDU session identity the SMF shall abort any ongoing 5GSM procedure related to the PTI or PDU session ID stop any related timer and locally release the PDU session indicated in the 5GSM STATUS message #47 PTI mismatch the SMF shall abort any ongoing 5GSM procedure related to the received PTI value and stop any related timer if the PTI indicated in the 5GSM STATUS message is related to a PDU SESSION ESTABLISHMENT ACCEPT message the SMF shall perform a local release of the PDU session indicated in the PDU SESSION ESTABLISHMENT ACCEPT message #81 invalid PTI value the SMF shall abort any ongoing 5GSM procedure related to the received PTI value and stop any related timer #96 invalid mandatory information the SMF shall abort any ongoing 5GSM procedure related to the PTI or PDU session ID and stop any related timer #97 message type non-existent or not"
    },
    {
        "chunk_id": "chunk_128",
        "chunk_content": "any related timer #96 invalid mandatory information the SMF shall abort any ongoing 5GSM procedure related to the PTI or PDU session ID and stop any related timer #97 message type non-existent or not implemented the SMF shall abort any ongoing 5GSM procedure related to the PTI or PDU session ID and stop any related timer the local actions to be taken by the SMF on receipt of a 5GSM STATUS message with any other 5GSM cause value are implementation dependent"
    },
    {
        "chunk_id": "chunk_129",
        "chunk_content": "when a message with semantically incorrect contents is received the UE shall perform the foreseen reactions of the procedural part of the present document (i.e of clauses 5 6) if however no such reactions are specified the UE shall ignore the message except that it shall return a status message (5GMM STATUS or 5GSM STATUS depending on the EPD) with cause #95 \"semantically incorrect message\" the network should follow the same procedure except that a status message is not normally transmitted"
    },
    {
        "chunk_id": "chunk_130",
        "chunk_content": "the procedures specified in the present document apply to those messages which pass the checks described in this subclause this subclause also specifies procedures for the handling of unknown unforeseen and erroneous protocol data by the receiving entity these procedures are called \"error handling procedures\" but in addition to providing recovery mechanisms for error situations they define a compatibility mechanism for future extensions of the protocols subclauses 7.1 to 7.8 shall be applied in order of precedence detailed error handling procedures in the network are implementation dependent and may vary from PLMN to PLMN however when extensions of this protocol are developed networks are assumed to have the error handling which is indicated in this subclause as mandatory (\"shall\") and that is indicated as strongly recommended (\"should\") also the error handling of the network is only considered as mandatory or strongly recommended when certain thresholds for errors are not reached"
    },
    {
        "chunk_id": "chunk_131",
        "chunk_content": "that is indicated as strongly recommended (\"should\") also the error handling of the network is only considered as mandatory or strongly recommended when certain thresholds for errors are not reached during a dedicated connection for definition of semantical and syntactical errors see 3GPP TS 24.007 [11] subclause 11.4.2"
    },
    {
        "chunk_id": "chunk_132",
        "chunk_content": "the maximum size of a NAS message for NR connected to 5GCN is specified in 3GPP TS 38.323 [29] the maximum size of a NAS message for E-UTRA connected to 5GCN is specified 3GPP TS 36.323 [25] the maximum size of a NAS message for non-3GPP access connected to 5GCN is specified in 3GPP TS 24.502 [18]"
    },
    {
        "chunk_id": "chunk_133",
        "chunk_content": "the following network procedures shall apply for handling an unknown erroneous or unforeseen PDU session identity received in the header of a 5GSM message (specified as the header of a standard L3 message see 3GPP TS 24.007 [11]) a) if the network receives a PDU SESSION MODIFICATION REQUEST message which includes an unassigned or reserved PDU session identity value the network shall respond with a PDU SESSION MODIFICATION REJECT message including 5GSM cause #43 \"invalid PDU session identity\" b) if the network receives PDU SESSION RELEASE REQUEST message which includes an unassigned or reserved PDU session identity value the network shall respond with a PDU SESSION RELEASE REJECT message including 5GSM cause #43 \"invalid PDU session identity\" c) upon receipt of an UL NAS TRANSPORT message the network takes the following actions 1) if the request type IE is set to \"initial request\" or \"initial emergency request\" and the message includes a reserved PDU session identity value the network"
    },
    {
        "chunk_id": "chunk_134",
        "chunk_content": "the network takes the following actions 1) if the request type IE is set to \"initial request\" or \"initial emergency request\" and the message includes a reserved PDU session identity value the network shall respond with a DL NAS TRANSPORT message with 5GMM cause #90 \"payload was not forwarded\"; 2) otherwise if the message includes an unassigned or reserved PDU session identity value the network shall respond with a DL NAS TRANSPORT message with 5GMM cause #90 \"payload was not forwarded\" d) if the network receives a 5GSM message other than those listed in items a) through c) above in which the message includes a reserved PDU session identity value or an assigned value that does not match an existing PDU session the network shall ignore the message the following UE procedures shall apply for handling an unknown erroneous or unforeseen PDU session identity received in the header of a 5GSM message a) if the UE receives a 5GSM message which includes an unassigned or reserved PDU session"
    },
    {
        "chunk_id": "chunk_135",
        "chunk_content": "for handling an unknown erroneous or unforeseen PDU session identity received in the header of a 5GSM message a) if the UE receives a 5GSM message which includes an unassigned or reserved PDU session identity value the UE shall ignore the message b) if the UE receives a 5GSM message which includes a PDU session identity belonging to any PDU session in state PDU SESSION INACTIVE in the UE the UE shall respond with a 5GSM STATUS message including 5GSM cause #43 \"invalid PDU session identity\""
    },
    {
        "chunk_id": "chunk_136",
        "chunk_content": "if UE receives a 5GMM message or 5GSM message with message type not defined for the extended protocol discriminator (EPD) or not implemented by the receiver it shall return a status message (5GMM STATUS or 5GSM STATUS depending on the EPD) with cause #97 \"message type non-existent or not implemented\" if the network receives a 5GMM or 5GSM message with message type not defined for the EPD or not implemented by the receiver in a protocol state where reception of an unsolicited message with the given EPD from the UE is not foreseen in the protocol the network actions are implementation dependent otherwise if the network receives a message with message type not defined for the EPD or not implemented by the receiver it shall ignore the message except that it should return a status message (5GMM STATUS or 5GSM STATUS depending on the EPD) with cause #97 \"message type non-existent or not implemented\" NOTE a message type not defined for the EPD in the given direction is regarded by the"
    },
    {
        "chunk_id": "chunk_137",
        "chunk_content": "(5GMM STATUS or 5GSM STATUS depending on the EPD) with cause #97 \"message type non-existent or not implemented\" NOTE a message type not defined for the EPD in the given direction is regarded by the receiver as a message type not defined for the EPD see 3GPP TS 24.007 [11] if the UE receives a message not compatible with the protocol state the UE shall return a status message (5GMM STATUS or 5GSM STATUS depending on the EPD) with cause #98 \"message type not compatible with protocol state\" if the network receives a message not compatible with the protocol state the network actions are implementation dependent"
    },
    {
        "chunk_id": "chunk_138",
        "chunk_content": "the following UE procedures shall apply for handling an error encountered with a mandatory information element in a 5GSM message a) if the message is a PDU SESSION ESTABLISHMENT ACCEPT the UE shall initiate PDU session release procedure by sending a PDU SESSION RELEASE REQUEST message with 5GSM cause #96 \"invalid mandatory information\" b) void c) if the message is a PDU SESSION RELEASE COMMAND a PDU SESSION RELEASE COMPLETE message with 5GSM cause #96 \"invalid mandatory information\" shall be returned the following network procedures shall apply for handling an error encountered with a mandatory information element in a 5GSM message a) if the message is a PDU SESSION ESTABLISHMENT REQUEST a PDU SESSION ESTABLISHMENT REJECT message with 5GSM cause #96 \"invalid mandatory information\" shall be returned b) if the message is a PDU SESSION MODIFICATION REQUEST a PDU SESSION MODIFICATION REJECT message with 5GSM cause #96 \"invalid mandatory information\" shall be returned c) if the message is"
    },
    {
        "chunk_id": "chunk_139",
        "chunk_content": "returned b) if the message is a PDU SESSION MODIFICATION REQUEST a PDU SESSION MODIFICATION REJECT message with 5GSM cause #96 \"invalid mandatory information\" shall be returned c) if the message is a PDU SESSION RELEASE REQUEST a PDU SESSION RELEASE REJECT message with 5GSM cause #96 \"invalid mandatory information\" shall be returned"
    },
    {
        "chunk_id": "chunk_140",
        "chunk_content": "if an information element with format TLV-E is repeated in a type 6 IE container information element in which repetition of the information element is not specified in clause 8 and clause 9 of the present document the UE shall handle only the contents of the information element appearing first and shall ignore all subsequent repetitions of the information element when repetition of information elements in the type 6 IE container information element is specified the UE shall handle only the contents of specified repeated information elements if the limit on repetition of information elements is exceeded the UE shall handle the contents of information elements appearing first up to the limit of repetitions and shall ignore all subsequent repetitions of the information element the network should follow the same procedures"
    },
    {
        "chunk_id": "chunk_141",
        "chunk_content": "when upon receipt of a 5GMM or 5GSM message the UE diagnoses a \"missing conditional IE\" error or an \"unexpected conditional IE\" error for the contents of a type 6 IE container information element or when it receives a 5GMM or 5GSM message with a type 6 IE container information element containing at least one syntactically incorrect conditional IE the UE shall ignore the message and shall return a status message (5GMM STATUS or 5GSM STATUS depending on the EPD) with cause #100 \"conditional IE error\" when the network receives a message and diagnoses a \"missing conditional IE\" error or an \"unexpected conditional IE\" error for the contents of a type 6 IE container information element or when it receives a message with a type 6 IE container information element containing at least one syntactically incorrect conditional IE the network shall either a) try to treat the message (the exact further actions are implementation dependent); or b) ignore the message except that it should return a"
    },
    {
        "chunk_id": "chunk_142",
        "chunk_content": "incorrect conditional IE the network shall either a) try to treat the message (the exact further actions are implementation dependent); or b) ignore the message except that it should return a status message (5GMM STATUS or 5GSM STATUS depending on the EPD) with cause #100 \"conditional IE error\""
    },
    {
        "chunk_id": "chunk_143",
        "chunk_content": "this clause defines the structure of the messages of the layer 3 (L3) protocols defined in the present document these are standard L3 messages as defined in 3GPP TS 24.007 [12] each definition given in the present clause includes a) a brief description of the message direction and use including whether the message has 1 local significance i.e relevant only on the originating or terminating access; 2 access significance i.e relevant in the originating and terminating access but not in the network; 3 dual significance i.e relevant in either the originating or terminating access and in the network; or 4 global significance i.e relevant in the originating and terminating access and in the network b) a table listing the information elements (IE) known in the message and the order of their appearance in the message all IEs that may be repeated are explicitly indicated (The v LV and LV-E formatted IEs which compose the imperative part of the message occur before the t TV TLV and TLV-E"
    },
    {
        "chunk_id": "chunk_144",
        "chunk_content": "appearance in the message all IEs that may be repeated are explicitly indicated (The v LV and LV-E formatted IEs which compose the imperative part of the message occur before the t TV TLV and TLV-E formatted IEs which compose the non-imperative part of the message see 3GPP TS 24.007 [12]) in a (maximal) sequence of consecutive IEs with half octet length the first IE with half octet length occupies bits 1 to 4 of octet n the second IE bits 5 to 8 of octet n the third IE bits 1 to 4 of octet N+1 etc such a sequence always has an even number of elements for each information element the table indicates 1 the information element identifier (IEI) in hexadecimal notation if the IE has format t TV TLV or TLV-E if the IEI has half octet length it is specified by a notation representing the IEI as a hexadecimal digit followed by a \"-\" (example B-) NOTE 1 the same IEI can be used for different information element types in different messages of the same protocol NOTE 2 if a message includes a"
    },
    {
        "chunk_id": "chunk_145",
        "chunk_content": "as a hexadecimal digit followed by a \"-\" (example B-) NOTE 1 the same IEI can be used for different information element types in different messages of the same protocol NOTE 2 if a message includes a type 6 IE container information element then the same IEI can be used for different information element types in the type 6 IE container information element and in other parts of the same message 2 the name of the information element (which may give an idea of the semantics of the element) the name of the information element followed by \"IE\" or \"information element\" is used in this technical report as reference to the information element within a message 3 the name of the type of the information element (which indicates the coding of the value part of the IE) and generally the referenced subclause of clause 9 of the present document describing the value part of the information element 4 the presence requirement indication (M c or O) for the IE as defined in 3GPP TS 24.007 [12] 5 the"
    },
    {
        "chunk_id": "chunk_146",
        "chunk_content": "subclause of clause 9 of the present document describing the value part of the information element 4 the presence requirement indication (M c or O) for the IE as defined in 3GPP TS 24.007 [12] 5 the format of the information element (T v TV LV TLV LV-E or TLV-E) as defined in 3GPP TS 24.007 [12] 6 the length of the information element (or permissible range of lengths) in octets in the message where \"?\" means that the maximum length of the IE is only constrained by link layer protocol this indication is non-normative c) subclauses specifying where appropriate conditions for IEs with presence requirement c or o in the relevant message which together with other conditions specified in the present document define when the information elements shall be included or not what non-presence of such IEs means and \u2013 for IEs with presence requirement c \u2013 the static conditions for presence or non-presence of the IEs or for both cases (see 3GPP TS 24.007 [12])"
    },
    {
        "chunk_id": "chunk_147",
        "chunk_content": "the RELAY AUTHENTICATION RESPONSE message is sent by the UE to the network to forward the authentication response from the 5G ProSe remote UE or the 5G ProSe end UE as specified in 3GPP TS 33.503 [56] see table 8.2.38.1 message type RELAY AUTHENTICATION RESPONSE significance dual direction UE to network table 8.2.38.1 RELAY AUTHENTICATION RESPONSE message content"
    },
    {
        "chunk_id": "chunk_148",
        "chunk_content": "the serving network name (SNN) is used - in the network name field of the AT_KDF_INPUT attribute defined in IETF RFC 5448 [40]; - in KAUSF derivation function as specified in 3GPP TS 33.501 [24] annex A; and - in RES* and XRES* derivation function as specified in 3GPP TS 33.501 [24] annex a SNN shall contain a UTF-8 string without terminating null characters SNN is of maximum length of 1020 octets SNN consists of SNN-service-code and SNN-network-identifier delimited by a colon SNN-network-identifier identifies the serving PLMN or the serving SNPN MCC and MNC in the SNN-PLMN-ID are MCC and MNC of the serving PLMN if the MNC of the serving PLMN has two digits then a zero is added at the beginning MCC and MNC in the SNN-SNPN-ID are MCC and MNC of the serving SNPN if the MNC of the serving SNPN has two digits then a zero is added at the beginning SNN-NID contains an NID in hexadecimal digits ABNF syntax of SNN is specified in table 9.12.1.1 table 9.12.1.1 ABNF syntax of SNN SNN ="
    },
    {
        "chunk_id": "chunk_149",
        "chunk_content": "SNPN has two digits then a zero is added at the beginning SNN-NID contains an NID in hexadecimal digits ABNF syntax of SNN is specified in table 9.12.1.1 table 9.12.1.1 ABNF syntax of SNN SNN = SNN-service-code \":\" SNN-network-identifier SNN-service-code = %x35.47 ; \"5G\" SNN-network-identifier = SNN-PLMN-ID / SNN-SNPN-ID SNN-PLMN-ID = SNN-mnc-string SNN-mnc-digits \".\" SNN-mcc-string SNN-mcc-digits \".\" SNN-3gppnetwork-string \".\" SNN-org-string ; applicable when not operating in SNPN access operation mode SNN-SNPN-ID = SNN-mnc-string SNN-mnc-digits \".\" SNN-mcc-string SNN-mcc-digits \".\" SNN-3gppnetwork-string \".\" SNN-org-string \":\" SNN-NID ; applicable when operating in SNPN access operation mode SNN-mnc-digits = DIGIT DIGIT DIGIT ; MNC of the PLMN ID SNN-mcc-digits = DIGIT DIGIT DIGIT ; MCC of the PLMN ID SNN-mnc-string = %x6d.6e.63 ; \"mnc\" in lower case SNN-mcc-string = %x6d.63.63 ; \"mcc\" in lower case SNN-3gppnetwork-string = %x33.67.70.70.6e.65.74.77.6f.72.6b ; \"3gppnetwork\" in lower"
    },
    {
        "chunk_id": "chunk_150",
        "chunk_content": "of the PLMN ID SNN-mnc-string = %x6d.6e.63 ; \"mnc\" in lower case SNN-mcc-string = %x6d.63.63 ; \"mcc\" in lower case SNN-3gppnetwork-string = %x33.67.70.70.6e.65.74.77.6f.72.6b ; \"3gppnetwork\" in lower case SNN-org-string = %x6f.72.67 ; \"org\" in lower case SNN-NID = 11SNN-hexadecimal-digit ; NID in hexadecimal digits SNN-hexadecimal-digit = DIGIT / %x41 / %x42 / %x43 / %x44 / %x45 / %x46 NOTE SNN-service-code allows for distinguishing of ANID specified in 3GPP TS 24.302 [16] and SNN as either of SNN or ANID can be carried in the AT_KDF_INPUT attribute EXAMPLE 1 in case of a PLMN if PLMN ID contains MCC = 234 and MNC = 15 SNN is 5G:mnc015.mcc234.3gppnetwork.org EXAMPLE 2 in case of an SNPN if SNPN ID contains a PLMN ID of MCC = 234 and MNC = 15 and an NID of 123456ABCDEH SNN is 5G:mnc015.mcc234.3gppnetwork.org:123456ABCDE"
    },
    {
        "chunk_id": "chunk_151",
        "chunk_content": "when a field is contained within a single octet the lowest numbered bit of the field represents the least significant bit when a field extends over more than one octet the order of bit values progressively decreases as the octet number increases in that part of the field contained in a given octet the lowest numbered bit represents the least significant bit the most significant bit of the field is represented by the highest numbered bit of the lowest numbered octet of the field the least significant bit of the field is represented by the lowest numbered bit of the highest numbered octet of the field for example a bit number can be identified as a couple (o b) where o is the octet number and b is the relative bit number within the octet figure 9.1.2.1 illustrates a field that spans from bit (1 3) to bit (2 7) the most significant bit of the field is mapped on bit (1 3) and the least significant bit is mapped on bit (2 7) figure 9.1.2.1 field mapping convention"
    },
    {
        "chunk_id": "chunk_152",
        "chunk_content": "bits 1 to 8 of the first octet of every 5GS NAS message contain the extended protocol discriminator (EPD) IE the EPD and its use are defined in 3GPP TS 24.007 [11] the extended protocol discriminator in the header (see 3GPP TS 24.007 [11]) of a security protected 5GS NAS message is encoded as \"5GS mobility management messages\" \n\nbits 1 to 4 of the second octet of every 5GMM message contain the security header type IE this IE includes control information related to the security protection of a 5GMM message the total size of the security header type IE is 4 bits the security header type IE can take the values shown in table 9.3.1 table 9.3.1 security header type a 5GMM message received with the security header type encoded as 0000 shall be treated as not security protected plain 5GS NAS message a protocol entity sending a not security protected 5GMM message shall send the message as plain 5GS NAS message and encode the security header type as 0000"
    },
    {
        "chunk_id": "chunk_153",
        "chunk_content": "bits 1 to 8 of the second octet of every 5GSM message contain the PDU session identity IE the PDU session identity and its use to identify a message flow are defined in 3GPP TS 24.007 [11] \n\nthis element is used in the description of 5GMM and 5GSM messages when an odd number of half octet type 1 information elements are used this element is filled with spare bits set to zero and is placed in bits 5 to 8 of the octet unless otherwise specified \n\nbits 1 to 8 of the third octet of every 5GSM message contain the procedure transaction identity bits 1 to 8 of the first octet of every UE policy delivery message contain the procedure transaction identity the procedure transaction identity and its use are defined in 3GPP TS 24.007 [11]"
    },
    {
        "chunk_id": "chunk_154",
        "chunk_content": "the message type IE and its use are defined in 3GPP TS 24.007 [11] tables 9.7.1 and 9.7.2 define the value part of the message type IE used in the 5GS mobility management protocol and 5GS session management protocol table 9.7.1 message types for 5GS mobility management table 9.7.2 message types for 5GS session management \n\nthe message authentication code (MAC) information element contains the integrity protection information for the message the MAC IE shall be included in the SECURITY PROTECTED 5GS NAS MESSAGE message if a valid 5G NAS security context exists and security functions are started the message authentication code (MAC) is also included in the intra N1 mode NAS transparent container IE and in the S1 mode to N1 mode NAS transparent container IE the usage of MAC is specified in subclause 4.4.3.3"
    },
    {
        "chunk_id": "chunk_155",
        "chunk_content": "this IE includes a complete plain 5GS NAS message as specified in subclauses 8.2 and 8.3 the SECURITY PROTECTED 5GS NAS MESSAGE (see subclause 8.2.28) includes a complete plain 5GS NAS message as specified in subclauses 8.2 the SECURITY PROTECTED 5GS NAS MESSAGE message (see subclause 8.2.28) is not plain 5GS NAS messages and shall not be included in this IE \n\nthis IE includes the NAS message sequence number (SN) which consists of the eight least significant bits of the NAS COUNT for a SECURITY PROTECTED 5GS NAS MESSAGE message the NAS message sequence number (SN) with the eight least significant bits of the NAS COUNT is also included in the intra N1 mode NAS transparent container IE and in the N1 mode to S1 mode NAS transparent container IE the usage of SN is specified in subclause 4.4.3"
    },
    {
        "chunk_id": "chunk_156",
        "chunk_content": "the purpose of the ECN marking for L4S indication information element is to provide ECN marking for L4S indication to the 5G-RG the ECN marking for L4S indication information element is a type 4 information element with a minimum length of 2 octets the ECN marking for L4S indication information element is coded as shown in figure 9.11.4.40.1 and table 9.11.4.40.1 figure 9.11.4.40.1 ECN marking for L4S indication information element table 9.11.4.40.1 ECN marking for L4S indication information element \n\n\n\n\n\nthe description of timers in the following tables should be considered a brief summary the precise details are found in clauses 4 to 6 which should be considered the definitive descriptions"
    },
    {
        "chunk_id": "chunk_157",
        "chunk_content": "the description of timers in the following tables should be considered a brief summary the precise details are found in clauses 4 to 6 which should be considered the definitive descriptions \n\ntimers of 5GS mobility management are shown in table 10.2.1 and table 10.2.2 NOTE timers T3324 T3346 T3245 and T3247 are defined in 3GPP TS 24.008 [12] timers T3444 T3445 T3447 and T3448 are defined in 3GPP TS 24.301 [15] table 10.2.1 timers of 5GS mobility management \u2013 UE side table 10.2.2 timers of 5GS mobility management \u2013 AMF side"
    },
    {
        "chunk_id": "chunk_158",
        "chunk_content": "timers of 5GS session management are shown in table 10.3.1 and table 10.3.2 NOTE timer T3396 is defined in 3GPP TS 24.008 [12] table 10.3.1 timers of 5GS session management \u2013 UE side NOTE 1 the back-off timer is used to describe a logical model of the required UE behaviour this model does not imply any specific implementation e.g as a timer of timestamp NOTE 2 reference to back-off timer in this section can either refer to use of timer T3396 or to use of a different packet system specific timer within the UE whether the UE uses T3396 as a back-off timer or it uses different packet system specific timers as back-off timers is left up to UE implementation table 10.3.2 timers of 5GS session management \u2013 SMF side"
    },
    {
        "chunk_id": "chunk_159",
        "chunk_content": "annex a (informative) cause values for 5GS mobility management A.1 causes related to UE identification cause #3 \u2013 illegal UE this 5GMM cause is sent to the UE when the network refuses service to the UE either because an identity of the UE is not acceptable to the network or because the UE does not pass the authentication check cause #6 \u2013 illegal ME this 5GMM cause is sent to the UE if the ME used is not acceptable to the network e.g on the prohibited list cause #9 \u2013 UE identity cannot be derived by the network this 5GMM cause is sent to the UE when the network cannot derive the UE's identity from the 5G-GUTI or 5G-S-TMSI because of e.g no matching identity/context in the network failure to validate the UE's identity due to integrity check failure of the received message cause #10 \u2013 implicitly de-registered this 5GMM cause is sent to the UE either if the network has implicitly de-registered the UE e.g after the implicit de-registration timer has expired or if the 5GMM context data"
    },
    {
        "chunk_id": "chunk_160",
        "chunk_content": "de-registered this 5GMM cause is sent to the UE either if the network has implicitly de-registered the UE e.g after the implicit de-registration timer has expired or if the 5GMM context data related to the subscription does not exist in the AMF e.g because of a AMF restart or because of a registration request for mobility or registration update is routed to a new AMF A.2 cause related to subscription options cause #5 \u2013 PEI not accepted this cause is sent to the UE if the network does not accept an initial registration procedure for emergency services using a PEI cause #7 \u2013 5GS services not allowed this 5GMM cause is sent to the UE when it is not allowed to operate 5GS services cause #11 \u2013 PLMN not allowed this 5GMM cause is sent to the UE if it requests service or if the network initiates a de-registration request in a PLMN where the UE by subscription or due to operator determined barring is not allowed to operate this 5GMM cause can also be sent to the UE when the disaster condition"
    },
    {
        "chunk_id": "chunk_161",
        "chunk_content": "a de-registration request in a PLMN where the UE by subscription or due to operator determined barring is not allowed to operate this 5GMM cause can also be sent to the UE when the disaster condition is no longer being applicable in the current location of the UE cause #12 \u2013 tracking area not allowed this 5GMM cause is sent to the UE if it requests service or if the network initiates a de-registration request in a tracking area where the HPLMN or SNPN determines that the UE by subscription is not allowed to operate NOTE 1 if 5GMM cause #12 is sent to a roaming subscriber the subscriber is denied service even if other PLMNs are available on which registration was possible cause #13 \u2013 roaming not allowed in this tracking area this 5GMM cause is sent to a UE which requests service or if the network initiates a de-registration request in a tracking area of a PLMN or SNPN which by subscription offers roaming to that UE but not in that tracking area this 5GMM cause can also be sent to the"
    },
    {
        "chunk_id": "chunk_162",
        "chunk_content": "network initiates a de-registration request in a tracking area of a PLMN or SNPN which by subscription offers roaming to that UE but not in that tracking area this 5GMM cause can also be sent to the UE when the disaster condition is no longer being applicable in the current location of the UE cause #15 \u2013 no suitable cells in tracking area this 5GMM cause is sent to the UE if it requests service or if the network initiates a de-registration request in a tracking area where the UE by subscription is not allowed to operate but when it should find another allowed tracking area in the same PLMN or an equivalent PLMN or the same SNPN or an equivalent SNPN NOTE 2 cause #15 and cause #12 differ in the fact that cause #12 does not trigger the UE to search for another allowed tracking area on the same PLMN or SNPN cause #27 \u2013 N1 mode not allowed this 5GMM cause is sent to the UE if it requests service or if the network initiates a de-registration request in a PLMN or SNPN where the UE by"
    },
    {
        "chunk_id": "chunk_163",
        "chunk_content": "the same PLMN or SNPN cause #27 \u2013 N1 mode not allowed this 5GMM cause is sent to the UE if it requests service or if the network initiates a de-registration request in a PLMN or SNPN where the UE by subscription or operator policy is not allowed to operate in N1 mode cause #31 \u2013 redirection to EPC required this 5GMM cause is sent to the UE if it requests service in a PLMN where the UE by operator policy is not allowed in 5GCN and redirection to EPC is required cause #36 \u2013 IAB-node operation not authorized this 5GMM cause is sent to the UE if a UE operating as an IAB-node requests service or if the network initiates a de-registration procedure in a PLMN or SNPN where the UE by subscription is not authorized for IAB operation cause #72 \u2013 Non-3GPP access to 5GCN not allowed this 5GMM cause is sent to the UE if it requests accessing 5GCN over non-3GPP access in a PLMN or SNPN where the UE by subscription is not allowed to access 5GCN over non-3GPP access cause #74 \u2013 temporarily not"
    },
    {
        "chunk_id": "chunk_164",
        "chunk_content": "is sent to the UE if it requests accessing 5GCN over non-3GPP access in a PLMN or SNPN where the UE by subscription is not allowed to access 5GCN over non-3GPP access cause #74 \u2013 temporarily not authorized for this SNPN this 5GMM cause is sent to the UE if it requests access or if the network initiates a de-registration procedure in a cell belonging to an SNPN for which the UE has no subscription to operate or for which the UE is not allowed to operate onboarding services cause #75 \u2013 permanently not authorized for this SNPN this 5GMM cause is sent to the UE if it requests access or if the network initiates a de-registration procedure in a cell belonging to an SNPN with a globally-unique SNPN identity for which the UE either has no subscription to operate the UE's subscription has expired or the UE is not allowed to operate onboarding services cause #76 \u2013 not authorized for this CAG or authorized for CAG cells only this 5GMM cause is sent to the UE if the UE requests access or"
    },
    {
        "chunk_id": "chunk_165",
        "chunk_content": "expired or the UE is not allowed to operate onboarding services cause #76 \u2013 not authorized for this CAG or authorized for CAG cells only this 5GMM cause is sent to the UE if the UE requests access or de-registration i) in a CAG cell with a CAG-ID which is not authorized based on the UE's \"allowed CAG list\" for the PLMN; or ii) in a non-CAG cell wherein the UE is only allowed to access 5GS via CAG cells cause #77 \u2013 wireline access area not allowed this 5GMM cause is sent to the 5G-RG or the W-AGF acting on behalf of the FN-CRG (or on behalf of the N5GC device) if the 5G-RG or the W-AGF acting on behalf of the FN-CRG (or on behalf of the N5GC device) request accessing 5GCN over a wireline access network belonging to a wireline access area where the 5G-RG or the W-AGF acting on behalf of the FN-CRG (or on behalf of the N5GC device) are not allowed by subscription to access the 5GCN over the wireline access cause #79 \u2013 UAS services not allowed this 5GMM cause is sent to the UE to indicate"
    },
    {
        "chunk_id": "chunk_166",
        "chunk_content": "FN-CRG (or on behalf of the N5GC device) are not allowed by subscription to access the 5GCN over the wireline access cause #79 \u2013 UAS services not allowed this 5GMM cause is sent to the UE to indicate that the request of UAS services is not allowed cause #80 \u2013 disaster roaming for the determined PLMN with disaster condition not allowed this 5GMM cause is sent by the network in a PLMN where the UE has requested registration for disaster roaming service for the determined PLMN with disaster condition but the AMF determines that it does not support providing disaster roaming services to the UE for the determined PLMN with disaster condition as roaming agreement for disaster roaming services with HPLMN of the UE does not exist or the determined PLMN with disaster condition is a forbidden PLMN of the UE cause #94 \u2013 user plane positioning not authorized this 5GMM cause is sent to the UE if it requests the user plane positioning where the UE by subscription is not authorized for user plane"
    },
    {
        "chunk_id": "chunk_167",
        "chunk_content": "of the UE cause #94 \u2013 user plane positioning not authorized this 5GMM cause is sent to the UE if it requests the user plane positioning where the UE by subscription is not authorized for user plane positioning A.3 causes related to PLMN or SNPN specific network failures and congestion/authentication failures cause #20 \u2013 MAC failure this 5GMM cause is sent to the network if the USIM detects that the MAC in the AUTHENTICATION REQUEST message is not fresh cause #21 \u2013 synch failure this 5GMM cause is sent to the network if the USIM detects that the SQN in the AUTHENTICATION REQUEST message is out of range cause #22 \u2013 congestion this 5GMM cause is sent to the UE because of congestion in the network (e.g no channel facility busy/congested etc.) cause #23 \u2013 UE security capabilities mismatch this 5GMM cause is sent to the network if the UE detects that the UE security capability does not match the one sent back by the network cause #24 \u2013 security mode rejected unspecified this 5GMM cause is"
    },
    {
        "chunk_id": "chunk_168",
        "chunk_content": "5GMM cause is sent to the network if the UE detects that the UE security capability does not match the one sent back by the network cause #24 \u2013 security mode rejected unspecified this 5GMM cause is sent to the network if the security mode command is rejected by the UE for unspecified reasons cause #26 \u2013 Non-5G authentication unacceptable this 5GMM cause is sent to the network in N1 mode if the \"separation bit\" in the AMF field of AUTN is set to 0 in the AUTHENTICATION REQUEST message (see 3GPP TS 33.501 [24]) cause #28 \u2013 restricted service area this 5GMM cause is sent to the UE if it requests service in a tracking area of the 3GPP access or in an area of the wireline access which is a part of the UE's non-allowed area or is not a part of the UE's allowed area cause #43 \u2013 LADN not available this 5GMM cause is sent to the UE if the user-plane resources of the PDU session are not established when the UE is located outside the LADN service area cause #62 \u2013 no network slices available this"
    },
    {
        "chunk_id": "chunk_169",
        "chunk_content": "this 5GMM cause is sent to the UE if the user-plane resources of the PDU session are not established when the UE is located outside the LADN service area cause #62 \u2013 no network slices available this 5GMM cause is sent by the network if there are no available network slices allowed for use by the UE NOTE network does not send this cause in REGISTRATION REJECT message if the UE does not include a requested NSSAI in the REGISTRATION REQUEST message in that case if the UE is not registered for onboarding services in SNPN the network uses other causes (e.g #13 #15 etc.) based on the subscription cause #65 \u2013 maximum number of PDU sessions reached this 5GMM cause is used by the network to indicate that the procedure requested by the UE was rejected as the network has reached the maximum number of simultaneously active PDU sessions for the UE cause #67 \u2013 insufficient resources for specific slice and DNN this 5GMM cause is sent by the network to indicate that the requested service cannot be"
    },
    {
        "chunk_id": "chunk_170",
        "chunk_content": "of simultaneously active PDU sessions for the UE cause #67 \u2013 insufficient resources for specific slice and DNN this 5GMM cause is sent by the network to indicate that the requested service cannot be provided due to insufficient resources for specific slice and DNN cause #69 \u2013 insufficient resources for specific slice this 5GMM cause is sent by the network to indicate that the requested service cannot be provided due to insufficient resources for specific slice cause #71 \u2013 ngKSI already in use this 5GMM cause is sent to the network in N1 mode if the ngKSI value received in the AUTHENTICATION REQUEST message is already associated with one of the 5G security contexts stored in the UE cause #73 \u2013 serving network not authorized this 5GMM cause is sent to the UE if the UE initiates registration towards a serving network and the serving network fails to be authorized by the UE's home network cause #78 \u2013PLMN not allowed to operate at the present UE location this 5GMM cause is sent to the UE"
    },
    {
        "chunk_id": "chunk_171",
        "chunk_content": "towards a serving network and the serving network fails to be authorized by the UE's home network cause #78 \u2013PLMN not allowed to operate at the present UE location this 5GMM cause is sent to the UE to indicate that the PLMN is not allowed to operate at the present UE location NOTE this cause is only applicable for satellite NG-RAN access cause #81 \u2013 selected N3IWF is not compatible with the allowed NSSAI this 5GMM cause is sent by the network to indicate that the requested service cannot be provided due to the selected N3IWF is not compatible with the allowed NSSAI cause #82 \u2013 selected TNGF is not compatible with the allowed NSSAI this 5GMM cause is sent by the network to indicate that the requested service cannot be provided due to the selected TNGF is not compatible with the allowed NSSAI cause #90 \u2013 payload was not forwarded this 5GMM cause is sent by the network to indicate that the requested service cannot be provided because payload could not be forwarded by AMF cause #91 \u2013 DNN"
    },
    {
        "chunk_id": "chunk_172",
        "chunk_content": "cause #90 \u2013 payload was not forwarded this 5GMM cause is sent by the network to indicate that the requested service cannot be provided because payload could not be forwarded by AMF cause #91 \u2013 DNN not supported or not subscribed in the slice this 5GMM cause is sent by the network to indicate that the requested service cannot be provided because payload could not be forwarded by AMF because the DNN is not supported or not subscribed in the slice selected by the network if the UE did not indicate a slice or the DNN is not supported or not subscribed in the slice indicated by the UE cause #92 \u2013 insufficient user-plane resources for the PDU session this 5GMM cause is sent by the network to indicate that the requested service cannot be provided due to insufficient user-plane resources for the PDU session cause #93 \u2013 onboarding services terminated this 5GMM cause is sent by the network if the network initiates a de-registration procedure because the onboarding services are terminated A.4"
    },
    {
        "chunk_id": "chunk_173",
        "chunk_content": "PDU session cause #93 \u2013 onboarding services terminated this 5GMM cause is sent by the network if the network initiates a de-registration procedure because the onboarding services are terminated A.4 causes related to invalid messages cause #95 \u2013 semantically incorrect message this 5GMM cause is used to report receipt of a message with semantically incorrect contents cause #96 \u2013 invalid mandatory information this cause 5GMM indicates that the equipment sending this 5GMM cause has received a message with a non-semantical mandatory IE error cause #97 \u2013 message type non-existent or not implemented this 5GMM cause indicates that the equipment sending this 5GMM cause has received a message with a message type it does not recognize either because this is a message not defined or defined but not implemented by the equipment sending this 5GMM cause cause #98 \u2013 message type not compatible with protocol state this 5GMM cause indicates that the equipment sending this 5GMM cause has received a"
    },
    {
        "chunk_id": "chunk_174",
        "chunk_content": "implemented by the equipment sending this 5GMM cause cause #98 \u2013 message type not compatible with protocol state this 5GMM cause indicates that the equipment sending this 5GMM cause has received a message not compatible with the protocol state cause #99 \u2013 information element non-existent or not implemented this 5GMM cause indicates that the equipment sending this 5GMM cause has received a message which includes information elements not recognized because the information element identifier is not defined or it is defined but not implemented by the equipment sending the 5GMM cause however the information element is not required to be present in the message in order for the equipment sending the 5GMM cause to process the message cause #100 \u2013 conditional IE error this 5GMM cause indicates that the equipment sending this cause has received a message with conditional IE errors cause #101 \u2013 message not compatible with protocol state this 5GMM cause indicates that a message has been received"
    },
    {
        "chunk_id": "chunk_175",
        "chunk_content": "the equipment sending this cause has received a message with conditional IE errors cause #101 \u2013 message not compatible with protocol state this 5GMM cause indicates that a message has been received which is incompatible with the protocol state cause #111 \u2013 protocol error unspecified this 5GMM cause is used to report a protocol error event only when no other 5GMM cause in the protocol error class applies annex b (informative) cause values for 5GS session management B.1 causes related to nature of request cause #8 \u2013 operator determined barring this 5GSM cause is used by the network to indicate that the requested service was rejected by the SMF due to operator determined barring cause #26 \u2013 insufficient resources this 5GSM cause is used by the UE or by the network to indicate that the requested service cannot be provided due to insufficient resources cause #27 \u2013 missing or unknown DNN this 5GSM cause is used by the network to indicate that the requested service was rejected by the"
    },
    {
        "chunk_id": "chunk_176",
        "chunk_content": "requested service cannot be provided due to insufficient resources cause #27 \u2013 missing or unknown DNN this 5GSM cause is used by the network to indicate that the requested service was rejected by the external DN because the DNN was not included although required or if the DNN could not be resolved cause #28 \u2013 unknown PDU session type this 5GSM cause is used by the network to indicate that the requested service was rejected by the external DN because the requested PDU session type could not be recognised or is not allowed cause #29 \u2013 user authentication or authorization failed this 5GSM cause is used by the network to indicate that the requested service was rejected by the external DN due to a failed user authentication revoked by the external DN or rejected by 5GCN due to a failed user authentication or authorization cause #31 \u2013 request rejected unspecified this 5GSM cause is used by the network or by the UE to indicate that the requested service or operation or the request for a"
    },
    {
        "chunk_id": "chunk_177",
        "chunk_content": "authentication or authorization cause #31 \u2013 request rejected unspecified this 5GSM cause is used by the network or by the UE to indicate that the requested service or operation or the request for a resource was rejected due to unspecified reasons cause #32 \u2013 service option not supported this 5GSM cause is used by the network when the UE requests a service which is not supported by the PLMN cause #33 \u2013 requested service option not subscribed this 5GSM cause is sent when the UE requests a service option for which it has no subscription cause #35 \u2013 PTI already in use this 5GSM cause is used by the network to indicate that the PTI included by the UE is already in use by another active UE requested procedure for this UE cause #36 \u2013 regular deactivation this 5GSM cause is used to indicate a regular UE or network initiated release of PDU session resources cause #37 \u2013 5GS QoS not accepted this 5GSM cause is used by the network if the new 5GS QoS that was indicated in the UE request cannot be"
    },
    {
        "chunk_id": "chunk_178",
        "chunk_content": "UE or network initiated release of PDU session resources cause #37 \u2013 5GS QoS not accepted this 5GSM cause is used by the network if the new 5GS QoS that was indicated in the UE request cannot be accepted cause #38 \u2013 network failure this 5GSM cause is used by the network to indicate that the requested service was rejected due to an error situation in the network cause #39 \u2013 reactivation requested this 5GSM cause is used by the network to request a PDU session reactivation cause #41 \u2013 semantic error in the TFT operation this 5GSM cause is used by the UE to indicate a semantic error in the TFT operation included in the request cause #42 \u2013 syntactical error in the TFT operation this 5GSM cause is used by the UE to indicate a syntactical error in the TFT operation included in the request cause #43 \u2013 invalid PDU session identity this 5GSM cause is used by the network or the UE to indicate that the PDU session identity value provided to it is not a valid value or the PDU session identified"
    },
    {
        "chunk_id": "chunk_179",
        "chunk_content": "#43 \u2013 invalid PDU session identity this 5GSM cause is used by the network or the UE to indicate that the PDU session identity value provided to it is not a valid value or the PDU session identified by the PDU session identity IE in the request or the command is not active cause #44 \u2013 semantic errors in packet filter(s) this 5GSM cause is used by the network or the UE to indicate that the requested service was rejected due to one or more semantic errors in packet filter(s) of the QoS rule included in the request cause #45 \u2013 syntactical error in packet filter(s) this 5GSM cause is used by the network or the UE to indicate that the requested service was rejected due to one or more syntactical errors in packet filter(s) of the QoS rule included in the request cause #46 \u2013 out of LADN service area this 5GSM cause is used by the network to indicate the UE is out of the LADN service area cause #47 \u2013 PTI mismatch this 5GSM cause is used by the network or UE to indicate that the PTI provided to"
    },
    {
        "chunk_id": "chunk_180",
        "chunk_content": "this 5GSM cause is used by the network to indicate the UE is out of the LADN service area cause #47 \u2013 PTI mismatch this 5GSM cause is used by the network or UE to indicate that the PTI provided to it does not match any PTI in use cause #50 \u2013 PDU session type IPv4 only allowed this 5GSM cause is used by the network to indicate that only PDU session type IPv4 is allowed for the requested IP connectivity cause #51 \u2013 PDU session type IPv6 only allowed this 5GSM cause is used by the network to indicate that only PDU session type IPv6 is allowed for the requested IP connectivity cause #54 \u2013 PDU session does not exist this 5GSM cause is used by the network at handover of a PDU session between non-3GPP access and 3GPP access or at interworking of a PDN connection from non-3GPP access network connected to EPC or from E-UTRAN connected to EPC to a PDU session to indicate that the network does not have any information about the requested PDU session cause #57 \u2013 PDU session type IPv4v6 only"
    },
    {
        "chunk_id": "chunk_181",
        "chunk_content": "connected to EPC or from E-UTRAN connected to EPC to a PDU session to indicate that the network does not have any information about the requested PDU session cause #57 \u2013 PDU session type IPv4v6 only allowed this 5GSM cause is used by the network to indicate that only PDU session types IPv4 IPv6 or IPv4v6 are allowed for the requested IP connectivity cause #58 \u2013 PDU session type unstructured only allowed this 5GSM cause is used by the network to indicate that only PDU session type unstructured is allowed for the requested DN connectivity cause #59 \u2013 unsupported 5QI value this 5GSM cause is used by the network if the 5QI indicated in the UE request cannot be supported cause #61 \u2013 PDU session type ethernet only allowed this 5GSM cause is used by the network to indicate that only PDU session type ethernet is allowed for the requested DN connectivity cause #67 \u2013 insufficient resources for specific slice and DNN this 5GSM cause is by the network to indicate that the requested service cannot"
    },
    {
        "chunk_id": "chunk_182",
        "chunk_content": "ethernet is allowed for the requested DN connectivity cause #67 \u2013 insufficient resources for specific slice and DNN this 5GSM cause is by the network to indicate that the requested service cannot be provided due to insufficient resources for specific slice and DNN or maximum group data rate on a 5G VN group identified by a specific slice and DNN has been exceeded cause #68 \u2013 not supported SSC mode this 5GSM cause is used by the network to indicate that the requested SSC mode is not supported cause #69 \u2013 insufficient resources for specific slice this 5GSM cause is used by the network to indicate that the requested service cannot be provided due to insufficient resources for specific slice maximum number of PDU sessions on a specific slice has been already reached data rate on a specific slice has been exceeded or UE-Slice-MBR has been exceeded cause #70 \u2013 missing or unknown DNN in a slice this 5GSM cause is used by the network to indicate that the requested service was rejected by the"
    },
    {
        "chunk_id": "chunk_183",
        "chunk_content": "has been exceeded or UE-Slice-MBR has been exceeded cause #70 \u2013 missing or unknown DNN in a slice this 5GSM cause is used by the network to indicate that the requested service was rejected by the external DN because the DNN was not included although required or if the DNN could not be resolved in the slice cause #81 \u2013 invalid PTI value this 5GSM cause is used by the network or UE to indicate that the PTI provided to it is invalid for the specific 5GSM message cause #82 \u2013 maximum data rate per UE for user-plane integrity protection is too low this 5GSM cause is used by the network to indicate that the requested service cannot be provided because the maximum data rate per UE for user-plane integrity protection is too low cause #83 \u2013 semantic error in the QoS operation this 5GSM cause is used by the network or the UE to indicate that the requested service was rejected due to a semantic error in the QoS operation included in the request cause #84 \u2013 syntactical error in the QoS operation"
    },
    {
        "chunk_id": "chunk_184",
        "chunk_content": "by the network or the UE to indicate that the requested service was rejected due to a semantic error in the QoS operation included in the request cause #84 \u2013 syntactical error in the QoS operation this 5GSM cause is used by the network or the UE to indicate that the requested service was rejected due to a syntactical error in the QoS operation included in the request cause #85 \u2013 invalid mapped EPS bearer identity this 5GSM cause is used by the network or the UE to indicate that the mapped EPS bearer identity value provided to it is not a valid value or the mapped EPS bearer identified by the mapped EPS bearer identity does not exist cause #86 \u2013 UAS services not allowed this 5GSM cause is used by the network to indicate that the requested UAS services are not allowed B.2 protocol errors (e.g. unknown message) cause #95 \u2013 semantically incorrect message this 5GSM cause is used to report receipt of a message with semantically incorrect contents cause #96 \u2013 invalid mandatory information"
    },
    {
        "chunk_id": "chunk_185",
        "chunk_content": "(e.g. unknown message) cause #95 \u2013 semantically incorrect message this 5GSM cause is used to report receipt of a message with semantically incorrect contents cause #96 \u2013 invalid mandatory information this 5GSM cause indicates that the equipment sending this 5GSM cause has received a message with a non-semantical mandatory IE error cause #97 \u2013 message type non-existent or not implemented this 5GSM cause indicates that the equipment sending this 5GSM cause has received a message with a message type it does not recognize either because this is a message not defined or defined but not implemented by the equipment sending this 5GSM cause cause #98 \u2013 message type not compatible with protocol state this 5GSM cause indicates that the equipment sending this 5GSM cause has received a message not compatible with the protocol state cause #99 \u2013 information element non-existent or not implemented this 5GSM cause indicates that the equipment sending this 5GSM cause has received a message which"
    },
    {
        "chunk_id": "chunk_186",
        "chunk_content": "compatible with the protocol state cause #99 \u2013 information element non-existent or not implemented this 5GSM cause indicates that the equipment sending this 5GSM cause has received a message which includes information elements not recognized because the information element identifier is not defined or it is defined but not implemented by the equipment sending the 5GSM cause however the information element is not required to be present in the message in order for the equipment sending the 5GSM cause to process the message cause #100 \u2013 conditional IE error this 5GSM cause indicates that the equipment sending this cause has received a message with conditional IE errors cause #101 \u2013 message not compatible with protocol state this 5GSM cause indicates that a message has been received which is incompatible with the protocol state cause #111 \u2013 protocol error unspecified this 5GSM cause is used to report a protocol error event only when no other 5GSM cause in the protocol error class applies"
    },
    {
        "chunk_id": "chunk_187",
        "chunk_content": "incompatible with the protocol state cause #111 \u2013 protocol error unspecified this 5GSM cause is used to report a protocol error event only when no other 5GSM cause in the protocol error class applies annex c (normative) storage of 5GMM information C.1 storage of 5GMM information for UEs not operating in SNPN access operation mode the following 5GMM parameters shall be stored on the USIM if the corresponding file or file extension is present a) 5G-GUTI; b) last visited registered TAI; c) 5GS update status; d) 5G NAS security context parameters from a full native 5G NAS security context (see 3GPP TS 33.501 [24]); e) KAUSF and KSEAF (see 3GPP TS 33.501 [24]); f) SOR counter (see subclause 9.11.3.51); and g) UE parameter update counter (see subclause 9.11.3.53A); the UE may support multiple records of NAS security context storage for multiple registration (see 3GPP TS 31.102 [22]) if the UE supports multiple records of NAS security context storage for multiple registration the first 5G"
    },
    {
        "chunk_id": "chunk_188",
        "chunk_content": "records of NAS security context storage for multiple registration (see 3GPP TS 31.102 [22]) if the UE supports multiple records of NAS security context storage for multiple registration the first 5G security context of one access shall be stored in record 1 of the 5G NAS security context USIM file for that access and the second 5G security context of that access shall be stored in record 2 of the same file the presence and format of corresponding files on the USIM is specified in 3GPP TS 31.102 [22] if the corresponding file or file extension is not present on the USIM these 5GMM parameters are stored in a non-volatile memory in the ME together with the SUPI from the USIM these 5GMM parameters can only be used if the SUPI from the USIM matches the SUPI stored in the non-volatile memory; else the UE shall delete the 5GMM parameters upon power up or when a USIM is inserted if KAUSF is stored on the USIM but the SOR counter and the UE parameter update counter are not present on the USIM"
    },
    {
        "chunk_id": "chunk_189",
        "chunk_content": "the UE shall delete the 5GMM parameters upon power up or when a USIM is inserted if KAUSF is stored on the USIM but the SOR counter and the UE parameter update counter are not present on the USIM the UE may delete the KAUSF and associated 5G security context that are stored at the USIM and set the KSI value of ngKSI to '111' (see 3GPP TS 33.501 [24]) NOTE the above handling can be used to prevent a stored CounterSoR and CounterUPU being associated with the wrong KAUSF further criteria for deleting the security information are left to the UE implementation the following 5GMM parameters shall be stored in a non-volatile memory in the ME together with the SUPI from the USIM - configured NSSAI(s); - NSSRG information; - S-NSSAI time validity information; - S-NSSAI location validity information; - on-demand NSSAI; - NSSAI inclusion mode(s); - MPS indicator; - MCS indicator; - operator-defined access category definitions; - network-assigned UE radio capability IDs; - \"CAG information list\""
    },
    {
        "chunk_id": "chunk_190",
        "chunk_content": "- on-demand NSSAI; - NSSAI inclusion mode(s); - MPS indicator; - MCS indicator; - operator-defined access category definitions; - network-assigned UE radio capability IDs; - \"CAG information list\" if the UE supports CAG; - signalled URSP (see 3GPP TS 24.526 [19]) and for each URSP rule of the signalled URSP a UPSI of a UE policy section in which the URSP rule was received; - SOR-CMCI; - one or more lists of type \"list of PLMN(s) to be used in disaster condition\" if the UE supports MINT; - disaster roaming wait range if the UE supports MINT; - disaster return wait range if the UE supports MINT; - indication of whether disaster roaming is enabled in the UE; - indication of 'applicability of \"lists of PLMN(s) to be used in disaster condition\" provided by a VPLMN'; - VPS URSP configuration; - indication of whether interworking without N26 interface is supported; - signalled ProSeP (see 3GPP TS 24.555 [19F]); - signalled V2XP (see 3GPP TS 24.588 [19C]); - signalled A2XP (see 3GPP TS 24.578"
    },
    {
        "chunk_id": "chunk_191",
        "chunk_content": "indication of whether interworking without N26 interface is supported; - signalled ProSeP (see 3GPP TS 24.555 [19F]); - signalled V2XP (see 3GPP TS 24.588 [19C]); - signalled A2XP (see 3GPP TS 24.578 [61]); and - signalled RSLPP (see 3GPP TS 24.514 [62]) the following 5GMM parameters should be stored in a non-volatile memory in the ME together with the SUPI from the USIM - allowed NSSAI(s); and - partially allowed NSSAI(s) the following 5GMM parameters may be stored in a non-volatile memory in the ME together with the SUPI from the USIM - N3AN node configuration information of HPLMN signalled ANDSP (see 3GPP TS 24.526 [19]) each configured NSSAI consists of S-NSSAI(s) stored together with a PLMN identity if it is associated with a PLMN the UE shall store the S-NSSAI(s) of the HPLMN if the UE is in the VPLMN the UE shall also store the configured NSSAI for the current PLMN and any necessary mapped S-NSSAI(s) the configured NSSAI(s) can only be used if the SUPI from the USIM matches the"
    },
    {
        "chunk_id": "chunk_192",
        "chunk_content": "UE is in the VPLMN the UE shall also store the configured NSSAI for the current PLMN and any necessary mapped S-NSSAI(s) the configured NSSAI(s) can only be used if the SUPI from the USIM matches the SUPI stored in the non-volatile memory of the ME; else the UE shall delete the configured NSSAI(s) a configured NSSAI may be associated with NSSRG information S-NSSAI location validity information S-NSSAI time validity information NSAG information and on-demand NSSAI each NSSAI inclusion mode is associated with a PLMN identity and access type the NSSAI inclusion mode(s) can only be used if the SUPI from the USIM matches the SUPI stored in the non-volatile memory of the ME; else the UE shall delete the NSSAI inclusion mode(s) the MPS indicator is stored together with a PLMN identity of the PLMN that provided it and is valid in that RPLMN or equivalent PLMN the MPS indicator can only be used if the SUPI from the USIM matches the SUPI stored in the non-volatile memory of the ME else the UE"
    },
    {
        "chunk_id": "chunk_193",
        "chunk_content": "that provided it and is valid in that RPLMN or equivalent PLMN the MPS indicator can only be used if the SUPI from the USIM matches the SUPI stored in the non-volatile memory of the ME else the UE shall delete the MPS indicator the MCS indicator is stored together with a PLMN identity of the PLMN that provided it and is valid in that RPLMN or equivalent PLMN the MCS indicator can only be used if the SUPI from the USIM matches the SUPI stored in the non-volatile memory of the ME else the UE shall delete the MCS indicator Operator-defined access category definitions are stored together with a PLMN identity of the PLMN that provided them and is valid in that PLMN or equivalent PLMN the operator-defined access category definitions can only be used if the SUPI from the USIM matches the SUPI stored in the non-volatile memory of the ME else the UE shall delete the operator-defined access category definitions the maximum number of stored operator-defined access category definitions is UE"
    },
    {
        "chunk_id": "chunk_194",
        "chunk_content": "stored in the non-volatile memory of the ME else the UE shall delete the operator-defined access category definitions the maximum number of stored operator-defined access category definitions is UE implementation dependent each network-assigned UE radio capability ID is stored together with a PLMN identity of the PLMN that provided it as well as a mapping to the corresponding UE radio configuration and is valid in that PLMN a network-assigned UE radio capability ID can only be used if the SUPI from the USIM matches the SUPI stored in the non-volatile memory of the ME else the UE shall delete the network-assigned UE radio capability ID the UE shall be able to store at least the last 16 received network-assigned UE radio capability IDs there shall be only one network-assigned UE radio capability ID stored for a given combination of PLMN identity and UE radio configuration and any existing UE radio capability ID shall be deleted when a new UE radio capability ID is added for the same"
    },
    {
        "chunk_id": "chunk_195",
        "chunk_content": "ID stored for a given combination of PLMN identity and UE radio configuration and any existing UE radio capability ID shall be deleted when a new UE radio capability ID is added for the same combination of PLMN identity and UE radio configuration if the UE receives a network-assigned UE radio capability ID with a version ID value different from the value included in the network-assigned UE radio capability ID(s) stored at the UE for the serving PLMN the UE may delete these stored network-assigned UE radio capability ID(s) the allowed NSSAI(s) can be stored in a non-volatile memory in the ME together with the SUPI from the USIM allowed NSSAI consists of S-NSSAI(s) stored together with a PLMN identity if it is associated with a PLMN if the allowed NSSAI is stored then the UE shall store the S-NSSAI(s) of the HPLMN if the UE is in the VPLMN the UE shall also store the allowed NSSAI for the serving PLMN and any necessary mapping of the allowed NSSAI for the serving PLMN to the S-NSSAI(s)"
    },
    {
        "chunk_id": "chunk_196",
        "chunk_content": "S-NSSAI(s) of the HPLMN if the UE is in the VPLMN the UE shall also store the allowed NSSAI for the serving PLMN and any necessary mapping of the allowed NSSAI for the serving PLMN to the S-NSSAI(s) of the HPLMN the allowed NSSAI(s) can only be used if the SUPI from the USIM matches the SUPI stored in the non-volatile memory of the ME; else the UE shall delete the allowed NSSAI(s) the partially allowed NSSAI(s) can be stored as allowed NSSAI(s) in a non-volatile memory in the ME together with the SUPI from the USIM partially allowed NSSAI consists of allowed S-NSSAI(s) and for each S-NSSAI a list of TAs for which the S-NSSAI is allowed together with a PLMN identity if the UE is registered for emergency services the UE shall not store the 5GMM parameters described in this annex on the USIM or in non-volatile memory instead the UE shall temporarily store these parameters locally in the ME and the UE shall delete these parameters when the UE is deregistered from emergency services (e.g"
    },
    {
        "chunk_id": "chunk_197",
        "chunk_content": "or in non-volatile memory instead the UE shall temporarily store these parameters locally in the ME and the UE shall delete these parameters when the UE is deregistered from emergency services (e.g before registering for normal service) if the UE is configured for ecall only mode as specified in 3GPP TS 31.102 [22] the UE shall not store the 5GMM parameters described in this annex on the USIM or in non-volatile memory instead the UE shall temporarily store these parameters locally in the ME and the UE shall delete these parameters when the UE enters 5GMM-DEREGISTERED.eCALL-INACTIVE state the UE is switched-off or the USIM is removed the \"CAG information list\" can only be used if the SUPI from the USIM matches the SUPI stored in the non-volatile memory of the ME; else the UE shall delete the \"CAG information list\" the handling of the SOR-CMCI stored in the non-volatile memory in the ME is specified in 3GPP TS 23.122 [5] each \"list of PLMN(s) to be used in disaster condition\" is stored"
    },
    {
        "chunk_id": "chunk_198",
        "chunk_content": "\"CAG information list\" the handling of the SOR-CMCI stored in the non-volatile memory in the ME is specified in 3GPP TS 23.122 [5] each \"list of PLMN(s) to be used in disaster condition\" is stored together with the PLMN identity of the PLMN that provided it the stored lists of type \"list of PLMN(s) to be used in disaster condition\" can only be used if the SUPI from the USIM matches the SUPI stored in the non-volatile memory of the ME; else the UE shall delete the lists of type \"list of PLMN(s) to be used in disaster condition\" the UE shall store at least the \"list of PLMN(s) to be used in disaster condition\" provided by the HPLMN or EHPLMN if the 'applicability of \"lists of PLMN(s) to be used in disaster condition\" provided by a VPLMN' is set to \"true\" the UE should also store the \"list of PLMN(s) to be used in disaster condition\" provided by the VPLMN the maximum number of stored lists of type \"list of PLMN(s) to be used in disaster condition\" provided by a PLMN other than the HPLMN"
    },
    {
        "chunk_id": "chunk_199",
        "chunk_content": "PLMN(s) to be used in disaster condition\" provided by the VPLMN the maximum number of stored lists of type \"list of PLMN(s) to be used in disaster condition\" provided by a PLMN other than the HPLMN or EHPLMN is UE implementation dependent the disaster roaming wait range can only be used if the SUPI from the USIM matches the SUPI stored in the non-volatile memory of the ME; else the UE shall delete the disaster roaming wait range the disaster return wait range can only be used if the SUPI from the USIM matches the SUPI stored in the non-volatile memory of the ME; else the UE shall delete the disaster return wait range the indication of whether disaster roaming is enabled in the UE can only be used if the SUPI from the USIM matches the SUPI stored in the non-volatile memory of the ME; else the UE shall delete the indication of whether disaster roaming is enabled in the UE the indication of 'applicability of \"lists of PLMN(s) to be used in disaster condition\" provided by a VPLMN' can"
    },
    {
        "chunk_id": "chunk_200",
        "chunk_content": "the UE shall delete the indication of whether disaster roaming is enabled in the UE the indication of 'applicability of \"lists of PLMN(s) to be used in disaster condition\" provided by a VPLMN' can only be used if the SUPI from the USIM matches the SUPI stored in the non-volatile memory of the ME; else the UE shall delete the indication of 'applicability of \"lists of PLMN(s) to be used in disaster condition\" provided by a VPLMN' the indication of whether interworking without N26 interface is supported is stored together with a PLMN identity of the PLMN that provided it and is valid in that RPLMN or equivalent PLMN the indication of whether interworking without N26 interface is supported can only be used if the SUPI from the USIM matches the SUPI stored in the non-volatile memory of the ME else the UE shall delete the indication of whether interworking without N26 interface is supported the N3AN node configuration information of HPLMN signalled ANDSP can only be used if the SUPI from"
    },
    {
        "chunk_id": "chunk_201",
        "chunk_content": "else the UE shall delete the indication of whether interworking without N26 interface is supported the N3AN node configuration information of HPLMN signalled ANDSP can only be used if the SUPI from the USIM matches the SUPI stored in the non-volatile memory of the ME else the UE shall delete the N3AN node configuration information of HPLMN signalled ANDSP C.2 storage of 5GMM information for UEs operating in SNPN access operation mode the 5GMM information for UEs operating in SNPN access operation mode and not registering or registered for the onboarding service in SNPN are stored according to the following conditions - if the UE does not support access to an SNPN using credentials from a credentials holder and equivalent SNPNs the following 5GMM parameters shall be stored per subscribed SNPN in a non-volatile memory in the ME together with the subscriber identifier associated with the SNPN identity of the SNPN in the \"list of subscriber data\" configured in the ME (see 3GPP TS 23.122"
    },
    {
        "chunk_id": "chunk_202",
        "chunk_content": "SNPN in a non-volatile memory in the ME together with the subscriber identifier associated with the SNPN identity of the SNPN in the \"list of subscriber data\" configured in the ME (see 3GPP TS 23.122 [5]) or with the SUPI from the USIM if no subscriber identifier is configured in the entry of the \"list of subscriber data\" associated with the SNPN identity and the UE has a valid USIM;and - if the UE supports access to an SNPN using credentials from a credentials holder equivalent SNPNs or both the following 5GMM parameters shall be stored in a non-volatile memory in the ME per i) the subscribed SNPN together with the subscriber identifier associated with the selected entry in the \"list of subscriber data\" configured in the ME (see 3GPP TS 23.122 [5]) or with the SUPI from the USIM if no subscriber identifier is configured in the selected entry of the \"list of subscriber data\" configured in the ME and the UE has a valid USIM; or ii) if the UE supports access to an SNPN using credentials"
    },
    {
        "chunk_id": "chunk_203",
        "chunk_content": "identifier is configured in the selected entry of the \"list of subscriber data\" configured in the ME and the UE has a valid USIM; or ii) if the UE supports access to an SNPN using credentials from a credentials holder the PLMN subscription together with the SUPI from the USIM which is associated with the PLMN subscription a) 5G-GUTI;a1) NID of the registered SNPN; b) last visited registered TAI; c) 5GS update status; d) 5G NAS security context parameters from a full native 5G NAS security context (see 3GPP TS 33.501 [24]); e) KAUSF and KSEAF (see 3GPP TS 33.501 [24]); f) UE parameter update counter (see subclause 9.11.3.53A); g) configured NSSAI(s); g1) NSSRG information; g2) S-NSSAI time validity information; g3) S-NSSAI location validity information; g4) on-demand NSSAI; h) NSSAI inclusion mode(s); i) MPS indicator; j) MCS indicator; k) operator-defined access category definitions; l) network-assigned UE radio capability IDs; m) zero or more instances of signalled URSP (see 3GPP TS"
    },
    {
        "chunk_id": "chunk_204",
        "chunk_content": "mode(s); i) MPS indicator; j) MCS indicator; k) operator-defined access category definitions; l) network-assigned UE radio capability IDs; m) zero or more instances of signalled URSP (see 3GPP TS 24.526 [19]) each associated with a non-subscribed SNPN or the subscribed SNPN which provided the URSP and for each URSP rule of the signalled URSP a UPSI of a UE policy section in which the URSP rule was received; m1) zero or more instances of pre-configured URSP rules (see 3GPP TS 24.526 [19]) each associated with the subscribed SNPN or the HPLMN which provided the URSP; n) optionally a non-subscribed SNPN signalled URSP handling indication indicating whether the UE is allowed to accept URSP signalled by non-subscribed SNPNs; o) \"permanently forbidden SNPNs\" list; o1) \"permanently forbidden SNPNs for access for localized services in SNPN\" list; p) \"temporarily forbidden SNPNs\" list; p1) \"temporarily forbidden SNPNs for access for localized services in SNPN\" list; q) SOR counter (see"
    },
    {
        "chunk_id": "chunk_205",
        "chunk_content": "SNPNs for access for localized services in SNPN\" list; p) \"temporarily forbidden SNPNs\" list; p1) \"temporarily forbidden SNPNs for access for localized services in SNPN\" list; q) SOR counter (see subclause 9.11.3.51); r) SOR-CMCI; s) optionally the SNPN selection parameters associated with the PLMN subscription (see 3GPP TS 23.122 [5] subclause 4.9.3.0); and t) signalled ProSeP (see 3GPP TS 24.555 [19F]) the 5GMM information for UEs operating in SNPN access operation mode and registering or registered for the onboarding service in SNPN are stored as follows a) 5G-GUTI; b) last visited registered TAI; c) 5GS update status; d) 5G NAS security context parameters from a full native 5G NAS security context (see 3GPP TS 33.501 [24]); e) KAUSF and KSEAF (see 3GPP TS 33.501 [24]); f) UE parameter update counter (see subclause 9.11.3.53A); g) network-assigned UE radio capability IDs; h) \"permanently forbidden SNPNs for onboarding services in SNPN\" list; and i) \"temporarily forbidden SNPNs for"
    },
    {
        "chunk_id": "chunk_206",
        "chunk_content": "update counter (see subclause 9.11.3.53A); g) network-assigned UE radio capability IDs; h) \"permanently forbidden SNPNs for onboarding services in SNPN\" list; and i) \"temporarily forbidden SNPNs for onboarding services in SNPN\" list the 5GMM information for UEs operating in SNPN access operation mode are stored according to the following conditions - if the UE does not support access to an SNPN using credentials from a credentials holder equivalent SNPNs or both the following 5GMM parameters should be stored per subscribed SNPN in a non-volatile memory in the ME together with the subscriber identifier associated with the SNPN identity of the SNPN in the \"list of subscriber data\" configured in the ME (see 3GPP TS 23.122 [5]) or with the SUPI from the USIM if no subscriber identifier is configured in the entry of the \"list of subscriber data\" associated with the SNPN identity and the UE has a valid USIM; and - if the UE supports access to an SNPN using credentials from a credentials"
    },
    {
        "chunk_id": "chunk_207",
        "chunk_content": "configured in the entry of the \"list of subscriber data\" associated with the SNPN identity and the UE has a valid USIM; and - if the UE supports access to an SNPN using credentials from a credentials holder equivalent SNPNs or both the following 5GMM parameters should be stored in a non-volatile memory in the ME per i) the subscribed SNPN together with the subscriber identifier associated with the selected entry in the \"list of subscriber data\" configured in the ME (see 3GPP TS 23.122 [5]) or with the SUPI from the USIM if no subscriber identifier is configured in the selected entry of the \"list of subscriber data\" configured in the ME and the UE has a valid USIM; or ii) if the UE supports access to an SNPN using credentials from a credentials holder the PLMN subscription together with the SUPI from the USIM which is associated with the PLMN subscription allowed NSSAI(s) the 5GMM information for UEs operating in SNPN access operation mode are stored according to the following"
    },
    {
        "chunk_id": "chunk_208",
        "chunk_content": "with the SUPI from the USIM which is associated with the PLMN subscription allowed NSSAI(s) the 5GMM information for UEs operating in SNPN access operation mode are stored according to the following conditions - if the UE does not support access to an SNPN using credentials from a credentials holder equivalent SNPNs or both the following 5GMM parameters may be stored per subscribed SNPN in a non-volatile memory in the ME together with the subscriber identifier associated with the SNPN identity of the SNPN in the \"list of subscriber data\" configured in the ME (see 3GPP TS 23.122 [5]) or with the SUPI from the USIM if no subscriber identifier is configured in the entry of the \"list of subscriber data\" associated with the SNPN identity and the UE has a valid USIM; and - if the UE supports access to an SNPN using credentials from a credentials holder equivalent SNPNs or both the following 5GMM parameters may be stored in a non-volatile memory in the ME per i) the subscribed SNPN together"
    },
    {
        "chunk_id": "chunk_209",
        "chunk_content": "to an SNPN using credentials from a credentials holder equivalent SNPNs or both the following 5GMM parameters may be stored in a non-volatile memory in the ME per i) the subscribed SNPN together with the subscriber identifier associated with the selected entry in the \"list of subscriber data\" configured in the ME (see 3GPP TS 23.122 [5]) or with the SUPI from the USIM if no subscriber identifier is configured in the selected entry of the \"list of subscriber data\" configured in the ME and the UE has a valid USIM; or ii) if the UE supports access to an SNPN using credentials from a credentials holder the PLMN subscription together with the SUPI from the USIM which is associated with the PLMN subscription a) the N3AN node configuration information of subscribed SNPN signalled ANDSP (see 3GPP TS 24.526 [19]) if the 5GMM parameters are associated with the PLMN subscription then the 5GMM parameters can only be used if the SUPI from the USIM which is associated with the selected PLMN"
    },
    {
        "chunk_id": "chunk_210",
        "chunk_content": "3GPP TS 24.526 [19]) if the 5GMM parameters are associated with the PLMN subscription then the 5GMM parameters can only be used if the SUPI from the USIM which is associated with the selected PLMN subscription matches the SUPI stored in the non-volatile memory; else the UE shall delete the 5GMM parameters if the 5GMM parameters are associated with the subscribed SNPN of the entry in the \"list of subscriber data\" then the 5GMM parameters can only be used if the subscriber identifier of the selected entry of the \"list of subscriber data\" matches the subscriber identifier stored in the non-volatile memory or if the subscriber identifier from the USIM matches the subscriber identifier stored in the non volatile memory no subscriber identifier is configured in the selected entry of the \"list of subscriber data\" configured in the ME and the UE has a valid USIM each configured NSSAI consists of S-NSSAI(s) stored together with an SNPN identity if it is associated with an SNPN a configured"
    },
    {
        "chunk_id": "chunk_211",
        "chunk_content": "of subscriber data\" configured in the ME and the UE has a valid USIM each configured NSSAI consists of S-NSSAI(s) stored together with an SNPN identity if it is associated with an SNPN a configured NSSAI may be associated with NSSRG information S-NSSAI time validity information S-NSSAI location validity information NSAG information and on-demand NSSAI each NSSAI inclusion mode is associated with an SNPN identity and access type the MPS indicator is stored together with an SNPN identity of the SNPN that provided it and is valid in that registered SNPN or equivalent SNPN the MCS indicator is stored together with an SNPN identity of the SNPN that provided it and is valid in that registered SNPN or equivalent SNPN Operator-defined access category definitions are stored together with an SNPN identity of the SNPN that provided them and are valid in that SNPN or equivalent SNPN the maximum number of stored operator-defined access category definitions is UE implementation dependent each"
    },
    {
        "chunk_id": "chunk_212",
        "chunk_content": "identity of the SNPN that provided them and are valid in that SNPN or equivalent SNPN the maximum number of stored operator-defined access category definitions is UE implementation dependent each network-assigned UE radio capability ID is stored together with an SNPN identity of the SNPN that provided it as well as a mapping to the corresponding UE radio configuration and is valid in that SNPN the UE shall be able to store at least the last 16 received network-assigned UE radio capability IDs there shall be only one network-assigned UE radio capability ID stored for a given combination of SNPN identity and UE radio configuration and any existing UE radio capability ID shall be deleted when a new UE radio capability ID is added for the same combination of SNPN identity and UE radio configuration if the UE receives a network-assigned UE radio capability ID with a version ID value different from the value included in the network-assigned UE radio capability ID(s) stored at the UE for the"
    },
    {
        "chunk_id": "chunk_213",
        "chunk_content": "if the UE receives a network-assigned UE radio capability ID with a version ID value different from the value included in the network-assigned UE radio capability ID(s) stored at the UE for the serving SNPN the UE may delete these stored network-assigned UE radio capability ID(s) the handling of the SOR-CMCI stored in the non-volatile memory in the ME is specified in 3GPP TS 23.122 [5] the allowed NSSAI(s) can be stored in a non-volatile memory in the ME allowed NSSAI consists of S-NSSAI(s) stored together with an SNPN identity if it is associated with an SNPN the partially allowed NSSAI(s) can be stored as allowed NSSAI(s) in a non-volatile memory in the ME partially allowed NSSAI consists of S-NSSAI(s) and a list of TAs for which the S-NSSAI is allowed stored together with an SNPN identity if it is associated with an SNPN annex d (normative) UE policy delivery service D.1 general D.1.1 overview the UE provides the PCF with a list of one or more stored UE policy section identifiers"
    },
    {
        "chunk_id": "chunk_214",
        "chunk_content": "if it is associated with an SNPN annex d (normative) UE policy delivery service D.1 general D.1.1 overview the UE provides the PCF with a list of one or more stored UE policy section identifiers (UPSIs) during the UE-initiated UE state indication procedure the UPSI is composed of two parts a) a PLMN ID part containing 1) the PLMN ID for the PLMN; or 2) the PLMN ID part of the SNPN identity for the SNPN; of the PCF which provides the UE policies; and b) a UE policy section code (UPSC) containing a value assigned by the PCF during the UE-initiated UE state indication procedure the UE also provides the PCF with the UE policy related capabilities such as the UE's support for ANDSP the UE's support for URSP provisioning in EPS and the UE's OS id during the network-requested UE policy management procedure the PCF provides the UE with one or more UE policy sections containing UE policies the UE processes the received UE policy sections each identified by the UPSI received from the PCF and"
    },
    {
        "chunk_id": "chunk_215",
        "chunk_content": "procedure the PCF provides the UE with one or more UE policy sections containing UE policies the UE processes the received UE policy sections each identified by the UPSI received from the PCF and informs the PCF of the result in the present annex the condition that the PLMN ID part of the UPSI is referring to the HPLMN shall be considered as fulfilled only if the PLMN ID is equal to the HPLMN code derived from the IMSI NOTE this is also applicable if the UE has a non-empty EHPLMN list even if the EHPLMN list does not include the PLMN ID derived from the IMSI the UE can also request the PCF to provide V2XP as specified in 3GPP TS 24.587 [19B] the UE can also request the PCF to provide ProSeP as specified in 3GPP TS 24.554 [19E] the UE can also request the PCF to provide A2XP as specified in 3GPP TS 24.577 [60] the UE can also request the PCF to provide RSLPP as specified in 3GPP TS 24.514 [62] D.1.2 principles of PTI handling for UE policy delivery service procedures when the PCF or"
    },
    {
        "chunk_id": "chunk_216",
        "chunk_content": "in 3GPP TS 24.577 [60] the UE can also request the PCF to provide RSLPP as specified in 3GPP TS 24.514 [62] D.1.2 principles of PTI handling for UE policy delivery service procedures when the PCF or the UE initiates a procedure it shall include a valid PTI value in the message header of the command message or the request message when the UE initiates a procedure the UE shall use a PTI value in range between 01H and 77H when the PCF initiates a procedure the PCF shall use a PTI value in range between 80H and FEH when the PCF initiates a transaction related procedure (i.e a procedure consisting of more than one message and the messages are related) it shall include a valid PTI value in the message header of the command message if a response message is sent as result of a received command or request message the UE or the PCF shall include in the response message the PTI value received within the received command or request message (see examples in figure D.1.2.1 figure D.1.2.2 and figure"
    },
    {
        "chunk_id": "chunk_217",
        "chunk_content": "request message the UE or the PCF shall include in the response message the PTI value received within the received command or request message (see examples in figure D.1.2.1 figure D.1.2.2 and figure D.1.2.3) if a command message is sent as result of a received request message the PCF shall include in the command message the PTI value received with the request message (see examples in figure D.1.2.3) figure D.1.2.1 Network-requested transaction related procedure figure D.1.2.2 UE-requested transaction related procedure rejected by the network figure D.1.2.3 UE-requested transaction related procedure triggering a network-requested transaction related procedure NOTE in earlier versions of this protocol the UE can include in the response message a PTI value which is not the same as the one received within the command message and therefore the PCF could not associate the response message from the UE to the command message sent D.2 procedures D.2.1 Network-requested UE policy management"
    },
    {
        "chunk_id": "chunk_218",
        "chunk_content": "received within the command message and therefore the PCF could not associate the response message from the UE to the command message sent D.2 procedures D.2.1 Network-requested UE policy management procedure D.2.1.1 general the purpose of the network-requested UE policy management procedure is to enable the network to a) add one or more new UE policy sections to the UE; b) modify one or more UE policy sections stored at the UE; or c) delete one or more UE policy sections stored at the UE; and optionally to enable the HPLMN or the subscribed SNPN to provide a UE accessing the subscribed SNPN or the HPLMN with a non-subscribed SNPN signalled URSP handling indication indicating whether the UE is allowed to accept URSP signalled by non-subscribed SNPNs D.2.1.2 Network-requested UE policy management procedure initiation in order to initiate the network-requested UE policy management procedure the PCF shall a) if the network-requested UE policy management procedure is triggered by the"
    },
    {
        "chunk_id": "chunk_219",
        "chunk_content": "management procedure initiation in order to initiate the network-requested UE policy management procedure the PCF shall a) if the network-requested UE policy management procedure is triggered by the UE-requested V2X policy provisioning procedure as specified in 3GPP TS 24.587 [19B] the UE-requested ProSe policy provisioning procedure as specified in 3GPP TS 24.554 [19E] or the UE-requested A2X policy provisioning procedure as specified in 3GPP TS 24.577 [60] then set the PTI IE to the PTI value of the received UE POLICY PROVISIONING REQUEST message of the UE-requested V2X policy provisioning procedure the UE-requested ProSe policy provisioning procedure or the UE-requested A2X policy provisioning procedure otherwise allocate a PTI value currently not used and set the PTI IE to the allocated PTI value; b) encode the information about the UE policy sections to be added modified or deleted in a UE policy section management list IE as specified in subclause D.6.2 and include it in a"
    },
    {
        "chunk_id": "chunk_220",
        "chunk_content": "PTI value; b) encode the information about the UE policy sections to be added modified or deleted in a UE policy section management list IE as specified in subclause D.6.2 and include it in a MANAGE UE POLICY COMMAND message; c) if the PCF is a PCF of the HPLMN or the subscribed SNPN optionally include the UE policy network classmark IE in a MANAGE UE POLICY COMMAND message and set the non-subscribed SNPN signalled URSP handling indication of the UE policy network classmark IE to \"UE is not allowed to accept URSP signalled by non-subscribed SNPNs\" or \"UE is allowed to accept URSP signalled by non-subscribed SNPNs\"; c1) if the UE supports VPS URSP optionally encode the information about entries of VPS URSP configuration to be added modified or deleted in the VPS URSP configuration IE as specified in subclause D.6.8 and include it in a MANAGE UE POLICY COMMAND message; d) send the MANAGE UE POLICY COMMAND message to the UE via the AMF as specified in 3GPP TS 23.502 [9]; and e) start"
    },
    {
        "chunk_id": "chunk_221",
        "chunk_content": "specified in subclause D.6.8 and include it in a MANAGE UE POLICY COMMAND message; d) send the MANAGE UE POLICY COMMAND message to the UE via the AMF as specified in 3GPP TS 23.502 [9]; and e) start timer T3501 (see example in figure D.2.1.2.1) NOTE the PCF starts a different timer T3501 for each PTI value figure D.2.1.2.1 Network-requested UE policy management procedure upon receipt of the MANAGE UE POLICY COMMAND message with a PTI value currently not used by a network-requested UE policy management procedure for each instruction included in the UE policy section management list IE the UE shall a) store the received UE policy section of the instruction if the UE has no stored UE policy section associated with the same UPSI as the UPSI associated with the instruction; b) replace the stored UE policy section with the received UE policy section of the instruction if the UE has a stored UE policy section associated with the same UPSI as the UPSI associated with the instruction; or c)"
    },
    {
        "chunk_id": "chunk_222",
        "chunk_content": "UE policy section with the received UE policy section of the instruction if the UE has a stored UE policy section associated with the same UPSI as the UPSI associated with the instruction; or c) delete the stored UE policy section if the UE has a stored UE policy section associated with the same UPSI as the UPSI associated with the instruction and the UE policy section of the instruction is empty; additionally if the UE policy network classmark IE is included in the MANAGE UE POLICY COMMAND message and a) the UE has an empty EHPLMN list or the EHPLMN list is not present and the UE's RPLMN is the HPLMN; b) the UE has a non-empty EHPLMN list and the UE's RPLMN is an EHPLMN; or c) the UE's RSNPN is the subscribed SNPN the UE shall delete the non-subscribed SNPN signalled URSP handling indication stored for the selected entry of \"list of subscriber data\" or the selected PLMN subscription if any and store the non-subscribed SNPN signalled URSP handling indication received in the UE policy"
    },
    {
        "chunk_id": "chunk_223",
        "chunk_content": "stored for the selected entry of \"list of subscriber data\" or the selected PLMN subscription if any and store the non-subscribed SNPN signalled URSP handling indication received in the UE policy network classmark IE for the selected entry of \"list of subscriber data\" or the selected PLMN subscription if the UE supports the VPS URSP and the VPS URSP configuration is included in the MANAGE UE POLICY COMMAND message a) if the replacement type field of the received VPS URSP configuration indicates \"full list of tuples\" the UE shall delete the stored VPS URSP configuration if any; and b) if the received VPS URSP configuration contains one or more tuples 1) if the UE does not have the stored VPS URSP configuration the UE shall store the received VPS URSP configuration except zero or more tuples with no UPSCs; or 2) otherwise i) for each tuple with a tuple ID in the stored VPS URSP configuration A) if a tuple with the tuple ID is in the received VPS URSP configuration and contains - no UPSCs"
    },
    {
        "chunk_id": "chunk_224",
        "chunk_content": "with no UPSCs; or 2) otherwise i) for each tuple with a tuple ID in the stored VPS URSP configuration A) if a tuple with the tuple ID is in the received VPS URSP configuration and contains - no UPSCs the UE shall delete the tuple with the tuple ID from the stored VPS URSP configuration; or - one or more UPSCs the UE shall replace the tuple with the tuple ID in the stored VPS URSP configuration with the tuple with the tuple ID from the received VPS URSP configuration; or B) if no tuple with the tuple ID is in the received VPS URSP configuration the UE shall keep the tuple with the tuple ID in the stored VPS URSP configuration; and ii) for each tuple with a tuple ID in the received VPS URSP configuration if no tuple with the tuple ID is in the stored VPS URSP configuration and A) the tuple with the tuple ID in the received VPS URSP configuration contains no UPSCs the UE shall ignore the tuple with the tuple ID in the received VPS URSP configuration; or B) the tuple with the tuple ID in"
    },
    {
        "chunk_id": "chunk_225",
        "chunk_content": "with the tuple ID in the received VPS URSP configuration contains no UPSCs the UE shall ignore the tuple with the tuple ID in the received VPS URSP configuration; or B) the tuple with the tuple ID in the received VPS URSP configuration contains one or more UPSCs the UE shall add the tuple with the tuple ID from the received VPS URSP configuration to the stored VPS URSP configuration the UE may continue storing a received UE policy section for a PLMN or SNPN when the UE registers in another PLMN or SNPN if necessary the UE may delete UE policy sections stored for a PLMN other than the RPLMN and the HPLMN or for an SNPN other than the registered SNPN and the subscribed SNPN before storing the new received UE policy sections when storing a UE policy section received from an SNPN the UE shall associate the NID of that SNPN with the UPSI of the stored UE policy section NOTE the maximum number of UE policy sections for PLMNs or SNPNs other than the HPLMN and the RPLMN or the registered SNPN"
    },
    {
        "chunk_id": "chunk_226",
        "chunk_content": "associate the NID of that SNPN with the UPSI of the stored UE policy section NOTE the maximum number of UE policy sections for PLMNs or SNPNs other than the HPLMN and the RPLMN or the registered SNPN and the subscribed SNPN that the UE can store and how the UE selects the UE policy sections to be deleted are up to the UE implementation D.2.1.3 Network-requested UE policy management procedure accepted by the UE if all instructions included in the UE policy section management list IE were executed successfully by the UE the UE shall a) create a MANAGE UE POLICY COMPLETE message including the PTI value received within the MANAGE UE POLICY COMMAND message; and b) transport the MANAGE UE POLICY COMPLETE message using the NAS transport procedure as specified in subclause 5.4.5 upon receipt of the MANAGE UE POLICY COMPLETE message the PCF shall stop timer T3501 the PCF should ensure that the PTI value assigned to this procedure is not released immediately NOTE the way to achieve this is"
    },
    {
        "chunk_id": "chunk_227",
        "chunk_content": "of the MANAGE UE POLICY COMPLETE message the PCF shall stop timer T3501 the PCF should ensure that the PTI value assigned to this procedure is not released immediately NOTE the way to achieve this is implementation dependent for example the PCF can ensure that the PTI value assigned to this procedure is not released during the time equal to or greater than the default value of timer T3501 D.2.1.4 Network-requested UE policy management procedure not accepted by the UE if the UE could not execute all instructions included in the UE policy section management list IE successfully the UE shall a) set the PTI IE to the PTI value received within the MANAGE UE POLICY COMMAND message and encode the results by including 1) the UPSI associated with the instructions which could not be executed successfully; 2) the failed instruction order set to order of the instruction in the UE policy section management sublist of the received UE policy section management list IE which could not be executed"
    },
    {
        "chunk_id": "chunk_228",
        "chunk_content": "2) the failed instruction order set to order of the instruction in the UE policy section management sublist of the received UE policy section management list IE which could not be executed successfully; and 3) the cause of the failure in the UE policy section management result IE as specified in subclause D.6.3 and include it in a MANAGE UE POLICY COMMAND REJECT message and b) transport the MANAGE UE POLICY COMMAND REJECT message using the NAS transport procedure as specified in subclause 5.4.5 upon receipt of the MANAGE UE POLICY COMMAND REJECT message the PCF shall stop timer T3501 any instruction that was included in the UE policy section management list IE but not indicatedin the UE policy section management result IE of the received MANAGE UE POLICY COMMAND REJECT message shall be considered as successfully executed the PCF should ensure that the PTI value assigned to this procedure is not released immediately NOTE the way to achieve this is implementation dependent for example"
    },
    {
        "chunk_id": "chunk_229",
        "chunk_content": "as successfully executed the PCF should ensure that the PTI value assigned to this procedure is not released immediately NOTE the way to achieve this is implementation dependent for example the PCF can ensure that the PTI value assigned to this procedure is not released during the time equal to or greater than the default value of timer T3501 upon receipt of the notification from the AMF that the UE is not reachable the PCF shall stop the T3501 D.2.1.5 abnormal cases on the network side the following abnormal cases can be identified a) T3501 expired the PCF shall on the first expiry of the timer T3501 retransmit the MANAGE UE POLICY COMMAND message and shall reset and start timer T3501 this retransmission is repeated four times i.e on the fifth expiry of timer T3501 the PCF shall abort the procedure and release the allocated PTI D.2.1.6 abnormal cases in the UE the following abnormal cases can be identified a) receipt of an instruction associated with a UPSI which has a PLMN ID part"
    },
    {
        "chunk_id": "chunk_230",
        "chunk_content": "procedure and release the allocated PTI D.2.1.6 abnormal cases in the UE the following abnormal cases can be identified a) receipt of an instruction associated with a UPSI which has a PLMN ID part that is not equal to the PLMN ID of the UE's HPLMN and the instruction contains a UE policy part with a UE policy part type set to \"URSP\" for a UE not operating in SNPN access operation mode or receipt of an instruction associated with a UPSI which has a PLMN ID part that is not equal to the PLMN ID part of the selected SNPN and the instruction contains a UE policy part with a UE policy part type set to \"URSP\" for a UE operating in SNPN access operation mode the UE shall set the UE policy delivery service cause to #111 \"Protocol error unspecified\" for the instruction in the UE policy section management result IE of the MANAGE UE POLICY COMMAND REJECT message b) receipt of an instruction associated with a UPSI which has a PLMN ID part that is not equal to the PLMN ID of the UE's HPLMN or the"
    },
    {
        "chunk_id": "chunk_231",
        "chunk_content": "result IE of the MANAGE UE POLICY COMMAND REJECT message b) receipt of an instruction associated with a UPSI which has a PLMN ID part that is not equal to the PLMN ID of the UE's HPLMN or the UE's RPLMN and the instruction contains a UE policy part with a UE policy part type set to \"ANDSP\" for a UE not operating in SNPN access operation mode or receipt of an instruction associated with a UPSI which has a PLMN ID part that is not equal to the PLMN ID part of the subscribed SNPN or the UE's RSNPN and the instruction contains a UE policy part with a UE policy part type set to \"ANDSP\" for a UE operating in SNPN access operation mode the UE shall set the UE policy delivery service cause to #111 \"Protocol error unspecified\" for the instruction in the UE policy section management result IE of the MANAGE UE POLICY COMMAND REJECT message c) transmission failure of the MANAGE UE POLICY COMPLETE message indication from lower layers the UE shall not diagnose an error and consider the"
    },
    {
        "chunk_id": "chunk_232",
        "chunk_content": "IE of the MANAGE UE POLICY COMMAND REJECT message c) transmission failure of the MANAGE UE POLICY COMPLETE message indication from lower layers the UE shall not diagnose an error and consider the network-requested UE policy management procedure is complete NOTE 1 considering the network-requested UE policy management procedure is complete as the result of this abnormal case does not cause the UE to revert the execution of the successfully executed instructions included in the MANAGE UE POLICY COMMAND message d) transmission failure of the MANAGE UE POLICY COMMAND REJECT message indication from lower layers the UE shall not diagnose an error and consider the network-requested UE policy management procedure is complete NOTE 2 considering the network-requested UE policy management procedure is complete as the result of this abnormal case does not cause the UE to revert the execution of the successfully executed instructions included in the MANAGE UE POLICY COMMAND message e) receipt of a"
    },
    {
        "chunk_id": "chunk_233",
        "chunk_content": "complete as the result of this abnormal case does not cause the UE to revert the execution of the successfully executed instructions included in the MANAGE UE POLICY COMMAND message e) receipt of a MANAGE UE POLICY COMMAND message with a PTI set to the same value as the PTI of a previously received MANAGE UE POLICY COMMAND message the UE shall discard the message and retransmit the MANAGE UE POLICY COMMAND COMPLETE or MANAGE UE POLICY COMMAND REJECT message transmitted in response to the previously received MANAGE UE POLICY COMMAND message NOTE 3 the way to achieve this is UE implementation dependent for example the UE can assume that on the fifth expiry of timer T3501 the PCF will abort the procedure and that the PTI value assigned to the procedure will be released f) receipt of an instruction associated with a UPSI which has a PLMN ID part that is equal to the PLMN ID part of the selected SNPN the instruction contains a UE policy part with a UE policy part type set to \"URSP\" UE's"
    },
    {
        "chunk_id": "chunk_234",
        "chunk_content": "associated with a UPSI which has a PLMN ID part that is equal to the PLMN ID part of the selected SNPN the instruction contains a UE policy part with a UE policy part type set to \"URSP\" UE's RSNPN is a non-subscribed SNPN and 1) the UE has a stored non-subscribed SNPN signalled URSP handling indication for the selected entry of \"list of subscriber data\" or the selected PLMN subscription indicating that the UE is not allowed to accept URSP signalled by non-subscribed SNPNs; or 2) the UE does not have a stored non-subscribed SNPN signalled URSP handling indication for the selected entry of \"list of subscriber data\" or the selected PLMN subscription and the non-subscribed SNPN signalled URSP handling indication preconfigured in the selected entry of \"list of subscriber data\" or the selected PLMN subscription indicates that the UE is not allowed to accept URSP signalled by non-subscribed SNPNs; for a UE operating in SNPN access operation mode the UE shall set the UE policy delivery"
    },
    {
        "chunk_id": "chunk_235",
        "chunk_content": "PLMN subscription indicates that the UE is not allowed to accept URSP signalled by non-subscribed SNPNs; for a UE operating in SNPN access operation mode the UE shall set the UE policy delivery service cause to #111 \"Protocol error unspecified\" for the instruction in the UE policy section management result IE of the MANAGE UE POLICY COMMAND REJECT message D.2.2 UE-initiated UE state indication procedure D.2.2.1 general the purpose of the UE-initiated UE state indication procedure is a) to deliver the UPSI(s) of the UE policy section(s) which are - identified by a UPSI with the PLMN ID part indicating the HPLMN or the selected PLMN and stored in the UE if any; or - identified by a UPSI with the PLMN ID part indicating the PLMN ID part of the SNPN identity of the selected SNPN and associated with the NID of the selected SNPN and stored in the UE if any; b) to indicate whether UE supports ANDSP; c) to indicate whether UE supports URSP provisioning in EPS; c1) to indicate whether UE"
    },
    {
        "chunk_id": "chunk_236",
        "chunk_content": "with the NID of the selected SNPN and stored in the UE if any; b) to indicate whether UE supports ANDSP; c) to indicate whether UE supports URSP provisioning in EPS; c1) to indicate whether UE supports VPS URSP; d) to indicate whether UE supports reporting URSP rule enforcement; and e) to deliver the UE's one or more OS IDs; to the PCF D.2.2.2 UE-initiated UE state indication procedure initiation in order to initiate the UE-initiated UE state indication procedure the UE shall create a UE STATE INDICATION message the UE a) shall allocate a PTI value currently not used and set the PTI IE to the allocated PTI value; b) if not operating in SNPN access operation mode shall include the UPSI(s) of the UE policy section(s) which are identified by a UPSI with the PLMN ID part indicating the HPLMN or the selected PLMN available in the UE in the UPSI list IE if any; NOTE 1 if the UE does not have any UE policy section which is identified by a UPSI with the PLMN ID part indicating the HPLMN or"
    },
    {
        "chunk_id": "chunk_237",
        "chunk_content": "or the selected PLMN available in the UE in the UPSI list IE if any; NOTE 1 if the UE does not have any UE policy section which is identified by a UPSI with the PLMN ID part indicating the HPLMN or the selected PLMN the UE sets the length of UPSI list contents field in the UPSI list IE to zero c) if operating in SNPN access operation mode shall include UPSI(s) of the UE policy section(s) which are identified by a UPSI - with the PLMN ID part indicating the MCC and MNC of the selected SNPN; and - associated with the NID of the selected SNPN; available in the UE in the UPSI list IE if any; NOTE 2 if the UE does not have any UE policy section which is identified by a UPSI with the PLMN ID part indicating the MCC and MNC of the selected SNPN and associated with the NID of the selected SNPN the UE sets the length of UPSI list contents field in the UPSI list IE to zero d) shall specify whether the UE supports ANDSP in the UE policy classmark IE; e) shall specify whether the UE supports URSP"
    },
    {
        "chunk_id": "chunk_238",
        "chunk_content": "UE sets the length of UPSI list contents field in the UPSI list IE to zero d) shall specify whether the UE supports ANDSP in the UE policy classmark IE; e) shall specify whether the UE supports URSP provisioning in EPS in the UE policy classmark IE; NOTE 3 ANDSP and URSP are specified in 3GPP TS 24.526 [19] e1) if the UE supports VPS URSP shall set the SVPSU bit to \"VPS URSP supported by the UE\" in the UE policy classmark IE; f) if the UE supports reporting URSP rule enforcement shall set the SupportRURE bit to \"Reporting URSP rule enforcement supported by the UE\"; and g) may include the UE's one or more OS IDs in the UE OS id IE the UE shall send the UE STATE INDICATION message (see example in figure D.2.2.2.1) the UE shall transport the created UE STATE INDICATION message using the registration procedure (see subclause 5.5.1) figure D.2.2.2.1 UE-initiated UE state indication procedure D.2.2.3 UE-initiated UE state indication procedure accepted by the network upon receipt of the UE"
    },
    {
        "chunk_id": "chunk_239",
        "chunk_content": "procedure (see subclause 5.5.1) figure D.2.2.2.1 UE-initiated UE state indication procedure D.2.2.3 UE-initiated UE state indication procedure accepted by the network upon receipt of the UE STATE INDICATION message the PCF shall operate as described in 3GPP TS 23.502 [9] and 3GPP TS 29.525 [21] D.2.2.4 abnormal cases on the network side apart from the case described in subclause D.2.2.3 no abnormal cases have been identified D.3 UE policy re-assembly at the UE when the UE needs to apply ANDSP as specified in 3GPP TS 24.502 [18] the UE shall consider all UE policy parts with ANDSP contents currently stored at the UE when the UE needs to apply URSP as specified in 3GPP TS 24.526 [19] the UE shall consider all UE policy parts with URSP contents currently stored at the UE a) if the UE supports VPS URSP then 1) the UE shall consider as VPS URSP of the RPLMN all UE policy parts with URSP contents currently stored at the UE which are a part of one or more UE policy sections identified by a"
    },
    {
        "chunk_id": "chunk_240",
        "chunk_content": "VPS URSP then 1) the UE shall consider as VPS URSP of the RPLMN all UE policy parts with URSP contents currently stored at the UE which are a part of one or more UE policy sections identified by a UPSI i) with the PLMN ID part indicating the HPLMN; and ii) with UPSC indicated in a tuple of the stored VPS URSP configuration such that the tuple contains the network descriptor with a network descriptor entry containing A) the network descriptor entry type field set to \"one or more VPLMNs\" and the network descriptor entry value field containing PLMN ID of the RPLMN of an access if the UE is registered via one or both accesses and the RPLMN of each access is a VPLMN; B) the network descriptor entry type field set to \"one or more MCCs\" and the network descriptor entry value field containing MCC of the PLMN ID of the RPLMN of an access if the UE is registered via one or both accesses and the RPLMN of each access is a VPLMN; or C) the network descriptor entry type field set to \"any VPLMN\" if"
    },
    {
        "chunk_id": "chunk_241",
        "chunk_content": "of the PLMN ID of the RPLMN of an access if the UE is registered via one or both accesses and the RPLMN of each access is a VPLMN; or C) the network descriptor entry type field set to \"any VPLMN\" if the UE is registered via one or both accesses and the RPLMN of each access is a VPLMN; 2) the UE shall consider as VPS URSP of the equivalent PLMN of the RPLMN all UE policy parts with URSP contents currently stored at the UE which are a part of one or more UE policy sections identified by a UPSI i) with the PLMN ID part indicating the HPLMN; and ii) with UPSC indicated in a tuple of the stored VPS URSP configuration such that the tuple contains the network descriptor with a network descriptor entry containing A) the network descriptor entry type field set to \"one or more VPLMNs\" and the network descriptor entry value field containing PLMN ID of an equivalent PLMN if the UE is registered via one or both accesses the RPLMN of each access is a VPLMN and the equivalent PLMN is a VPLMN; B) the"
    },
    {
        "chunk_id": "chunk_242",
        "chunk_content": "descriptor entry value field containing PLMN ID of an equivalent PLMN if the UE is registered via one or both accesses the RPLMN of each access is a VPLMN and the equivalent PLMN is a VPLMN; B) the network descriptor entry type field set to \"one or more MCCs\" and the network descriptor entry value field containing MCC of the PLMN ID of an equivalent PLMN if the UE is registered via one or both accesses the RPLMN of each access is a VPLMN and the equivalent PLMN is a VPLMN; or C) the network descriptor entry type field set to \"any VPLMN\" if the UE is registered via one or both accesses the RPLMN of each access is a VPLMN and an equivalent PLMN is a VPLMN; and 3) the UE shall consider as PG URSP all UE policy parts with URSP contents currently stored at the UE except zero or more UE policy parts if any which are a part of one or more UE policy sections identified by a UPSI i) with the PLMN ID part indicating the HPLMN; and ii) with UPSC indicated in any tuple of the stored VPS URSP"
    },
    {
        "chunk_id": "chunk_243",
        "chunk_content": "parts if any which are a part of one or more UE policy sections identified by a UPSI i) with the PLMN ID part indicating the HPLMN; and ii) with UPSC indicated in any tuple of the stored VPS URSP configuration; and b) the UE shall consider all UE policy parts with URSP contents currently stored at the UE as the signalled URSP when the UE needs to apply V2XP as specified in 3GPP TS 24.588 [19C] the UE shall consider all UE policy parts with V2XP contents currently stored at the UE when the UE needs to apply ProSeP as specified in 3GPP TS 24.555 [19F] the UE shall consider all UE policy parts with ProSeP contents currently stored at the UE when the UE needs to apply A2XP as specified in 3GPP TS 24.578 [61] the UE shall consider all UE policy parts with A2XP contents currently stored at the UE when the UE needs to apply RSLPP as specified in 3GPP TS 24.514 [62] the UE shall consider all UE policy parts with RSLPP contents currently stored at the UE D.4 void D.5 message functional"
    },
    {
        "chunk_id": "chunk_244",
        "chunk_content": "at the UE when the UE needs to apply RSLPP as specified in 3GPP TS 24.514 [62] the UE shall consider all UE policy parts with RSLPP contents currently stored at the UE D.4 void D.5 message functional definition and contents D.5.1 manage UE policy command D.5.1.1 message definition the MANAGE UE POLICY COMMAND message is sent by the PCF to the UE to request the UE to manage UE policy sections see table D.5.1.1.1 message type MANAGE UE POLICY COMMAND significance dual direction network to UE table D.5.1.1.1 MANAGE UE POLICY COMMAND message content D.5.1.2 UE policy network classmark the UE policy network classmark is included when the PCF of a PLMN or an SNPN intends to provide the UE with information about the policy aspects of the network D.5.1.3 VPS URSP configuration the VPS URSP configuration IE is included when the PCF of a PLMN intends to provide the UE with the VPS URSP configuration D.5.2 manage UE policy complete D.5.2.1 message definition the MANAGE UE POLICY COMPLETE message"
    },
    {
        "chunk_id": "chunk_245",
        "chunk_content": "IE is included when the PCF of a PLMN intends to provide the UE with the VPS URSP configuration D.5.2 manage UE policy complete D.5.2.1 message definition the MANAGE UE POLICY COMPLETE message is sent by the UE to the PCF to report that all received instructions have been successfully executed at the UE see table D.5.2.1.1 message type MANAGE UE POLICY COMPLETE significance dual direction UE to network table D.5.2.1.1 MANAGE UE POLICY COMPLETE message content D.5.3 manage UE policy command reject D.5.3.1 message definition the MANAGE UE POLICY COMMAND REJECT message is sent by the UE to the PCF to report that one or more instructions could not be successfully executed at the UE see table D.5.3.1.1 message type MANAGE UE POLICY COMMAND REJECT significance dual direction UE to network table D.5.3.1.1 MANAGE UE POLICY COMMAND REJECT message content D.5.4 UE state indication D.5.4.1 message definition the UE STATE INDICATION message is sent by the UE to the PCF a) to deliver the UPSI(s)"
    },
    {
        "chunk_id": "chunk_246",
        "chunk_content": "D.5.3.1.1 MANAGE UE POLICY COMMAND REJECT message content D.5.4 UE state indication D.5.4.1 message definition the UE STATE INDICATION message is sent by the UE to the PCF a) to deliver the UPSI(s) of the UE policy section(s) stored in the UE; b) to indicate whether the UE supports ANDSP; c) to indicate whether the UE supports URSP provisioning in EPS in the UE policy classmark IE; c1) to indicate whether the UE supports VPS URSP; c2) to indicate whether the UE supports reporting URSP rule enforcement; and d) to deliver the UE's one or more OS IDs; see table D.5.4.1.1 message type UE STATE INDICATION significance dual direction UE to network table D.5.4.1.1 UE STATE INDICATION message content D.6 information elements coding D.6.1 UE policy delivery service message type table D.6.1.1 UE policy delivery service message type D.6.2 UE policy section management list the purpose of the UE policy section management list information element is to transfer from the PCF to the UE a list of"
    },
    {
        "chunk_id": "chunk_247",
        "chunk_content": "policy delivery service message type D.6.2 UE policy section management list the purpose of the UE policy section management list information element is to transfer from the PCF to the UE a list of instructions to be performed at the UE for management of UE policy section stored at the UE the UE policy section management list information element is coded as shown in figure D.6.2.1 figure D.6.2.2 figure D.6.2.3 figure D.6.2.4 figure D.6.2.5 figure D.6.2.6 figure D.6.2.7 and table D.6.2.1 the UE policy section management list information element has a minimum length of 12 octets and a maximum length of 65534 octets figure D.6.2.1 UE policy section management list information element figure D.6.2.2 UE policy section management list contents figure D.6.2.3 UE policy section management sublist figure D.6.2.4 UE policy section management sublist contents figure D.6.2.5 instruction figure D.6.2.6 UE policy section contents figure D.6.2.7 UE policy part table D.6.2.1 UE policy section"
    },
    {
        "chunk_id": "chunk_248",
        "chunk_content": "sublist figure D.6.2.4 UE policy section management sublist contents figure D.6.2.5 instruction figure D.6.2.6 UE policy section contents figure D.6.2.7 UE policy part table D.6.2.1 UE policy section management list information element D.6.3 UE policy section management result the purpose of the UE policy section management result information element is to transfer from the UE to the PCF information about instructions for UE policy section management which the UE could not execute successfully the UE policy section management result information element is coded as shown in figure D.6.3.1 figure D.6.3.2 figure D.6.3.3 figure D.6.3.4 figure D.6.3.5 and table D.6.3.1 the UE policy section management result information element has a minimum length of 12 octets and a maximum length of 65534 octets figure D.6.3.1 UE policy section management result information element figure D.6.3.2 UE policy section management result contents figure D.6.3.3 UE policy section management subresult figure"
    },
    {
        "chunk_id": "chunk_249",
        "chunk_content": "octets figure D.6.3.1 UE policy section management result information element figure D.6.3.2 UE policy section management result contents figure D.6.3.3 UE policy section management subresult figure D.6.3.4 UE policy section management subresult contents figure D.6.3.5 result table D.6.3.1 UE policy section management result information element D.6.4 UPSI list the purpose of the UPSI list information element is to transfer from the UE to the PCF a list of UPSIs the UPSI list information element is coded as shown in figure D.6.4.1 figure D.6.4.2 and table D.6.4.1 the UPSI list information element has a minimum length of 3 octets and a maximum length of 65532 octets NOTE a PCF implementing a previous version of the present specification will expect the UPSI list information element to have a minimum length of 10 octets and could be unable to decode a UPSI list information element with a length of 3 octets i.e a UPSI list information element not containing any UPSI figure D.6.4.1 UPSI"
    },
    {
        "chunk_id": "chunk_250",
        "chunk_content": "a minimum length of 10 octets and could be unable to decode a UPSI list information element with a length of 3 octets i.e a UPSI list information element not containing any UPSI figure D.6.4.1 UPSI list information element figure D.6.4.2 UPSI sublist table D.6.4.1 UPSI list information element D.6.5 UE policy classmark the purpose of the UE policy classmark information element is to provide the network with information about the policy aspects of the UE the UE policy classmark information element is coded as shown in figure D.6.5.1 and table D.6.5.1 the UE policy classmark is a type 4 information element with a minimum length of 3 octets and a maximum length of 5 octets figure D.6.5.1 UE policy classmark information element table D.6.5.1 UE policy classmark information element D.6.6 UE OS id the purpose of the UE OS id information element is to provide the network with information about the OS of the UE the UE OS id information element is coded as shown in figure D.6.6.1 and table"
    },
    {
        "chunk_id": "chunk_251",
        "chunk_content": "OS id the purpose of the UE OS id information element is to provide the network with information about the OS of the UE the UE OS id information element is coded as shown in figure D.6.6.1 and table D.6.6.1 the UE OS id is a type 4 information element with a minimum length of 18 octet and a maximum length of 242 octets figure D.6.6.1 UE OS id information element table D.6.6.1 UE OS id information element D.6.7 UE policy network classmark the purpose of the UE policy network classmark information element is to provide the UE with information about the policy aspects of the network the UE policy network classmark information element is coded as shown in figure D.6.7.1 and table D.6.7.1 the UE policy network classmark is a type 4 information element with a minimum length of 3 octets and a maximum length of 5 octets figure D.6.7.1 UE policy network classmark information element table D.6.7.1 UE policy network classmark information element D.6.8 VPS URSP configuration the purpose of the"
    },
    {
        "chunk_id": "chunk_252",
        "chunk_content": "maximum length of 5 octets figure D.6.7.1 UE policy network classmark information element table D.6.7.1 UE policy network classmark information element D.6.8 VPS URSP configuration the purpose of the VPS URSP configuration information element is to transfer the VPS URSP configuration from the PCF to the UE the VPS URSP configuration contains zero or more tuples each tuple contains the tuple ID identifying the tuple the network descriptor identifying one or more VPLMNs and zero or more UPSCs of HPLMN's UE policy sections which contain solely one or more UE policy parts with the UE policy part type set to \"URSP\" such that the URSP rules in those one or more UE policy parts are applicable to the VPLMN and its equivalent PLMN the VPS URSP configuration information element is coded as shown in figure D.6.8.1 figure D.6.8.2 figure D.6.8.3 figure D.6.8.4 figure D.6.8.5 figure D.6.8.6 figure D.6.8.7 figure D.6.8.8 figure D.6.8.9 and table D.6.8.1 the VPS URSP configuration is type 6"
    },
    {
        "chunk_id": "chunk_253",
        "chunk_content": "shown in figure D.6.8.1 figure D.6.8.2 figure D.6.8.3 figure D.6.8.4 figure D.6.8.5 figure D.6.8.6 figure D.6.8.7 figure D.6.8.8 figure D.6.8.9 and table D.6.8.1 the VPS URSP configuration is type 6 information element with a minimum length of 3 octets and a maximum length of 65533 octets figure D.6.8.1 VPS URSP configuration information element figure D.6.8.2 tuple figure D.6.8.3 network descriptor figure D.6.8.4 network descriptor entry figure D.6.8.5 network descriptor entry value for network descriptor entry type set to \"one or more VPLMNs\" figure D.6.8.6 PLMN ID figure D.6.8.7 network descriptor entry value for network descriptor entry type set to \"one or more MCCs\" figure D.6.8.8 MCC pair figure D.6.8.9 odd MCC table D.6.8.1 VPS URSP configuration information element D.7 timers of UE policy delivery service timers of UE policy delivery service are shown in table D.7.1 table D.7.1 timers of UE policy delivery service \u2013 PCF side D.8 handling of unknown unforeseen and erroneous"
    },
    {
        "chunk_id": "chunk_254",
        "chunk_content": "UE policy delivery service timers of UE policy delivery service are shown in table D.7.1 table D.7.1 timers of UE policy delivery service \u2013 PCF side D.8 handling of unknown unforeseen and erroneous UPDS data D.8.1 general the procedures specified in the subclause apply to those messages which pass the checks described in this subclause this subclause also specifies procedures for the handling of unknown unforeseen and erroneous UPDS data by the receiving entity these procedures are called \"error handling procedures\" but in addition to providing recovery mechanisms for error situations they define a compatibility mechanism for future extensions of the UPDS subclauses D.8.1 to D.8.8 shall be applied in order of precedence detailed error handling procedures in the network are implementation dependent and may vary from PLMN to PLMN however when extensions of UPDS are developed networks are assumed to have the error handling which is indicated in this subclause as mandatory (\"shall\") and"
    },
    {
        "chunk_id": "chunk_255",
        "chunk_content": "dependent and may vary from PLMN to PLMN however when extensions of UPDS are developed networks are assumed to have the error handling which is indicated in this subclause as mandatory (\"shall\") and that is indicated as strongly recommended (\"should\") also the error handling of the network is only considered as mandatory or strongly recommended when certain thresholds for errors are not reached during a dedicated connection for definition of semantical and syntactical errors see 3GPP TS 24.007 [11] subclause 11.4.2 D.8.2 message too short or too long D.8.2.1 message too short when a message is received that is too short to contain a complete message type information element that message shall be ignored c.f 3GPP TS 24.007 [11] D.8.2.2 message too long the maximum size of a UE policy delivery service message is 65535 octets D.8.3 unknown or unforeseen procedure transaction identity D.8.3.1 procedure transaction identity the following network procedures shall apply for handling an"
    },
    {
        "chunk_id": "chunk_256",
        "chunk_content": "delivery service message is 65535 octets D.8.3 unknown or unforeseen procedure transaction identity D.8.3.1 procedure transaction identity the following network procedures shall apply for handling an unknown erroneous or unforeseen PTI received in a UPDS message a) in case the network receives a MANAGE UE POLICY COMPLETE message or MANAGE UE POLICY COMMAND REJECT message in which the PTI value is an assigned or unassigned value that does not match any PTI in use the network shall ignore the UPDS message b) in case the network receives a UPDS message in which the PTI value is a reserved value the network shall ignore the UPDS message the following UE procedures shall apply for handling an unknown erroneous or unforeseen PTI received in a UPDS message a) in case the UE receives a UPDS message in which the PTI value is a reserved value the UE shall ignore the UPDS message D.8.4 unknown or unforeseen message type if the UE or the network receives a UPDS message with message type not"
    },
    {
        "chunk_id": "chunk_257",
        "chunk_content": "message in which the PTI value is a reserved value the UE shall ignore the UPDS message D.8.4 unknown or unforeseen message type if the UE or the network receives a UPDS message with message type not defined for the UPDS or not implemented by the receiver it shall ignore the UPDS message NOTE a message type not defined for the UPDS in the given direction is regarded by the receiver as a message type not defined for the UPDS see 3GPP TS 24.007 [11] if the UE receives a message not compatible with the UPDS state the UE shall ignore the UPDS message if the network receives a message not compatible with the UPDS state the network actions are implementation dependent D.8.5 Non-semantical mandatory information element errors D.8.5.1 common procedures when on receipt of a message a) an \"imperative message part\" error; or b) a \"missing mandatory IE\" error is diagnosed or when a message containing a) a syntactically incorrect mandatory IE; b) an IE with an IEI unknown in the message but"
    },
    {
        "chunk_id": "chunk_258",
        "chunk_content": "message part\" error; or b) a \"missing mandatory IE\" error is diagnosed or when a message containing a) a syntactically incorrect mandatory IE; b) an IE with an IEI unknown in the message but encoded as \"comprehension required\" (see 3GPP TS 24.007 [11]); or c) an out of sequence IE encoded as \"comprehension required\" (see 3GPP TS 24.007 [11]) is received the UE shall ignore the UPDS message; the network shall proceed as follows the network shall 1) try to treat the message (the exact further actions are implementation dependent); or 2) ignore the message D.8.6 unknown and unforeseen IEs in the non-imperative message part D.8.6.1 IEIs unknown in the message the UE shall ignore all IEs unknown in a message which are not encoded as \"comprehension required\" (see 3GPP TS 24.007 [11]) the network shall take the same approach D.8.6.2 out of sequence IEs the UE shall ignore all out of sequence IEs in a message which are not encoded as \"comprehension required\" (see 3GPP TS 24.007 [11]) the"
    },
    {
        "chunk_id": "chunk_259",
        "chunk_content": "shall take the same approach D.8.6.2 out of sequence IEs the UE shall ignore all out of sequence IEs in a message which are not encoded as \"comprehension required\" (see 3GPP TS 24.007 [11]) the network should take the same approach D.8.6.3 repeated IEs if an information element with format t TV TLV or TLV-E is repeated in a message in which repetition of the information element is not specified in subclause D.5 the UE shall handle only the contents of the information element appearing first and shall ignore all subsequent repetitions of the information element when repetition of information elements is specified the UE shall handle only the contents of specified repeated information elements if the limit on repetition of information elements is exceeded the UE shall handle the contents of information elements appearing first up to the limit of repetitions and shall ignore all subsequent repetitions of the information element the network should follow the same procedures D.8.7"
    },
    {
        "chunk_id": "chunk_260",
        "chunk_content": "of information elements appearing first up to the limit of repetitions and shall ignore all subsequent repetitions of the information element the network should follow the same procedures D.8.7 Non-imperative message part errors this category includes a) syntactically incorrect optional IEs; and b) conditional IE errors D.8.7.1 syntactically incorrect optional IEs the UE shall treat all optional IEs that are syntactically incorrect in a message as not present in the message the network shall take the same approach D.8.7.2 conditional IE errors when upon receipt of a UPDS message the UE diagnoses a \"missing conditional IE\" error or an \"unexpected conditional IE\" error or when it receives a UPDS message containing at least one syntactically incorrect conditional IE the UE shall ignore the message when the network receives a message and diagnoses a \"missing conditional IE\" error or an \"unexpected conditional IE\" error or when it receives a message containing at least one syntactically"
    },
    {
        "chunk_id": "chunk_261",
        "chunk_content": "message when the network receives a message and diagnoses a \"missing conditional IE\" error or an \"unexpected conditional IE\" error or when it receives a message containing at least one syntactically incorrect conditional IE the network shall either a) try to treat the message (the exact further actions are implementation dependent); or b) ignore the message D.8.8 messages with semantically incorrect contents when a message with semantically incorrect contents is received the UE shall perform the foreseen reactions of the procedural part of subclauses D.2 if however no such reactions are specified the UE shall ignore the message the network should follow the same procedure annex e (informative) void annex f (informative) change history"
    }
]