{
  "nodes": [
    {
      "id": "UE_Initial_Registration_Requested",
      "type": "state",
      "properties": {
        "5GS_registration_type": "initial registration",
        "PDU_SESSION_ESTABLISHMENT_REQUEST": "initial emergency request"
      }
    },
    {
      "id": "Network_Rejects_Registration",
      "type": "event",
      "properties": {
        "message_type": "REGISTRATION REJECT"
      }
    },
    {
      "id": "UE_Procedures_Subclause_5_5_1_2_5",
      "type": "state",
      "properties": {
        "action": "Perform procedures as described in subclause 5.5.1.2.5"
      }
    },
    {
      "id": "UE_Same_PLMN_SNPN_Check",
      "type": "decision",
      "properties": {
        "condition": "UE is in the same selected PLMN or SNPN where the last initial registration request was attempted"
      }
    },
    {
      "id": "UE_Inform_Upper_Layers_Failure",
      "type": "action",
      "properties": {
        "action": "Inform the upper layers of the failure of the procedure"
      }
    },
    {
      "id": "UE_Attempt_Initial_Registration_Emergency",
      "type": "action",
      "properties": {
        "action": "Attempt initial registration for emergency services"
      }
    },
    {
      "id": "UE_Initial_Registration_Requested_Handover",
      "type": "state",
      "properties": {
        "5GS_registration_type": "initial registration",
        "emergency_PDU_session": "handover of an existing PDN connection for emergency bearer services"
      }
    },
    {
      "id": "UE_Same_PLMN_Equivalent_Check",
      "type": "decision",
      "properties": {
        "condition": "UE is in the same selected PLMN or equivalent PLMN or the same selected SNPN or equivalent SNPN where the last initial registration request was attempted"
      }
    },
    {
      "id": "UE_Procedures_Subclause_5_5_1_2_7",
      "type": "state",
      "properties": {
        "action": "Perform actions as described in subclause 5.5.1.2.7"
      }
    },
    {
      "id": "Registration_Failed_Abnormal_Case_b",
      "type": "event",
      "properties": {
        "condition": "abnormal case b) in subclause 5.5.1.2.7"
      }
    },
    {
      "id": "UE_Inform_Upper_Layers_Access_Failure",
      "type": "action",
      "properties": {
        "action": "Inform the upper layers of the failure to access the network"
      }
    },
    {
      "id": "Registration_Failed_Abnormal_Case_cde",
      "type": "event",
      "properties": {
        "condition": "abnormal cases c), d) or e) in subclause 5.5.1.2.7"
      }
    },
    {
      "id": "PDU_Handover_Needed_Check",
      "type": "decision",
      "properties": {
        "condition": "PDU session needs to be established due to handover of an existing PDN connection for emergency bearer services"
      }
    }
  ],
  "edges": [
    {
      "from": "UE_Initial_Registration_Requested",
      "to": "Network_Rejects_Registration",
      "event": "Registration_Request_Sent",
      "properties": {}
    },
    {
      "from": "Network_Rejects_Registration",
      "to": "UE_Procedures_Subclause_5_5_1_2_5",
      "action": "Perform_Subclause_5_5_1_2_5",
      "properties": {}
    },
    {
      "from": "UE_Procedures_Subclause_5_5_1_2_5",
      "to": "UE_Same_PLMN_SNPN_Check",
      "properties": {}
    },
    {
      "from": "UE_Same_PLMN_SNPN_Check",
      "to": "UE_Inform_Upper_Layers_Failure",
      "condition": "true",
      "properties": {}
    },
    {
      "from": "UE_Same_PLMN_SNPN_Check",
      "to": "UE_Attempt_Initial_Registration_Emergency",
      "condition": "false",
      "properties": {}
    },
    {
      "from": "UE_Initial_Registration_Requested_Handover",
      "to": "Network_Rejects_Registration",
      "event": "Registration_Request_Sent",
      "properties": {}
    },
    {
      "from": "Network_Rejects_Registration",
      "to": "UE_Procedures_Subclause_5_5_1_2_5",
      "action": "Perform_Subclause_5_5_1_2_5",
      "properties": {}
    },
    {
      "from": "UE_Procedures_Subclause_5_5_1_2_5",
      "to": "UE_Same_PLMN_Equivalent_Check",
      "properties": {}
    },
    {
      "from": "UE_Same_PLMN_Equivalent_Check",
      "to": "UE_Attempt_Initial_Registration_Emergency",
      "condition": "true",
      "properties": {}
    },
    {
      "from": "UE_Same_PLMN_Equivalent_Check",
      "to": "UE_Attempt_Initial_Registration_Emergency",
      "condition": "false",
      "properties": {}
    },
    {
      "from": "UE_Initial_Registration_Requested",
      "to": "Registration_Failed_Abnormal_Case_b",
      "event": "Registration_Request_Failed",
      "properties": {}
    },
    {
      "from": "Registration_Failed_Abnormal_Case_b",
      "to": "UE_Procedures_Subclause_5_5_1_2_7",
      "action": "Perform_Subclause_5_5_1_2_7",
      "properties": {}
    },
    {
      "from": "UE_Procedures_Subclause_5_5_1_2_7",
      "to": "UE_Inform_Upper_Layers_Access_Failure",
      "properties": {}
    },
    {
      "from": "UE_Initial_Registration_Requested",
      "to": "Registration_Failed_Abnormal_Case_cde",
      "event": "Registration_Request_Failed",
      "properties": {}
    },
    {
      "from": "Registration_Failed_Abnormal_Case_cde",
      "to": "UE_Procedures_Subclause_5_5_1_2_7",
      "action": "Perform_Subclause_5_5_1_2_7",
      "properties": {}
    },
    {
      "from": "UE_Procedures_Subclause_5_5_1_2_7",
      "to": "UE_Same_PLMN_SNPN_Check",
      "properties": {}
    },
    {
      "from": "UE_Same_PLMN_SNPN_Check",
      "to": "PDU_Handover_Needed_Check",
      "properties": {}
    },
    {
      "from": "PDU_Handover_Needed_Check",
      "to": "UE_Inform_Upper_Layers_Failure",
      "condition": "false",
      "properties": {}
    },
     {
      "from": "PDU_Handover_Needed_Check",
      "to": "UE_Same_PLMN_Equivalent_Check",
      "condition": "true",
      "properties": {}
    },
    {
      "from": "UE_Same_PLMN_Equivalent_Check",
      "to": "UE_Attempt_Initial_Registration_Emergency",
      "condition": "true",
      "properties": {}
    },
    {
      "from": "UE_Same_PLMN_Equivalent_Check",
      "to": "UE_Attempt_Initial_Registration_Emergency",
      "condition": "false",
      "properties": {}
    }
  ]
}