
{
  "steps": [
    {
      "step": "Initial Registration Initiation (UE)",
      "description": "The UE, in the 5GMM-DEREGISTERED state, initiates initial registration by sending a REGISTRATION REQUEST message to the AMF.",
      "actions": [
        {
          "action": "Send REGISTRATION REQUEST",
          "parameters": [
            "5GS registration type IE",
            "UE status IE",
            "ATTACH REQUEST (in EPS NAS message container IE)",
            "5G-GUTI (in Additional GUTI IE and/or 5GS mobile identity IE)",
            "SUCI (in 5GS mobile identity IE)",
            "PEI (in 5GS mobile identity IE)",
            "5GS update type IE",
            "MICO indication IE",
            "T3324 IE",
            "Requested T3512 IE",
            "Requested DRX parameters IE",
            "Requested NB-N1 mode DRX parameters IE",
            "Requested extended DRX parameters IE",
            "LADN indication IE",
            "Requested NSSAI IE",
            "Network slicing indication IE",
            "5GMM capability IE",
            "S1 UE network capability IE",
            "Payload container type IE",
            "UE STATE INDICATION message",
            "Additional information requested IE",
            "Requested WUS assistance information IE",
            "Requested PEIPS assistance information IE",
            "N5GC indication IE",
            "AUN3 indication IE",
            "Service-level-AA container IE",
            "Last visited registered TAI"

          ]
        },
        {
          "action": "Start timer T3510",
          "parameters": ["T3510"]
        },
        {
          "action": "Stop timer T3502 (if running)",
          "parameters": ["T3502"]
        },
        {
          "action": "Stop timer T3511 (if running)",
          "parameters": ["T3511"]
        },
        {
          "action": "Start timer T3519 (if SUCI included and T3519 not running)",
          "parameters": ["T3519", "SUCI"]
        }
      ],
      "events": [
        "UE state transition to 5GMM-DEREGISTERED",
        "Initial registration needed for 5GS services",
        "Initial registration needed for emergency services",
        "Initial registration needed for SMS over NAS",
        "UE movement between GERAN/UTRAN and NG-RAN (with conditions)",
        "Initial registration needed for onboarding services in SNPN",
        "Initial registration needed for disaster roaming services",
        "Initial registration to resume normal services after unavailability period"
      ]
    },
    {
      "step": "5GMM Common Procedure Initiation (Network)",
      "description": "The network may initiate 5GMM common procedures (identification, authentication, security) based on the REGISTRATION REQUEST message.",
      "actions": [
        {"action": "Initiate 5GMM common procedures", "parameters": []},
        {"action": "Skip authentication (if configured and emergency registration)", "parameters": []}
      ],
      "events": ["REGISTRATION REQUEST received"]
    },
    {
      "step": "Initial Registration Accepted (Network)",
      "description": "If the initial registration request is accepted, the AMF sends a REGISTRATION ACCEPT message to the UE.",
      "actions": [
        {
          "action": "Send REGISTRATION ACCEPT",
          "parameters": [
            "TAI list",
            "Service area list IE",
            "List of equivalent PLMNs",
            "List of equivalent SNPNs",
            "5G-GUTI",
            "LADN information IE",
            "Extended LADN information IE",
            "CAG information list IE",
            "Extended CAG information list IE",
            "Negotiated WUS assistance information IE",
            "Negotiated PEIPS assistance information IE",
            "5GS network feature support IE",
            "T3324 IE",
            "T3512 value IE",
            "Non-3GPP de-registration timer value IE",
            "T3447 value IE",
            "T3448 value IE",
            "Truncated 5G-S-TMSI configuration IE",
            "Service-level-AA container IE",
            "List of PLMNs to be used in disaster condition IE",
            "Disaster roaming wait range IE",
            "Disaster return wait range IE",
            "Forbidden TAI(s) for the list of \"5GS forbidden tracking areas for roaming\" IE",
            "Forbidden TAI(s) for the list of \"5GS forbidden tracking areas for regional provision of service\" IE",
            "RAN timing synchronization IE",
            "Feature authorization indication IE",
            "5GS registration result IE",
            "Allowed NSSAI IE",
            "Mapped S-NSSAI(s)",
            "Rejected NSSAI IE",
            "Extended rejected NSSAI IE",
            "Partially rejected NSSAI IE",
            "Partially allowed NSSAI IE",
            "Pending NSSAI IE",
            "NSSRG information IE",
            "Alternative NSSAI IE",
            "S-NSSAI time validity information IE",
            "S-NSSAI location validity information IE",
            "On-demand NSSAI IE",
            "NSAG information IE",
            "UE radio capability ID IE",
            "UE radio capability ID deletion indication IE",
            "MICO indication IE",
            "Unavailability configuration IE",
            "Discontinuous coverage maximum time offset IE",
            "RAT utilization control IE",
            "SOR transparent container IE",
            "NSSAI inclusion mode IE",
            "Operator-defined access category definitions IE",
            "Extended emergency number list IE",
            "Ciphering key data IE",
            "Negotiated DRX parameters IE",
            "Negotiated NB-N1 mode DRX parameters IE",
            "Negotiated extended DRX parameters IE"
          ]
        },
        {
          "action": "Store information elements from REGISTRATION REQUEST",
          "parameters": ["5GMM capability", "S1 UE network capability", "UE security capability"]
        },
        {
          "action": "Start timer T3550",
          "parameters": ["T3550"]
        },
        {
          "action": "Initiate UUAA-MM procedure (if conditions met)",
          "parameters": []
        }
      ],
      "events": ["REGISTRATION REQUEST accepted"]
    },
    {
      "step": "Initial Registration Not Accepted (Network)",
      "description": "If the initial registration request is not accepted, the AMF sends a REGISTRATION REJECT message to the UE.",
      "actions": [
        {
          "action": "Send REGISTRATION REJECT",
          "parameters": [
            "5GMM cause value",
            "T3346 value IE",
            "Rejected NSSAI IE",
            "Extended rejected NSSAI IE",
            "RAT utilization control IE",
            "CAG information list IE",
            "Extended CAG information list IE",
            "N3IWF identifier IE",
            "TNAN information IE",
            "Forbidden TAI(s) for the list of \"5GS forbidden tracking areas for roaming\" IE",
            "Forbidden TAI(s) for the list of \"5GS forbidden tracking areas for regional provision of service\" IE"
          ]
        }
      ],
      "events": ["REGISTRATION REQUEST rejected"]
    },
    {
      "step": "UE Actions on REGISTRATION ACCEPT (UE)",
      "description": "The UE processes the REGISTRATION ACCEPT message.",
      "actions": [
        {"action": "Reset registration attempt counter"},
        {"action": "Enter state 5GMM-REGISTERED"},
        {"action": "Set 5GS update status to 5U1 UPDATED"},
        {"action": "Reset PLMN/SNPN-specific counters"},
        {"action": "Store TAI list"},
        {"action": "Store list of equivalent PLMNs/SNPNs"},
        {"action": "Store LADN information"},
        {"action": "Store extended LADN information"},
        {"action": "Update CAG information list"},
        {"action": "Store 5G-GUTI"},
        {"action": "Store PEIPS assistance information"},
        {"action": "Store UE radio capability ID"},
        {"action": "Store NSSAI information"},
        {"action": "Store NSAG information"},
        {"action": "Store alternative NSSAI"},
        {"action": "Store S-NSSAI time/location validity information"},
        {"action": "Store on-demand NSSAI"},
        {"action": "Send REGISTRATION COMPLETE (if needed)"},
        {"action": "Set timer T3512 (if T3512 value IE received)"},
        {"action": "Set timer T3324 (if T3324 value IE received)"},
        {"action": "Set non-3GPP de-registration timer (if non-3GPP de-registration timer value IE received)"},
        {"action": "Handle MPS/MCS indicator"},
        {"action": "Handle Restriction on use of enhanced coverage"},
        {"action": "Handle Discontinuous coverage maximum time offset"},
        {"action": "Handle Unavailability configuration"},
        {"action": "Handle MBSR authorization"},
        {"action": "Handle RAT utilization control"},
        {"action": "Handle SOR transparent container"},
        {"action": "Handle Operator-defined access category definitions"},
        {"action": "Handle T3447 value"},
        {"action": "Handle T3448 value"},
        {"action": "Handle Truncated 5G-S-TMSI configuration"},
        {"action": "Handle service-level-AA response"},
        {"action": "Handle List of PLMNs to be used in disaster condition IE"},
        {"action": "Handle Disaster roaming/return wait range IE"},
        {"action": "Handle RAN timing synchronization IE"},
        {"action": "Handle NSSAI inclusion mode"},
        {"action": "Handle network slice replacement"}
      ],
      "events": ["REGISTRATION ACCEPT received"]
    },
    {
      "step": "UE Actions on REGISTRATION REJECT (UE)",
      "description": "The UE processes the REGISTRATION REJECT message.",
      "actions": [
        {"action": "Abort initial registration procedure"},
        {"action": "Set 5GS update status"},
        {"action": "Reset registration attempt counter"},
        {"action": "Enter state (5GMM-DEREGISTERED.ATTEMPTING-REGISTRATION, 5GMM-DEREGISTERED.PLMN-SEARCH, 5GMM-DEREGISTERED.LIMITED-SERVICE, or 5GMM-DEREGISTERED.NO-SUPI)"},
        {"action": "Delete 5G-GUTI, last visited registered TAI, TAI list, ngKSI"},
        {"action": "Update forbidden lists"},
        {"action": "Start timer T3346 (if applicable)"},
        {"action": "Start timer T3245 (if applicable)"},
        {"action": "Disable N1 mode capability (if applicable)"},
        {"action": "Handle EMM parameters (if applicable)"},
        {"action": "Inform upper layers of failure"},
        {"action": "Handle rejected NSSAI"},
        {"action": "Handle RAT utilization control"},
        {"action": "Handle CAG information list"},
        {"action": "Handle Satellite NG-RAN disabling"},
        {"action": "Perform PLMN/SNPN selection"},
        {"action": "Start timer T3526 (if applicable)"},
        {"action": "Handle SOR transparent container"},
        {"action": "Handle access for localized services in SNPN"},
        {"action": "Handle network slice replacement"}

      ],
      "events": ["REGISTRATION REJECT received"]
    },
    {
      "step": "Network Actions on REGISTRATION COMPLETE (Network)",
      "description": "The AMF processes the REGISTRATION COMPLETE message.",
      "actions":[
        {"action": "Stop timer T3550"},
        {"action": "Enter state 5GMM-REGISTERED"},
        {"action": "Consider parameters valid"}
      ],
      "events": ["REGISTRATION COMPLETE received"]
    }
  ],
  "events": [
    "Timer expiry",
    "Lower layer failure",
    "TAI change",
    "Transmission failures",
    "UE initiated de-registration",
    "De-registration procedure collision",
    "Protocol errors",
    "UDM indication of subscription data change",
    "NG-RAN indication"

  ],
  "parameters": [
    "5G-GUTI",
    "SUCI",
    "PEI",
    "IMSI",
    "TAI",
    "NSSAI",
    "Timers (T3346, T3502, T3510, T3511, T3512, T3519, T3447, T3448, T3550, T3526)",
    "5GMM cause value",
    "UE status",
    "5GS registration type",
    "5GS update type",
    "MICO indication",
    "DRX parameters",
    "LADN information",
    "Network slicing indication",
    "5GMM capability",
    "S1 UE network capability",
    "UE security capability",
    "UE policy container",
    "Additional information requested",
    "Requested WUS assistance information",
    "Requested PEIPS assistance information",
    "N5GC indication",
    "AUN3 indication",
    "Service-level-AA container",
    "List of equivalent PLMNs/SNPNs",
    "Service area list",
    "CAG information list",
    "Negotiated WUS assistance information",
    "Negotiated PEIPS assistance information",
    "5GS network feature support",
    "Truncated 5G-S-TMSI configuration",
    "Service-level-AA pending indication",
    "List of PLMNs to be used in disaster condition",
    "Disaster roaming wait range",
    "Disaster return wait range",
    "Forbidden TAIs",
    "RAN timing synchronization",
    "Feature authorization indication",
    "5GS registration result",
    "Allowed NSSAI",
    "Rejected NSSAI",
    "Partially rejected NSSAI",
    "Pending NSSAI",
    "NSSRG information",
    "Alternative NSSAI",
    "S-NSSAI time validity information",
    "S-NSSAI location validity information",
    "On-demand NSSAI",
    "NSAG information",
    "UE radio capability ID",
    "Unavailability configuration",
    "Discontinuous coverage maximum time offset",
    "RAT utilization control",
    "SOR transparent container",
    "NSSAI inclusion mode",
    "Operator-defined access category definitions",
    "Extended emergency number list",
    "Ciphering key data",
    "Back-off timer value"
  ],
  "metadata": {
    "message_types": ["REGISTRATION REQUEST", "REGISTRATION ACCEPT", "REGISTRATION REJECT", "REGISTRATION COMPLETE", "DEREGISTRATION REQUEST", "ATTACH REQUEST", "UE STATE INDICATION", "CONFIGURATION UPDATE COMMAND", "CONFIGURATION UPDATE COMPLETE"],
    "timers": ["T3346", "T3502", "T3510", "T3511", "T3512", "T3519", "T3447", "T3448", "T3550", "T3526", "T3245"]
  }
}
